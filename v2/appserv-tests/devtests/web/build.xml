<?xml version="1.0" encoding="ISO-8859-1"?>

<!DOCTYPE project [
<!ENTITY commonSetup SYSTEM "file:./../../config/properties.xml">
<!ENTITY commonBuild SYSTEM "file:./../../config/common.xml">
<!ENTITY reporting SYSTEM "file:./../../config/report.xml">
<!ENTITY run SYSTEM "file:./../../config/run.xml">
]>

<project name="web" default="all" basedir=".">

    <property name="TOTAL_EXPECTED" value="362"/>

    &commonSetup;
    &commonBuild;
    &reporting;
    &run;

    <property name="stylesheet" value="${env.APS_HOME}/config/j2eeReporter.xsl" />
    <property name="xmlfile" value="${env.APS_HOME}/test_resultsValid.xml" />
    <property name="htmlfile" value="${env.APS_HOME}/test_results.html" />

    <target name="jsp">
        <ant dir="jspAnonymousClass" target="all"/>
        <ant dir="emptyServletPathJspInclude" target="all"/>
        <ant dir="usebean" target="all"/>
        <ant dir="jspconfig" target="all"/>
        <ant dir="jsp-security" target="all"/>
        <ant dir="jspGetTagLibraryInfos" target="all"/>
        <ant dir="jspAllowErrorPageToSetResponseCharsetIfNoOutputWritten" target="all"/>
        <ant dir="jspUrnJspTldWithoutUri" target="all"/>
        <ant dir="jspCustomTaglibBundledAsJar" target="all"/>
        <ant dir="jspXpoweredByDisabled" target="all"/>
        <ant dir="jspXpoweredBySingleResponseHeader" target="all"/>
        <ant dir="jspConfigWelcomeFiles" target="all"/>
        <ant dir="jspConfigGetServletPath" target="all"/>
        <ant dir="jspConfigIncludeChain" target="all"/>
        <ant dir="jspConfigJspFile" target="all"/>
        <ant dir="jspErrorPageStatusCode" target="all"/>
        <ant dir="jspForwardUnbuffered" target="all"/>
        <ant dir="jspNullFragment" target="all"/>
        <ant dir="jspNestedScriptingTagExtraInfo" target="all"/>
        <ant dir="jspServletOverride" target="all"/>
        <ant dir="jspThrowsFileNotFoundExpect500ResponseCode" target="all"/>
        <ant dir="jspTagdependentXml" target="all"/>
        <ant dir="jspAttributeNameWithColonOrDot" target="all"/>
        <ant dir="jspcConfigure" target="all"/>
        <ant dir="jspScriptletDeclNestedInCustomAction" target="all"/>
        <!-- XXX temporary commented out due to issue 7389
        <ant dir="jspScriptletSyntaxErrorCorrectErrorMessage" target="all"/>
        -->
        <ant dir="jspCustomTagAttributeOfArrayType" target="all"/>
        <ant dir="jspCustomTaglibJarInsideEar" target="all"/>
        <ant dir="jspCommentedOutPageDirective" target="all"/>
        <ant dir="jspCommentedOutPageDirective1" target="all"/>
        <ant dir="jspScriptletAfterScriptlessTag" target="all"/>
        <ant dir="jspScriptlessTagBodyJspDocument" target="all"/>
        <ant dir="jspConfigJavacSource" target="build-publish-war"/>
        <ant dir="jspConfigModificationTestInterval" target="all"/>        
        <ant dir="jspConfigUsePrecompiled" target="all"/>
        <ant dir="jspConfigUsePrecompiled2" target="all"/>
        <ant dir="jspTagReleaseCalledWhenPoolingEnabled" target="all"/>
        <ant dir="jspTagReleaseCalledWhenPoolingDisabled" target="all"/>
        <ant dir="jspIncludedWelcomePage" target="all"/>
        <ant dir="jspIncludeResourceNameWithPlusChar" target="all"/>
        <ant dir="jspForwardPreserveApplicationResponseWrapper" target="all"/>
        <ant dir="jspExceptionInTagBodyRestoreJspWriter" target="all"/>
        <ant dir="jspErrorPageServletErrorException" target="all"/>
        <ant dir="jspErrorPageClassCastException" target="all"/>
        <ant dir="jspTemplateTextEscapedEL" target="all"/>
        <ant dir="jspResourceInjectionTagHandler" target="all"/>
        <ant dir="jspResourceInjectionTagHandlerPostConstruct" target="all"/>
        <ant dir="jspTagHandlerPostConstructElement" target="all"/>
        <ant dir="jspResourceInjectionSimpleTagHandler" target="all"/>
        <ant dir="jspResourceInjectionTagHandlerPoolingDisabled" target="all"/>
        <ant dir="jspResourceInjectionContextListener" target="all"/>
        <ant dir="jspBomInClassicSyntax" target="all"/>
        <ant dir="jspBomInClassicSyntaxEncodingMismatchPageDir" target="all"/>
        <ant dir="jspBomInClassicSyntaxEncodingMismatchJspConfig" target="all"/>
        <ant dir="jspTagFileBomEncodingMismatchTagDir" target="all"/>
        <ant dir="jspStaticFileEncoding" target="all"/>
        <ant dir="welcomePageSecurityConstraintJspExtension" target="all"/>
        <ant dir="welcomePageSecurityConstraintExactMatch" target="all"/>
        <ant dir="jspSelfReferencingErrorPage" target="all"/>
        <ant dir="jspSelfReferencingErrorPageWithRelativePath" target="all"/>
        <ant dir="jspPrecompileConsiderDomainLibJarFilesAndClasses" target="all"/>
        <ant dir="jspPrecompileDeployDashDashLibraries" target="all"/>    
        <ant dir="jspPrecompileIgnoreFragmentErrors" target="all"/>
        <ant dir="jspRuntimeCompileConsiderDomainLibJarFilesAndClasses" target="all"/>  
        <ant dir="jspRuntimeDeployDashDashLibraries" target="all"/>  
        <ant dir="jspCallingELFuctionFromTagfileWithinSameTaglibInfiniteRecursion" target="all"/>
        <ant dir="jspSessionInvalidated" target="all"/>
        <ant dir="jspWelcomePageWithoutAnyServletMappings" target="all"/>
        <ant dir="jspPoundSyntax" target="all"/>
        <ant dir="jspELEnum" target="all"/>
        <ant dir="jspInWebappWithBundledXercesImpl" target="all"/>
        <ant dir="jspTagLibraryValidatorXMLViewStaticInclude" target="all"/>
        <ant dir="jspCacheTaglibPrecompile" target="all"/>
        <ant dir="jspReloadGeneratedServletIfUpdated" target="all"/>
        <ant dir="jspTrimDirectiveWhitespaces" target="all"/>
    </target>

    <target name="taglib">
        <ant dir="tagPluginForEach" target="all"/>
        <ant dir="tagPluginForEachTagFile" target="all"/>
        <ant dir="tagplugin" target="all"/>
        <ant dir="tagfileInclude" target="all"/>
        <ant dir="jstlHtmlParamOutsideFmtMessage" target="all"/>
        <ant dir="jstlLocaleSupportAPI" target="all"/>
    </target>


    <target name="el">
        <ant dir="elFunctionWithoutParams" target="all"/>
        <ant dir="bodyTag" target="all"/>
        <ant dir="elUninterpretedTag" target="all"/>
        <ant dir="elequals" target="all"/>
    </target>

    <target name="servlet">
        <ant dir="index" target="all"/>
        <ant dir="standalonewar" target="all"/>  
        <ant dir="contentlength" target="all"/>
        <ant dir="sessionDestroyed" target="all"/>
        <ant dir="cookieProperties" target="all"/>  
        <ant dir="servlet-3.0/cookieHttpOnly" target="all"/>  
        <ant dir="defaultCharset" target="all"/>
        <ant dir="reuseSessionId" target="all"/>
        <ant dir="queryString" target="all"/>
        <ant dir="responseErrorMessageEncoding" target="all"/>
        <ant dir="responseExceptionMessageEncoding" target="all"/>
        <ant dir="requestDispatcherPathWithParams" target="all"/>
        <ant dir="applicationDispatcher" target="all"/>
        <ant dir="getRequestURI" target="all"/>
        <ant dir="filterURIMapping" target="all"/>
        <ant dir="getAttributeAfterForward" target="all"/>
        <ant dir="getAttributeAfterInclude" target="all"/>
        <ant dir="cacheFilterMappingDispatcher" target="all"/>
        <ant dir="errorPageExceptionTypeWrapper" target="all"/>
        <ant dir="httpServletGetAllDeclaredMethods" target="all"/>
        <ant dir="getServerNameAndPort" target="all"/>
        <ant dir="sessionIdUrlRewrite" target="all"/>
        <ant dir="sessionIdUrlRewriteSessionTrackingMode" target="all"/>
        <ant dir="sessionIdPresentInBothRewrittenUrlAndCookieByDefault" target="all"/>
        <ant dir="sessionIdPresentOnlyInCookieIfUrlRewritingDisabled" target="all"/>
        <ant dir="dirListing" target="all"/>
        <ant dir="cacheControlResponseHeaders" target="all"/>
        <ant dir="mimeMappingInheritedFromDefaultWebXml" target="all"/>
        <ant dir="requestDispatcherForwardCommitResponse" target="all"/>
        <ant dir="requestDispatcherForwardSendErrorCommitResponse" target="all"/>
        <ant dir="requestDispatcherForwardSetStatusCommitResponse" target="all"/>
        <ant dir="requestDispatcherIncludeTargetNotFound" target="all"/>
        <ant dir="requestDispatcherForwardHEADRequest" target="all"/>
        <ant dir="requestDispatcherMultipleForward" target="all"/>
        <ant dir="multibyteValue" target="all"/>
        <ant dir="multiByteGETQueryParamSetCharEncoding" target="all"/>
        <ant dir="multiByteGETQueryParamDefaultCharset" target="all"/>
        <ant dir="multiByteGETQueryParamFormHintField" target="all"/>
        <ant dir="multiByteGETQueryParamLocaleCharsetMap" target="all"/>
        <ant dir="multiBytePOSTFormHintField" target="all"/>
        <ant dir="serializableWebModuleAndServletStats" target="all"/>
        <ant dir="sessionSetMaxInactiveIntervalToZeroAndInvalidate" target="all"/>
        <ant dir="requestDispatcherMaxDepth" target="all"/>
        <ant dir="javaxServletErrorRequestUriDynamicResource" target="all"/>
        <ant dir="javaxServletErrorRequestUriStaticResource" target="all"/>
        <ant dir="sessionSetMaxInactiveIntervalExpire" target="all"/>
        <ant dir="distributableWebappEnforceSerializableSessionAttrs" target="all"/>
        <ant dir="forwardWithQueryString" target="all"/>
        <ant dir="servlet-3.0/servletContextAddServletAndFilterByClassName" target="all"/>
        <ant dir="servlet-3.0/servletContextAddServletAndFilterByClass" target="all"/>
        <ant dir="servlet-3.0/servletContextAddServletAndFilterByInstance" target="all"/>
        <ant dir="servlet-3.0/servletContextCreateServletAndFilter" target="all"/>
        <ant dir="servletContextAttributeEventAttributeRemoved" target="all"/>
        <ant dir="servletGetServerPort" target="all"/>
        <ant dir="servletAnnotationPreDestroy" target="all"/>
        <ant dir="servletContextListenerAnnotationPreDestroy" target="all"/>
        <ant dir="servletContextDestroyedEventAttributesAvailable" target="all"/>
        <ant dir="servletContextAttributeListenerAnnotationPreDestroy" target="all"/>
        <ant dir="servlet-3.0/servletContextSetInitParameter" target="all"/>
        <ant dir="servletResourceInjectionServletInstance" target="all"/>
        <ant dir="servletResourceInjectionServletInstanceLoadOnStartup" target="all"/>
        <ant dir="servletResourceInjectionContextListener" target="all"/>
        <ant dir="servletResourceInjectionContextAttributeListener" target="all"/>
        <ant dir="servletResourceInjectionRequestListener" target="all"/>
        <ant dir="servletResourceInjectionRequestAttributeListener" target="all"/>
        <ant dir="servletResourceInjectionFilter" target="all"/>
        <ant dir="servletResourceInjectionHttpSessionListener" target="all"/>
        <ant dir="servletResourceInjectionHttpSessionAttributeListener" target="all"/>
        <ant dir="cacheHelperRef" target="all"/>
        <ant dir="malformedQueryString" target="all"/>
        <ant dir="setMultiValuedResponseHeader" target="all"/>
        <ant dir="servletContextNullPathArgument" target="all"/>
        <ant dir="servletRequestParamsPreserveOrder" target="all"/>
        <!--
        <ant dir="servletRequestGetPathInfoCollapseContiguousSlashes" target="all"/>
        -->
        <ant dir="servletRequestSetCharEncodingIllegalStateException" target="all"/>
        <ant dir="servletRequestGetPathInfoGetPathTranslated" target="all"/>
        <ant dir="servletFilterMappingWithServletNameAndURLPattern" target="all"/>
        <ant dir="servletFilterDefaultInvocationOrder" target="all"/>
        <ant dir="servletMappingWithMultipleURLPatterns" target="all"/>
        <ant dir="servletChainedException" target="all"/>
        <ant dir="servletResponseQuotedContentTypeImbalance" target="all"/>
        <ant dir="servletRelativeContextURLsEquals" target="all"/>
        <ant dir="servletContextGetContextPath" target="all"/>
        <ant dir="servletContextGetEmptyContextPath" target="all"/>
        <ant dir="servletEmptyLoadOnStartup" target="all"/>
        <ant dir="sessionExpired" target="all"/>
        <ant dir="servletSSLRequestAttributes" target="all"/>
        <ant dir="servletRequestURIMultipleSemicolons" target="all"/>
        <ant dir="sessionSetAttributeJavaxNamingContext" target="all"/>
        <ant dir="servlet-3.0/sessionCookieConfig" target="all"/>
        <ant dir="servlet-3.0/sessionCookieConfigDeclarative" target="all"/>
        <ant dir="servlet-3.0/sessionCookieConfigProgrammatic" target="all"/>
        <ant dir="servlet-3.0/sessionCookieCustomNameProgrammatic" target="all"/>
        <ant dir="servlet-3.0/webServletAnnotation" target="all"/>
        <ant dir="servlet-3.0/webFilterAnnotation" target="all"/>
        <ant dir="servlet-3.0/webListenerAnnotation" target="all"/>
        <ant dir="servlet-3.0/xmlOverrideAnnotation" target="all"/>
        <ant dir="webFragment" target="all"/>
        <ant dir="multiWebFragments" target="all"/>
        <ant dir="servlet-3.0/servletRequestResponseWrapperIsWrapperFor" target="all"/>
        <ant dir="servlet-3.0/servletRequestDispatcherType" target="all"/>
        <ant dir="servlet-3.0/asyncContextComplete" target="all"/>
        <ant dir="servlet-3.0/asyncContextDispatch" target="all"/>
        <ant dir="servlet-3.0/asyncListenerOnComplete" target="all"/>
        <ant dir="servlet-3.0/asyncListenerOnTimeout" target="all"/>
        <!-- XXX temporary commented out due to issue 7387
        <ant dir="servlet-3.0/asyncSupportedTrue" target="all"/>
        <ant dir="servlet-3.0/asyncSupportedFalse" target="all"/>
        <ant dir="servlet-3.0/asyncContextHasOriginalRequestAndResponse" target="all"/>
        -->
    </target>

    <target name="web-container">
        <ant dir="accessLoggingDynamicReconfig" target="all"/>
        <ant dir="commonsLogging" target="all"/>
        <ant dir="commonsLoggingLocalAndGlobal" target="all"/>
        <!-- Commented out until IT 7125 has been fixed
        <ant dir="commonsLoggingLocalOverrideGlobal" target="all"/>
        -->
        <ant dir="contextXmlConfig" target="all"/> 
        <ant dir="contextPathXmlConfig" target="all"/>
        <ant dir="cookieValueWithSpaces" target="all"/>
        <ant dir="cookieValueWithEquals" target="all"/>
        <ant dir="crossContextDispatchLongestContextRootMatch" target="all"/> 
        <ant dir="delegate" target="all"/>
        <ant dir="errorPageExceptionTypeMapping" target="all"/>
        <ant dir="jsfWithBundledOneDotOneJarFiles" target="all"/>
        <ant dir="commonsDigesterClassNotFoundException" target="all"/>
        <ant dir="log4jLocallyBundled" target="all"/>
        <ant dir="log4jXmlInEarFile" target="all"/>
        <ant dir="singleengine" target="all"/>
        <ant dir="relativeRedirectAllowed" target="all"/>
        <ant dir="invokerServletDisabled" target="all"/>
        <ant dir="jmxUndeployEvent" target="all"/>
        <ant dir="jrouteIdInCookieOrURL" target="all"/>
        <ant dir="formHintField" target="all"/>
        <ant dir="formHintFieldPostWithQueryParam" target="all"/>
        <ant dir="formHintFieldPostWithQueryParamPrecedence" target="all"/>
        <ant dir="formHintFieldPrecedence" target="all"/>
        <!-- the class is not available at this point, need to investigate with admin team
        <ant dir="jsr77startstop" target="all"/>
        -->
        <ant dir="replaceRootContext" target="all"/>
        <ant dir="broken_webapp" target="all"/>
        <ant dir="contextRoot" target="all"/>
        <ant dir="emptyContextRoot" target="all"/>
        <ant dir="multiByteContextRoot" target="all"/>
        <ant dir="multiByteContextRootWithCookie" target="all"/>
        <ant dir="loadClassesFromZipFile" target="all"/>
        <ant dir="serverRedirectWithQueryString" target="all"/>
        <ant dir="sessionIdCustomGenerator" target="all"/>
        <ant dir="sessionJvmRoute" target="all"/>
        <ant dir="sessionPropertyEnableCookiesInstanceLevel" target="all"/>
        <ant dir="sessionSerializeOnShutdownOnly" target="all"/>
        <ant dir="singleSignOnCookieSecure" target="all"/>
        <ant dir="singleSignOnHttpServiceDynamicReconfig" target="all"/>
        <ant dir="webappDeployDashDashLibraries" target="all"/>
        <ant dir="webappLoaderIgnoreHiddenJarFiles" target="all"/>
        <ant dir="webappLoaderConsiderHiddenJarFiles" target="all"/>
        <ant dir="webappLoaderGetResourceDot" target="all"/>
        <ant dir="webappAlternateDocroot" target="all"/>
        <ant dir="webappAlternateDocrootTagFile" target="all"/>
        <ant dir="virtualServerDefaultWebModule" target="all"/>
        <ant dir="virtualServerDefaultWebModuleRequestPath" target="all"/>
        <ant dir="virtualServerDefaultWebModuleRequestDispatcher" target="all"/>
        <ant dir="virtualServerDefaultWebModuleFormLoginJSecurityCheckDirectAccess" target="all"/>
        <ant dir="virtualServerDefaultWebModuleRestart" target="all"/>
        <!-- XXX temporary commented out due to issue 7424
        <ant dir="virtualServerEarWrappedDefaultWebModuleRestart" target="all"/>
        -->
        <ant dir="virtualServerRedirectPropertyUrl" target="all"/>
        <ant dir="virtualServerDocrootDynamicReconfig" target="all"/>
        <ant dir="virtualServerStateDynamicReconfig" target="all"/>
        <ant dir="virtualServerAlternateDocroot" target="all"/>
        <ant dir="virtualServerAlternateDocrootDynamicReconfig" target="all"/>
        <!-- Uncomment once fix for IT 6731 has been ported to v3
        <ant dir="virtualServerAlternateDocrootWelcomePageRedirect" target="all"/>
        -->
        <ant dir="virtualServerRedirectPropertyUrlPrefix" target="all"/>
        <ant dir="virtualServerSendErrorProperty" target="all"/>
        <ant dir="virtualServerUpdateHttpListenersDynamicReconfig" target="all"/>
        <ant dir="virtualServerUpdateHostsDynamicReconfig" target="all"/>
        <ant dir="virtualServerChangeHttpListenerWebappNoLongerAccessible" target="all"/>
        <ant dir="virtualServerModifyHttpListenerPortAccessWebapp" target="all"/>
        <ant dir="virtualServerCreateUpperCaseDeployExclusive" target="all"/>
        <ant dir="classloaderMemoryLeak" target="all"/>
        <ant dir="reconfigDefaultWebModule" target="all"/>
        <ant dir="extraClassPathRelative" target="all"/>
        <ant dir="extraClassPathJarUrl" target="all"/>
        <ant dir="sessionInvalidateNoCookieInResponse" target="all"/>
        <ant dir="classloaderGetResourceJarFile" target="all"/>
        <ant dir="classloaderGetResourcesDelegateFalse" target="all"/>
        <ant dir="mimeMappingCaseInsensitiveMatch" target="all"/>
        <ant dir="sessionMemoryPersist" target="all"/>
        <ant dir="sessionMemoryPersistPrimitiveClass" target="all"/>
        <ant dir="sessionPreserveAcrossRedeploy" target="all"/>
        <!-- XXX temporary commented out due to issue 7391
        <ant dir="pipelineQueueFull" target="all"/>
        -->
        <ant dir="ssiEscapeCharacter" target="all"/>
        <ant dir="ssiHtmlEntity" target="all"/>
        <ant dir="valveTomcatStyle" target="all"/>
        <ant dir="valveGlassFishStyleBackwardCompatible" target="all"/>
        <ant dir="valveWithParams" target="all"/>
        <ant dir="contextValveSetRequestedSessionCookiePath" target="all"/>
        <ant dir="webdavCopyDelete" target="all"/>
        <ant dir="useBundledJsf" target="all"/>
        <ant dir="useBundledJsfWithTagCompilation" target="all"/>
        <ant dir="embeddedAddServlet" target="all"/>
        <ant dir="largeCookieError" target="all"/>
    </target>

    <target name="security">
        <ant dir="ssl" target="all"/>
        <ant dir="anonymousAccessForbidden" target="all"/>
        <ant dir="securityConstraintMapping" target="all"/>
        <ant dir="sslCookie" target="all"/>
        <ant dir="installationPathDisclosure" target="all"/>
        <ant dir="programmaticLogin" target="all"/>
        <ant dir="traceEnabled" target="all"/>
        <ant dir="sslClientAuthUnprotectedResourceGetClientCert" target="all"/>
        <ant dir="securityConstraintWithoutAnyAuthConstraint" target="all"/>
        <ant dir="proxyKeysize" target="all"/>
        <ant dir="proxyAuthCert" target="all"/>
        <ant dir="authPassthroughGetScheme" target="all"/>
        <ant dir="authPassthroughRequestIsSecure" target="all"/>
        <ant dir="authPassthroughGetRemoteAddress" target="all"/>
        <ant dir="authPassthroughGetRemoteHost" target="all"/>
        <ant dir="authPassthroughSendRedirectWithHttpsServerName" target="all"/>
        <ant dir="authPassthroughSendRedirectFromJspWithHttpsServerName" target="all"/>
        <ant dir="authPassthroughSendRedirectHostRequestHeaderWithoutPort" target="all"/>
        <ant dir="sessionDestroyedDuringUndeploy" target="all"/>
        <ant dir="virtualServerAuthRealmProperty" target="all"/>
        <ant dir="formLoginJSecurityCheckDirectAccess" target="all"/>
        <ant dir="formLoginAccessSessionOnResumedRequest" target="all"/>
        <ant dir="formLoginTransportGuaranteeConfidential" target="all"/>
        <ant dir="jspForwardNormalizePath" target="all"/>
    </target>

    <target name="http-connector">
        <ant dir="redirectPort" target="all"/>
        <ant dir="redirectPortLoadBalancer" target="all"/>
        <ant dir="readLineIOException" target="all"/>
        <ant dir="keepAlive" target="all"/>
        <ant dir="listenerDisabled" target="all"/>
        <ant dir="chunkingDisabled" target="all"/>
        <ant dir="httpConnectorKeepAlive" target="all"/>
        <ant dir="doubleContentLength" target="all"/>
        <ant dir="dosBrokenPost" target="all"/>
        <ant dir="defaultKeepAlive" target="all"/>
        <ant dir="multiServletRequests" target="all"/>
        <ant dir="v3HttpListenerDynamicConfig" target="all"/>
        <ant dir="caseSensitiveHostMapping" target="all"/>
        <ant dir="setResponseContentLengthToZeroKeepResponseHeaders" target="all"/>
        <ant dir="getLocalPort" target="all"/>
        <ant dir="readerThreadsConfig" target="all"/>
        <ant dir="readerSelectorsConfig" target="all"/>
        <ant dir="httpServletDoPost" target="all"/>
<!-- XXX temporary commented out due to issue 7420 
        <ant dir="keepAliveTimeoutZero" target="all"/>
-->
        <ant dir="keepAliveTimeoutZeroSSL" target="all"/>
        <ant dir="httpResponseServerHeader" target="all"/>
        <ant dir="defaultResponseType" target="all"/>
<!-- XXX temporary commented out due to issue 6991 
        <ant dir="httpListenerAdminReconfig" target="all"/>
-->
        <ant dir="headerBufferSize" target="all"/>
        <ant dir="defaultContentType" target="all"/>
        <ant dir="headerBufferFull" target="all"/>
        <!-- Fail on Hudson, removing it for now
        <ant dir="dosSlowClient" target="all"/>
        -->
        <ant dir="sslMultiSelector" target="all"/>
        <ant dir="httpRequestIgnoreInvalidAcceptLanguageHeader" target="all"/>
        <ant dir="sslServerName" target="all"/>
        <!-- Exclude for prelude, since port unification not supported
        <ant dir="wrongTransport" target="all"/>
        -->
<!-- XXX temporary commented out due to issue 7420
        <ant dir="maxKeepAliveRequests" target="all"/>
-->
        <ant dir="httpRequestWhitespaceTolerance" target="all"/>
        <ant dir="multiByteHttpRequestBuffer" target="all"/>
        <ant dir="readLineWithMaxLength" target="all"/>
        <ant dir="httpResponseErrorMessage" target="all"/>
        <ant dir="redirectWithRootWildCardUrlPattern" target="all"/>
    </target>

    <target name="all">
        <delete>
           <fileset dir="${env.APS_HOME}" includes="test_results*"/>
        </delete>
        <delete>
           <fileset dir="." includes="*.output"/>
           <fileset dir="." includes="*.txt"/>
        </delete>
        
        <record name="web.output" action="start" />
        <antcall target="startDomain"/>
        <antcall target="jsp"/>
        <antcall target="taglib"/>
        <antcall target="el"/>
        <antcall target="web-container"/>
        <antcall target="security"/>
        <antcall target="http-connector"/>
        <antcall target="servlet"/>
        <antcall target="stopDomain"/>
        <record name="web.output" action="stop" />

        <antcall target="dev-report"/>

        <echo message="Detailed results available under appserv-tests/test_result.html"/>
        <echo message="#################################################"/>
        <echo message="javaxServletErrorRequestUriDynamicResource and javaxServletErrorRequestUriStaticResource will fail on Linux if you don't change appserv-tests/config.properties localhost to localhost.localdomain"/>
        <echo message="#################################################"/>
        <echo message="Expected failures on GlassFish as of 03/27/06: 1"/>
        <echo message="  ssl-responseCode (Issue 483) "/>
        <echo message="#################################################"/>
        <echo message="#################################################"/>
        <echo message="Expected failures on SE as of 04/21/05: 1"/>
        <echo message="  sslClientAuthUnprotectedResourceGetClientCert"/>
        <echo message="#################################################"/>
    </target>

    <target name="dev-report" depends="init-common,compile-report">
       <xslt style="${stylesheet}"
                in="${xmlfile}" out="${htmlfile}"
                basedir="${env.APS_HOME}" destdir="${env.APS_HOME}/devtests/web" />
                
       <!--
       <antcall target="copyMailJars"/>
       -->

       <java classname="ResultsProducer" fork="true" failonerror="false" maxmemory="128M" dir="${build.classes.dir}">
            <arg value="${env.APS_HOME}/test_resultsValid.xml"/>
            <arg value="${TOTAL_EXPECTED}"/>
            <arg value="${env.APS_HOME}/count.txt"/>
       </java>

       <!--  We need to execute ant using CMD line so the jars are picked -->
       <!--
       <java classname="org.apache.tools.ant.Main" fork="true" failonerror="false" maxmemory="128M">
            classpath>
                <fileset dir="${env.S1AS_HOME}/lib/ant/lib">
                    <include name="*.jar" />
                </fileset>
            </classpath>
            <sysproperty key="ant.home" value="${env.S1AS_HOME}/lib/ant" /
            <arg line="-f ./mail.xml "/>
        </java>
	-->

    </target>

    <target name="clean-webapps" depends="clean-webapps-common" />

    <target name="usage">
	<echo>
		Usage:
			ant web (Executes the web tests)
	</echo>
    </target>
    <property name="machine.config" value="default_${os.name}_${os.arch}" />

    <target name="copyMailJars">
        <echo message="Copying mail jars into ${env.S1AS_HOME}/lib/ant/lib}"/>
        <copy todir="${env.S1AS_HOME}/lib/ant/lib" overwrite="true" verbose="true">
            <fileset dir="${env.S1AS_HOME}/lib" 
                includes="activation.jar,mail.jar"/>
        </copy>
    </target>
</project>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>Appserver MBean API Sample Guide</title>
  <meta http-equiv="content-type"
 content="text/html; charset=ISO-8859-1">
</head>
<body bgcolor="#ffffff">
<div style="text-align: center;">
<div style="text-align: center;"> </div>
<big><big><span style="font-weight: bold;">Appserver MBean API (AMX)
Sample Guide</span></big></big><br>
</div>
<p style="font-weight: bold;"> <font size="-1">Last updated: 25
October 2005</font></p>
<p style="font-weight: bold;">Introduction<br>
</p>
<p>This document gives an overview on using the <span
 style="font-weight: bold;">Appserver Management
Extensions</span> (<span style="font-weight: bold;">AMX</span>)
API.&nbsp;
Sample source code may be viewed directly by clicking on individual
method names within the Javadoc. Nearly all the source code is
contained within <a href="Samples.html">Samples</a>.<br>
</p>
<p><a name="CompileChecklist"></a><span style="font-weight: bold;">Compile
checklist:</span></p>
<ol>
  <li>JDK 1.5.0 or later is required.<br>
  </li>
  <li>Copy <span style="font-family: monospace;">appserv-ext.jar</span>
into this directory before running the '<span
 style="font-family: monospace;">compile-samples</span>' script.&nbsp;
It is found in <span style="font-family: monospace;">${INSTALL_ROOT}/lib</span>.&nbsp;
Alternately, you may modify the compile script to point to this jar in
your
install (or build) directory.</li>
</ol>
<a name="RunChecklist"></a><span style="font-weight: bold;">Run
checklist:</span>
<ol>
  <li>Requirements as in <a href="#CompileChecklist">Compile checklist</a>
above.</li>
  <li>Copy <span style="font-family: monospace;">javaee.jar</span>
into this directory before running the '<span
 style="font-family: monospace;">run-samples</span>' script.&nbsp; It
is found in <span style="font-family: monospace;">${INSTALL_ROOT}/lib/</span>.&nbsp;
Alternately, you may modify the script to point to this jar in your
install (or build) directory.</li>
</ol>
<p><br style="font-weight: bold;">
<big> <span style="font-weight: bold;"><font size="+1">Running the
sample command line</font></span></big><a name="Connecting"
 style="font-weight: bold;"></a><br>
<br>
The samples are demonstrated using a simple command-line interface. You
can run it as follows:<br>
</p>
<p style="font-family: monospace;">sh run-samples.sh&nbsp;&nbsp; (unix)<br>
run.samples.bat&nbsp;&nbsp;&nbsp;&nbsp; (Windows)</p>
<p>See <a
 href="SampleMain.html#connect%28java.lang.String,%20int,%20java.lang.String,%20java.lang.String,%20com.sun.appserv.management.client.TLSParams%29">SampleMain.connect()</a>
for an
example of how to connect to the server.&nbsp; If a properties file is
not specified it uses default values for the above items.&nbsp; If
specified, the properties file uses the following format:<br>
<br>
<span style="font-family: monospace;">connect.host=localhost</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">connect.port=8686</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">connect.user=admin</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">connect.password=admin123</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">connect.truststore=samples-truststore</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">connect.truststorePassword=changeme</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;"><span
 style="font-family: monospace;">connect.useTLS=false</span><span
 style="font-weight: bold;"></span><br style="font-weight: bold;">
</span> <br>
IMPORTANT:&nbsp; Note that in an Enterprise Edition build, TLS is
generally enabled, so <span style="font-family: monospace;">useTLS </span>must
be true and the
<span style="font-family: monospace;">trustStore </span>and <span
 style="font-family: monospace;">truststorePassword </span>are
required (truststore will be created automatically).&nbsp; Connections
will
fail (or hang)&nbsp; if <span style="font-family: monospace;">useTLS </span>is
not set appropriately.<br>
<br>
Once you have connected to the DAS via an <a
 href="../../javadoc/com/sun/appserv/management/client/AppserverConnectionSource.html">AppserverConnectionSource</a>
call <a
 href="../../javadoc/com/sun/appserv/management/DomainRoot.html#getDomainRoot%28%29">getDomainRoot()</a>
to get an instance of <a
 href="../../javadoc/com/sun/appserv/management/DomainRoot.html">DomainRoot</a>.&nbsp;
All further interfaces may be obtained from <a
 href="../../javadoc/com/sun/appserv/management/DomainRoot.html">DomainRoot</a>,
directly or indirectly.<br>
<br>
<big><span style="font-weight: bold;"><font size="+1">Viewing and
running the sample code</font></span></big><a name="ViewingAndRunning"
 style="font-weight: bold;"></a><span style="font-family: monospace;"><br>
<br>
</span>Javadoc for all samples is found in <a
 href="../javadoc/amxsamples/Samples.html">Samples</a>;&nbsp; while
viewing the Javadoc
for a particular method (not just the summary of all methods), clicking
on the method name displays the source code for that method.<br>
<br>
You may wish to run the <a href="../javadoc/amxsamples/SampleMain.html">SampleMain</a>
command line interface while viewing
the Javadoc.&nbsp; The available samples are summarized here:<br>
<br>
</p>
<table style="text-align: left; width: 100%;" border="1" cellpadding="2"
 cellspacing="2">
  <tbody>
    <tr>
      <td style="vertical-align: top; font-weight: bold;">SampleMain
command name<br>
      </td>
      <td style="vertical-align: top; font-weight: bold;">Samples.java
method name<br>
      </td>
      <td style="vertical-align: top; font-weight: bold;">Discussion<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top; font-family: monospace;">demo-jmx-monitor<br>
      </td>
      <td style="vertical-align: top;"><a
 href="../javadoc/amxsamples/Samples.html#demoJMXMonitor%28%29">demoJMXMonitor()</a><br>
      </td>
      <td style="vertical-align: top;">Demonstrates the use of a <a
 href="http://java.sun.com/j2se/1.5.0/docs/api/javax/management/monitor/package-summary.html"><span
 style="font-family: monospace;">javax.management.monitor</span></a>
MBean
to be notified of changes in the value of an <a
 href="http://java.sun.com/j2se/1.5.0/docs/api/javax/management/Attribute.html"><span
 style="font-family: monospace;">javax.management.Attribute</span></a>.<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top; font-family: monospace;">deploy<br>
      </td>
      <td style="vertical-align: top;"><a
 href="../javadoc/amxsamples/Samples.html#deploy%28%29">deploy()</a><br>
      </td>
      <td style="vertical-align: top;">Demonstrates how to deploy an
archive using the low-level API.<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top; font-family: monospace;">list-attributes<br>
      </td>
      <td style="vertical-align: top;"><a
 href="../javadoc/amxsamples/Samples.html#displayAllAttributes%28%29">displayAllAttributes()</a><br>
      </td>
      <td style="vertical-align: top;">Demonstrates how to access and
display available Attributes on a <a
 href="../../javadoc/com/sun/appserv/management/base/AMX.html">AMX</a>.<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top; font-family: monospace;">list<br>
      </td>
      <td style="vertical-align: top;"><a
 href="../javadoc/amxsamples/Samples.html#handleList%28%29">handleList()</a><br>
      </td>
      <td style="vertical-align: top;">Demonstrates how to access
various types of&nbsp; <a
 href="../../javadoc/com/sun/appserv/management/base/AMX.html">AMX</a>
by obtaining
a Map and then displaying it.<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top; font-family: monospace;">list-properties<br>
      </td>
      <td style="vertical-align: top;"><a
 href="../javadoc/amxsamples/Samples.html#displayAllProperties%28%29">displayAllProperties()</a><br>
      </td>
      <td style="vertical-align: top;">Display all properties found on
all <a href="../../javadoc/com/sun/appserv/management/base/AMX.html">AMX</a>.<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top; font-family: monospace;">query<br>
      </td>
      <td style="vertical-align: top;"><a
 href="../javadoc/amxsamples/Samples.html#demoQuery%28%29">demoQuery()</a><br>
      </td>
      <td style="vertical-align: top;">Demonstrate how to use the <a
 href="../../javadoc/com/sun/appserv/management/base/QueryMgr.html">QueryMgr</a>
facilities.<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top; font-family: monospace;">quit<br>
      </td>
      <td style="vertical-align: top;">-<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top; font-family: monospace;">run-all<br>
      </td>
      <td style="vertical-align: top;">-<br>
      </td>
      <td style="vertical-align: top;">Runs all samples that do not
require additional arguments.<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top; font-family: monospace;">start-server<br>
      </td>
      <td style="vertical-align: top;"><a
 href="../javadoc/amxsamples/Samples.html#startServer%28java.lang.String%29">startServer(String
serverName)</a><br>
      </td>
      <td style="vertical-align: top;">Starts a server.<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top; font-family: monospace;">stop-server<br>
      </td>
      <td style="vertical-align: top;"><a
 href="../javadoc/amxsamples/Samples.html#stopServer%28java.lang.String%29">stopServer(</a><a
 href="file:///H:/appserv-tests/devtests/ee/admin/mbeanapi/samples/com/sun/appserv/management/sample./Samples.html#startServer%28java.lang.String%29">String
serverName</a><a
 href="http://fisheye.cenqua.com/java.net/viewrep/%7Eraw,r=1.3/glassfish/www/amx/samples/Samples.html#stopServer%28java.lang.String%29">)</a><br>
      </td>
      <td style="vertical-align: top;">Stops a server.<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top; font-family: monospace;">show-hierarchy<br>
      </td>
      <td style="vertical-align: top;"><a
 href="../javadoc/amxsamples/Samples.html#displayHierarchy%28%29">displayHierarchy()</a>
      </td>
      <td style="vertical-align: top;">Displays the hierarchy of all
available <a
 href="../../javadoc/com/sun/appserv/management/base/AMX.html">AMX</a>.<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top; font-family: monospace;">set-monitoring<br>
      </td>
      <td style="vertical-align: top;"><a
 href="../javadoc/amxsamples/Samples.html#setMonitoring%28%29">setMonitoring(
configName, level)</a><br>
      </td>
      <td style="vertical-align: top;">Sets the monitoring state for
all available modules.<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top; font-family: monospace;">undeploy<br>
      </td>
      <td style="vertical-align: top;"><a
 href="../javadoc/amxsamples/Samples.html#undeploy%28%29">undeploy(String
moduleName)</a><br>
      </td>
      <td style="vertical-align: top;">Undeploys a deployed module.<br>
      </td>
    </tr>
  </tbody>
</table>
<br>
<span style="font-family: monospace;"><br>
<br>
<br>
</span><br>
<br>
<br>
<br>
<br>
<br>
</body>
</html>

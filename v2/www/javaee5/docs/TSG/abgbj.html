<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html><!-- GenHTML@12751-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<!-- ident	"%Z%%M%	%I%	%E% SMI" -->

    <title>2.&nbsp;&nbsp;Common Problems
    </title>
</head>
<body>
<font style="color: red; font-family:arial,helvetica,sans-serif; font-size:12pt; font-weight:bold}">Not For Publication</font>&nbsp;&nbsp;&nbsp;<br>Glassfish Review Draft<br> </td>

<A href="toc.html">Sun Java System Application Server Platform Edition 9.0 Troubleshooting Guide</A>&nbsp;<br>
<A HREF="abgap.html">Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="abgjs.html">Next</A><br>
            <!--startindex--><A NAME="abgbj"></A><b>Chapter&nbsp;2</b><h1>Common Problems</h1>
<p>This section covers the most common problems you may encounter when using the Application Server:</p>
<ul><li><p><A HREF="abgbj.html#abgbk"><tt>asadmin</tt> <tt>start-domain</tt> Command Fails</A></p>
</li>
<li><p><A HREF="abgbj.html#abgbr">Automatically Restarting a Domain or Node Agent on Reboot</A></p>
</li>
<li><p><A HREF="abgbj.html#abgbz">Cannot Find Log Files</A></p>
</li>
<li><p><A HREF="abgbj.html#abgca">Accessing Local Server Fails (<tt>http://localhost:8080</tt>)</A></p>
</li>
<li><p><A HREF="abgbj.html#abgcf">Accessing Remote Server Fails</A></p>
</li>
<li><p><A HREF="abgbj.html#abgcm">Cannot Access the Administration Console</A></p>
</li>
<li><p><A HREF="abgbj.html#abgcw">Cannot Access a Server Application</A></p>
</li>
<li><p><A HREF="abgbj.html#abgdi">Server Will Not Start on Windows (Port Conflict)</A></p>
</li>
<li><p><A HREF="abgbj.html#abgdl">Port Conflicts Debugging Multiple Instances on the Same Server</A></p>
</li>
<li><p><A HREF="abgbj.html#abgdr">Two Server Instances Bind to Same Port on Windows</A></p>
</li>
<li><p><A HREF="abgbj.html#abgdu">Error: <tt>System cannot find the path specified</tt></A></p>
</li>
<li><p><A HREF="abgbj.html#abgdy">Application Generates Error <tt>persistence.support.JDODataStoreException</tt></A></p>
</li>
<li><p><A HREF="abgbj.html#abgeb">Using <tt>asadmin set</tt> Command May Produce Unexpected Results</A></p>
</li>
<li><p><A HREF="abgbj.html#abgee">Cannot Undeploy Or Redeploy Application With Open Streams to Jar Files (Windows Only)</A></p>
</li>
<li><p><A HREF="abgbj.html#abgeh">Cannot Reinstall Application Server After Manual Deletion of Directories</A></p>
</li>
<li><p><A HREF="abgbj.html#abgel">Cannot Produce a JVM Thread Dump After Server Crash</A></p>
</li>
</ul>
<A NAME="abgbk"></A><h2><tt>asadmin</tt> <tt>start-domain</tt> Command
Fails</h2>
<A NAME="indexterm-18"></A><p>The command <tt>asadmin start-domain</tt> fails with one of the following
errors:</p>
<ul><li><p><A HREF="abgbj.html#abgbl">Error: <tt>CLI143 There is more than one domain...</tt></A></p>
</li>
<li><p><A HREF="abgbj.html#abgbo">Error: <tt>Could Not Start Domain</tt></A></p>
</li>
</ul>
<A NAME="abgbl"></A><h3>Error: <tt>CLI143 There is more than one domain...</tt></h3>
<A NAME="abgbm"></A><h4>Description</h4>
<p>When issued with no arguments, the command <tt>asadmin start-domai</tt>n
fails with the error:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>CLI143 There is more than one domain in C:\\Sun\\AppServer\\domains.
Please use operand to specify the domain.
CLI156 Could not start the domain null.</pre>
</td></table><br><p>This error occurs when there is more than one domain in the domains directory,
none of them is named <tt>domain1,</tt> and no domain is specified with
the <tt>start-domain</tt> command.</p>
<A NAME="abgbn"></A><h4>Solution</h4>
<p>Specify the domain when issuing the <tt>start-domain</tt> command:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>asadmin start-domain domain1</pre>
</td></table><br><A NAME="abgbo"></A><h3>Error: <tt>Could Not Start Domain</tt></h3>
<A NAME="abgbp"></A><h4>Description</h4>
<p>This message comes from Application Server 8. The full message looks like either:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>Could not start the domain.
There are no domains.</pre>
</td></table><br><p><i>or</i></p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>Could not start the domain.
No default domain. Need to enter a domain.</pre>
</td></table><br><p>This error occurs when Application Server 8 is installed on the same system, and
its <tt>asadmin</tt> command (at <tt>/usr/sbin</tt>) is found
on the <tt>PATH</tt> before the <tt>asadmin</tt> command for Application Server 8
at <i>install_dir</i><tt>/bin</tt>. The situation is
especially likely to occur on Solaris/Linux systems when <tt>.</tt> is not
specified as part of the <tt>PATH</tt> variable. Without <tt>.</tt> in
the <tt>PATH</tt>, the <tt>asadmin</tt> command in <tt>/usr/sbin</tt> is found first, even when the current directory is <i>install_dir</i><tt>/bin</tt>.</p>
<A NAME="abgbq"></A><h4>Solution</h4>
<p>Make sure <i>install_dir</i><tt>/bin</tt> is in
the <tt>PATH</tt> ahead of <tt>/usr/sbin</tt>, or that <tt>.</tt> is in the <tt>PATH</tt> ahead of <tt>/usr/sbin</tt> if
you access <tt>asadmin</tt> by changing directories to <i>install_dir</i><tt>/bin</tt>. Alternatively, if you do change to <i>install_dir</i><tt>/bin</tt> to run <tt>asadmin</tt>,
be sure to include<tt>./</tt> in the command name; for example:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>cd <i>install_dir</i>/bin
./asadmin</pre>
</td></table><br><A NAME="abgbr"></A><h2>Automatically Restarting a Domain or Node Agent on Reboot</h2>
<A NAME="indexterm-19"></A><A NAME="indexterm-20"></A><A NAME="indexterm-21"></A><p>If your domain or node agent is stopped unexpectedly (for example, if you need
to restart your machine), you can configure your system to automatically restart the
domain or node agent on reboot.</p>
<ul><li><p><A HREF="abgbj.html#abgbs">Restarting Automatically on UNIX Platforms</A></p>
</li>
<li><p><A HREF="abgbj.html#abgbv">Restarting Automatically on the Microsoft Windows Platform</A></p>
</li>
</ul>
<A NAME="abgbs"></A><h3>Restarting Automatically on UNIX Platforms</h3>
<A NAME="abgbt"></A><h4>Restarting a Domain</h4>
<p>To restart your domain on a UNIX platform, add a line containing the appropriate <tt>asadmin start-domain</tt> command to your <tt>/etc/inittab</tt> file.
If you use <tt>/etc/rc.local,</tt> or your system's equivalent, place
a the desired <tt>asadmin</tt> command in <tt>/etc/rc.local</tt>.</p>
<p>For example, to restart <tt>domain1</tt> for an Troubleshooting Guide installed
in the <tt>/opt/SUNWappserver</tt> directory, using a password file called <tt>password.txt</tt>, add the following line to <tt>/etc/inittab</tt> or <tt>/etc/rc.local</tt>:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>das:3:respawn:/opt/SUNWappserver/bin/asadmin start-domain --user admin 
--passwordfile /opt/SUNWappserver/password.txt domain1</pre>
</td></table><br><p>Be sure to put the text on one line. The first three letters are a unique designator
for the process and can be altered.</p>
<A NAME="abgbu"></A><h4>Restarting a Node Agent</h4>
<p>To restart a node agent, the syntax is similar. For example, to restart <tt>agent1</tt> for an Troubleshooting Guide installed in the <tt>/opt/SUNWappserver</tt> directory using a password file called <tt>password.txt</tt>,
add the following line to <tt>/etc/inittab</tt> or <tt>/etc/rc.local</tt>:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>das:3:respawn:/opt/SUNWappserver/bin/asadmin start-node-agent --user admin 
--passwordfile /opt/SUNWappserver/password.txt agent1</pre>
</td></table><br><A NAME="abgbv"></A><h3>Restarting Automatically on the Microsoft Windows Platform</h3>
<p>To restart automatically on Microsoft Windows, create a Windows Service. Use
the <tt>appservService.exe</tt> and <tt>appserverAgentService.exe</tt> executables
shipped with Sun Java System Application Server in conjunction with the Service Control
command (<tt>sc.exe</tt>) provided by Microsoft.</p>
<ul><li><p>The <tt>sc.exe</tt> command comes with Windows XP and is
either located in the <tt>C:\\windows\\system32</tt> directory or <tt>C:\\winnt\\system32</tt> directory.</p>
</li>
<li><p>As of this writing, the Windows 2000 <tt>sc.exe</tt> is
available for download at: <A HREF="ftp://ftp.microsoft.com/reskit/win2000/sc.zip">ftp://ftp.microsoft.com/reskit/win2000/sc.zip</A>. For more information
on using <tt>sc.exe</tt>, see:</p>
<p><A HREF="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/dndllpro/html/msdn_scmslite.asp">http://msdn.microsoft.com/library/default.asp?url=/library/en-us/dndllpro/html/msdn_scmslite.asp</A>.</p>
<p>Use <tt>appservService.exe</tt> and <tt>appservAgentService.exe</tt> as follows:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>C:\\winnt\\system32\\sc.exe create <i>service_name</i> binPath= \\"<i>fully_qualified_</i>
<i>path_to_appservService.exe</i> \\"<i>fully_qualified_path_to_asadmin.bat</i> 
<i>start_command\\</i>" 
\\"<i>fully_qualified_path_to_asadmin.bat stop_command</i>\\"" start= auto 
DisplayName= "<i>display_name</i>"</pre>
</td></table><br></li>
</ul>
<A NAME="abgbw"></A><h4>Starting and Stopping a Domain</h4>
<p>To create a service called <tt>SunJavaSystemAppServer DOMAIN1</tt> that
starts and stops <tt>domain1</tt> using password file <tt>C:\\Sun\\AppServer\\password.txt</tt>, run the following command:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>C:\\windows\\system32\\sc.exe create domain1 binPath= "C:\\Sun\\AppServer\\
lib\\appservService.exe \\"C:\\Sun\\AppServer\\bin\\asadmin.bat start-domain
--user admin --passwordfile C:\\Sun\\AppServer\\password.txt domain1\\" 
\\"C:\\Sun\\AppServer\\bin\\asadmin.bat stop-domain domain1\\"" 
start=auto DisplayName= "SunJavaSystemAppServer DOMAIN1"</pre>
</td></table><br><A NAME="abgbx"></A><h4>Starting and Stopping a Node Agent</h4>
<p>To create a service that starts and stops the node agent <tt>agent1</tt>,
run the following command:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>C:\\windows\\system32\\sc.exe create agent1 binPath= "C:\\Sun\\AppServer\\
lib\\appservAgentService.exe \\"C:\\Sun\\AppServer\\bin\\asadmin.bat 
start-node-agent --user admin --passwordfile C:\\Sun\\AppServer\\
password.txt agent1\\" \\"C:\\Sun\\AppServer\\bin\\asadmin.bat 
stop-node-agent agent1\\"" start=auto DisplayName="SJESAS_SE8.1 AGENT1"</pre>
</td></table><br><p><hr size="1" noshade><p><b>Note - </b>The start and stop commands entered as part of the <tt>binPath=</tt> parameter
must have the correct syntax. To test, run the commands from the command prompt. If
the commands do not properly start or stop the domain or node agent, the service will
not work correctly.</p>
<p>Also, do not use a mixture of <tt>asadmin start</tt> and <tt>stop</tt> commands and <tt>service start</tt> and <tt>stops</tt>. Mixing the two can cause the server status to be out of sync. For
example, the service might not show that the component has started even though the
component is not running. To avoid this situation, always use the <tt>sc.exe</tt> command to start and stop the component when using services.</p>
<hr size="1" noshade></p><A NAME="abgby"></A><h4>Security for Automatic Restarts</h4>
<p>Handle the password and master password required when starting in one of the
following ways:</p>
<ul><li><p>On Microsoft Windows, configure the service to ask the user for the
password.</p>
<ul><li><p>In the Services Control Panel, double-click the service you created.</p>
</li>
<li><p>In the Properties window, click the Log On tab.</p>
</li>
<li><p>Check "Allow service to interact with desktop" to prompt
for the required passwords when starting the component.</p>
<p>You have to log
in to see the prompts, and entries are not echoed back as you type them. This method
is the most secure way to use the services option, but user interaction is required
before the service becomes available.</p>
<p>If the "interact with desktop"
option is not set, the service stays in a "start-pending" state and appears
to hang. Kill the service process to recover from this state.</p>
</li>
</ul>
</li>
<li><p>On Windows or UNIX, create a domain using the <tt>--savemasterpassword=true</tt> option and create a password file to store the admin password. When starting
the component, use the <tt>--passwordfile</tt> option to point to the file
that contains the password. The admin password can also be added by using the <tt>--password</tt> option with the <tt>asadmin start</tt> command. Be
aware that this method is less secure because the admin password is stored in clear
text.</p>
<p>For example:</p>
<ul><li><p>Create a domain with a saved master password. Using this syntax, you
are prompted for the admin password and master password:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>asadmin create-domain --adminport 4848 --adminuser admin
--savemasterpassword=true --instanceport 8080 domain1</pre>
</td></table><br></li>
<li><p>On Windows, create a service using a password file to populate the
admin password:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>C:\\windows\\system32\\sc.exe create domain1 binPath=
 "C:\\Sun\\AppServer\\lib\\appservService.exe
 \\"C:\\Sun\\AppServer\\bin\\asadmin.bat start-domain --user admin
 --passwordfile C:\\Sun\\AppServer\\password.txt domain1\\"
 \\"C:\\Sun\\AppServer\\bin\\asadmin.bat stop-domain domain1\\""
 start= auto DisplayName= "SJESAS_PE8.1 DOMAIN1"</pre>
</td></table><br><p>The path to the password file <tt>password.txt</tt> is <tt>C:\\Sun\\AppServer\\password.txt</tt>. It contains the password in the following format:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>AS_ADMIN_password=<i>password</i></pre>
</td></table><br><p>For example, for a password <tt>adminadmin</tt>:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>AS_ADMIN_password=adminadmin</pre>
</td></table><br></li>
<li><p>On UNIX, use the <tt>--passwordfile</tt> option in the line
you add to the <tt>inittab</tt> file:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>das:3:respawn:/opt/SUNWappserver/bin/asadmin start-domain
 --user admin --passwordfile /opt/SUNWappserver/password.txt domain1</pre>
</td></table><br><p>The path to the password file <tt>password.txt</tt> is <tt>/opt/SUNWappserver/password.txt</tt>. It contains the password in the following format:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>AS_ADMIN_password=<i>password</i></pre>
</td></table><br><p>For example, for a password <tt>adminadmin</tt>:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>AS_ADMIN_password=adminadmin</pre>
</td></table><br></li>
</ul>
</li>
<li><p>Creating a service using a password that is populated from a command
line option:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>C:\\windows\\system32\\sc.exe create domain1 binPath= "C:\\Sun\\AppServer\\
lib\\appservService.exe \\"C:\\Sun\\AppServer\\bin\\asadmin.bat start-domain
--user admin --password adminadmin domain1\\" \\"C:\\Sun\\AppServer\\bin\\
asadmin.bat stop-domain domain1\\"" start=auto 
DisplayName="SJESAS_PE8.1 DOMAIN1"</pre>
</td></table><br></li>
</ul>
<A NAME="abgbz"></A><h2>Cannot Find Log Files</h2>
<A NAME="indexterm-22"></A><A NAME="indexterm-23"></A><p>The following Application Server logs are useful for troubleshooting installation
problems:</p>
<ul><li><p><A NAME="indexterm-24"></A><b>Server log file</b> -- For troubleshooting
server configuration and deployment problems</p>
</li>
<li><p><A NAME="indexterm-25"></A><b>HTTP server access logs</b> -- For
troubleshooting HTTP server problems, and for tracing the activity of HTTP requests
entering the Application Server instances</p>
<p>Both the installation and uninstallation
programs create log files and log all installation and uninstallation events to these
files. The primary purpose of these log files is to provide troubleshooting information.</p>
<p>In addition to installation program messages and log files, operating
system utilities such as <tt>pkginfo</tt> and <tt>showrev</tt> on
Solaris and <tt>rpm</tt> on Linux can be used to gather system information.</p>
<p>Log file entries include information about the attempted action, the
outcome of the action, and, if applicable, the cause of failure. The log files contain
the following<A NAME="indexterm-26"></A>types of message entries:</p>
</li>
<li><p><b>INFO</b> -- These messages mark
normal completion of a particular installation tasks.</p>
</li>
<li><p><b>WARNING</b> -- These messages
mark non-critical failures. Warning messages generally contain information about the
cause and the nature of the failure, and also provide possible remedies.</p>
</li>
<li><p><b>ERROR</b> -- These messages mark
critical failures that cause installation or uninstallation status to be reported
as Failed. Error messages generally provide detailed information about the nature
and the cause of the problem that occurred.</p>
<p>The domain-specific <A NAME="indexterm-27"></A><A NAME="indexterm-28"></A>logs are located in <i>install_dir</i><tt>/domains/domain1/logs/</tt>. Log files for the server installation in general are located as follows:</p>
</li>
<li><p><b>Solaris, root user installation/uninstallation:</b></p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>/var/sadm/install/logs</pre>
</td></table><br></li>
<li><p><b>Solaris, non-root installation/uninstallation:</b></p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>/var/tmp</pre>
</td></table><br></li>
<li><p><b>Linux installation/uninstallation:</b></p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>/var/tmp</pre>
</td></table><br></li>
<li><p><b>Windows installation/uninstallation:</b></p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>%TEMP%</pre>
</td></table><br><p>Log file names are different for each product distribution, but are platform
independent:</p>
</li>
<li><p>Platform Edition, both SDK and Application Server distributions, main installation/uninstallation
log files:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>Install_Application_Server_8PE_<i>&lt;timestamp\></i>.log
Uninstall_Application_Server_8PE_<i>&lt;timestamp\></i>.log</pre>
</td></table><br></li>
<li><p>Platform Edition, Application Server only distribution, low-level installation/uninstallation
log files:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>Sun_Java_System_Application_Server_Platform_Edition_install.B<i>&lt;timestamp\></i>
Sun_Java_System_Application_Server_Platform_Edition_uninstall.B<i>&lt;timestamp\></i></pre>
</td></table><br></li>
<li><p>Platform Edition, SDK distribution, low-level installation/uninstallation
log files:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>Java_2_Platform__Enterprise_Edition_1.4_SDK_install.B<i>&lt;timestamp\></i>
Java_2_Platform__Enterprise_Edition_1.4_SDK_uninstall.B<i>&lt;timestamp\></i></pre>
</td></table><br></li>
<li><p>Enterprise Edition, main installation/uninstallation log files:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>Install_Application_Server_8EE_<i>&lt;timestamp\></i>.log
Uninstall_Application_Server_8EE_<i>&lt;timestamp\></i>.log</pre>
</td></table><br></li>
<li><p>Enterprise Edition, low-level installation/uninstallation log files:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>Sun_Java_System_Application_Server_Enterprise_Edition_
install.B<i>&lt;timestamp\></i>
Sun_Java_System_Application_Server_Enterprise_Edition_
uninstall.B<i>&lt;timestamp\></i></pre>
</td></table><br></li>
</ul>
<A NAME="abgca"></A><h2>Accessing Local Server Fails (<tt>http://localhost:8080</tt>)</h2>
<A NAME="indexterm-29"></A><A NAME="indexterm-30"></A><p>Things to check for this error include the following:</p>
<ul><li><p><A HREF="abgbj.html#abgcb">Did the Server Start?</A></p>
</li>
<li><p><A HREF="abgbj.html#abgcd">Was the Server Started at the Expected Port?</A></p>
</li>
</ul>
<A NAME="abgcb"></A><h3>Did the Server Start?</h3>
<A NAME="abgcc"></A><h4>Description</h4>
<p>If the console window is still open, the expected message is:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>Domain <i>domain</i> Started</pre>
</td></table><br><p>where <i>domain</i> is the name of the default domain. This
indicates that the default domain was started successfully.</p>
<p>If the console window is already closed, check for messages in the log file:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre><i>install_dir</i>/domains/domain1/logs/server.log</pre>
</td></table><br><p>If startup was successful, the expected message is similar to that on the console,
and appears at the end of the log file:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>[INFO][...][..][date&amp;time][Application server startup complete .]</pre>
</td></table><br><A NAME="abgcd"></A><h3>Was the Server Started at the Expected Port?</h3>
<A NAME="abgce"></A><h4>Description</h4>
<p>The server might be running at a different port number than expected, either
because it was intentionally installed there, or because another server was already
running on the default port when the server was installed.</p>
<A NAME="fxxov"></A><p><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To determine which port number the server is actually using</p>
<h5>Steps</h5><ol><li><p><b>Examine the server's configuration file:</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre><i>install_dir</i>/domains/domain1/config/domain.xml</pre>
</td></table><br></li>
<li><p><b>Find the <tt>http-listener</tt> element.</b></p></li>
<li><p><b>Inspect the value of the <tt>port</tt> attribute.</b></p><p>Be sure to enter the correct port number when invoking the server.</p>
<p><hr size="1" noshade><p><b>Note - </b>The <tt>server's</tt> default <A NAME="indexterm-31"></A><A NAME="indexterm-32"></A>port number is <tt>8080</tt>, however, there are a number of
ways in which the expected value can change:</p>
<ul><li><p>A different port number was specified during installation.</p>
</li>
<li><p>A previous installation exists.</p>
</li>
<li><p>If the specified port number is already taken by another application
when the server is started, the port number rolls forward to the next available number.
For example, if a server is already running on the default <tt>8080</tt> port,
the new Application Server instance uses port number <tt>8081</tt>. If two
servers are running, the port number rolls to <tt>8082</tt>, and so on.</p>
</li>
</ul>
<hr size="1" noshade></p></li>
</ol><A NAME="abgcf"></A><h2>Accessing Remote Server Fails</h2>
<A NAME="indexterm-33"></A><A NAME="indexterm-34"></A><p>When attempting to open the start page of the Application Server, the initial
screen does not appear.</p>
<p>Things to check include the following:</p>
<ul><li><p><A HREF="abgbj.html#abgcg">Is the Server Available Locally?</A></p>
</li>
<li><p><A HREF="abgbj.html#abgcj">Is the Proxy Setting Causing a Problem?</A></p>
</li>
</ul>
<A NAME="abgcg"></A><h3>Is the Server Available Locally?</h3>
<A NAME="abgch"></A><h4>Description</h4>
<p>If the server cannot be accessed from the web, but it is running locally, then
the server is actually running.</p>
<A NAME="abgci"></A><h4>Solution</h4>
<p>Verify that the server is running locally.</p>
<A NAME="fxxod"></A><p><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To verify that the server is running locally</p>
<h5>Steps</h5><ol><li><p><b>Log on to the machine where the server is running.</b></p></li>
<li><p><b>Go to the local web page. For example, if <tt>8080</tt> is the
default port, go to:</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre>http://localhost:8080/</pre>
</td></table><br><p>If the start page does appear, there is a problem with the web connection that
prevents accessing the server remotely. If the start page does not appear, see <A HREF="abgbj.html#abgcb">Did the Server Start?</A></p>
</li>
</ol><A NAME="abgcj"></A><h3>Is the Proxy Setting Causing a Problem?</h3>
<A NAME="abgck"></A><h4>Description</h4>
<p>The server should be accessible directly from the host on which it is running
(<tt>localhost</tt>); for example, using the default port, <tt>8080</tt>:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>http://localhost:8080/</pre>
</td></table><br><A NAME="abgcl"></A><h4>Solution</h4>
<p>A server instance running on <tt>localhost</tt> may not be accessible
if the server host machine is connected to the web through a proxy. To solve this
problem, do one of the following:</p>
<ul><li><p>Set the browser to bypass the proxy server when accessing <tt>localhost</tt>. Refer to the browser's help system for information on how to
do this.</p>
</li>
<li><p>Use the fully-qualified host name or IP address of your system; for
example:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>http://myhost.mydomain.com:8080/</pre>
</td></table><br></li>
</ul>
<p><hr size="1" noshade><p><b>Note - </b>To find the <A NAME="indexterm-35"></A>host name and <A NAME="indexterm-36"></A>domain for the <tt>localhost</tt> machine:</p>
<ul><li><p><b>On Microsoft Windows</b> -- On
the desktop, right-click My Computer and select Properties from the pop-up menu. A
System Properties dialog is displayed. Click Network Identification to see the computer
name.</p>
</li>
<li><p><b>On Solaris or Linux</b> -- Type <tt>hostname</tt> at the command prompt.</p>
</li>
</ul>
<hr size="1" noshade></p><A NAME="abgcm"></A><h2>Cannot Access the Administration Console</h2>
<A NAME="indexterm-37"></A><A NAME="indexterm-38"></A><p>The Administration Console provides an interface for administrative functions.
If the Administration Console is not accessible, it might be for one of several reasons.</p>
<ul><li><p><A HREF="abgbj.html#abgcn">Is the Application Server Running?</A></p>
</li>
<li><p><A HREF="abgbj.html#abgcq">Is the Administration Console Running on the Expected Port?</A></p>
</li>
<li><p><A HREF="abgbj.html#abgct">Is the Security Manager Disabled?</A></p>
</li>
</ul>
<A NAME="abgcn"></A><h3>Is the Application Server Running?</h3>
<A NAME="abgco"></A><h4>Description</h4>
<p>The server must be running before the Administration Console can be accessed.</p>
<A NAME="abgcp"></A><h4>Solution</h4>
<p>Review the information in <A HREF="abgbj.html#abgcb">Did the Server Start?</A> to
determine if the server is running.</p>
<A NAME="abgcq"></A><h3>Is the Administration Console Running on the Expected Port?</h3>
<A NAME="abgcr"></A><h4>Description</h4>
<p>The default port number for the EE and SE Administration Console is <tt>4849</tt>; for the PE Administration Console it is <tt>4848</tt>. Also
note that the URL for the EE and SE console requires secure HTTP (<tt>https://</tt><i>servername</i><tt>:4849</tt>.), whereas
the PE console uses standard HTTP (<tt>http://</tt><i>servername</i><tt>:4848</tt>). However, it could be running on a different
port number than expected, either because it was intentionally installed there, or
because that port was taken when the server was started.</p>
<A NAME="abgcs"></A><h4>Solution</h4>
<p>Refer to <A HREF="abgbj.html#abgcd">Was the Server Started at the Expected Port?</A> for guidelines on verifying the port on which the Administration Console
is running, and be sure to enter the correct port number and HTTP protocol when invoking
the Administration Console.</p>
<A NAME="abgct"></A><h3>Is the Security Manager Disabled?</h3>
<A NAME="abgcu"></A><h4>Description</h4>
<p>According to the<i> J2EE 1.4 Specification</i>, the Security
Manager is not optional; it must be enabled in the Application Server. Since there is no
configuration interface in the Application Server for disabling the Security Manager, it
can only be disabled by directly modifying the <tt>domain.xml</tt> configuration
file in such a way that the following line is removed:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;jvm-option\>-Djava.security.policy=yourPolicy&lt;/jvm-option\></pre>
</td></table><br><A NAME="abgcv"></A><h4>Solution</h4>
<p>The <tt>-Djava.security.policy=yourPolicy</tt> option must be present
in the <tt>domain.xml</tt> file to access the Administration Console.</p>
<A NAME="abgcw"></A><h2>Cannot Access a Server Application</h2>
<A NAME="indexterm-39"></A><A NAME="indexterm-40"></A><p>If a particular application cannot be accessed through the Application Server, some
things to check include the following:</p>
<ul><li><p><A HREF="abgbj.html#abgcx">Is the Application Server Running?</A></p>
</li>
<li><p><A HREF="abgbj.html#abgda">Was Application Deployment Successful?</A></p>
</li>
<li><p><A HREF="abgbj.html#abgdd">Invalid User or Password When Using <tt>Don&rsquo;t Prompt</tt> Option</A></p>
</li>
<li><p><A HREF="abgbj.html#abgdh">Administrator User Name or Password Not Known</A></p>
</li>
</ul>
<A NAME="abgcx"></A><h3>Is the Application Server Running?</h3>
<A NAME="abgcy"></A><h4>Description</h4>
<p>If the Application Server is not running, applications will not be accessible.</p>
<A NAME="abgcz"></A><h4>Solution</h4>
<p>Review the information in <A HREF="abgbj.html#abgcb">Did the Server Start?</A> to
determine if the server is running. The server must be running before a server application
can be accessed.</p>
<A NAME="abgda"></A><h3>Was Application Deployment Successful?</h3>
<A NAME="abgdb"></A><h4>Description</h4>
<p>An application must be successfully deployed before it can be accessed.</p>
<A NAME="abgdc"></A><h4>Solution</h4>
<p>Check the server's log file:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre><i>install_dir</i>/domains/domain1/server.log</pre>
</td></table><br><A NAME="abgdd"></A><h3>Invalid User or Password When Using <tt>Don't
Prompt</tt> Option</h3>
<A NAME="indexterm-41"></A><A NAME="indexterm-42"></A><A NAME="indexterm-43"></A><p>You are getting the error, <tt>Invalid user or password</tt>, but
you installed the system with the <tt>Don't Prompt</tt> option, so the password
should be supplied automatically.</p>
<A NAME="abgde"></A><h4>Description</h4>
<p>The correct password may not have been specified during installation, or it
may not be passed when the domain is started.</p>
<A NAME="fxxrj"></A><h4>Solution</h4>
<p>Check the password in the <tt>.asadminprefs</tt> file. On UNIX/Linux
systems, it is in the home directory for the user under which the server was installed.
On Windows, it is in <tt>C:\\Documents and Settings\\</tt><i>username</i>. The contents look something like this:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>AS_ADMIN_USER=admin
AS_ADMIN_PASSWORD=administrator</pre>
</td></table><br><A NAME="abgdh"></A><h3>Administrator User Name or Password Not Known</h3>
<A NAME="indexterm-44"></A><A NAME="indexterm-45"></A><A NAME="indexterm-46"></A><p>If you have forgotten the administrator user name, you can find it by inspecting
the <tt>.adminprefs</tt> file, as described in the section above, or by
inspecting the <i>install_dir</i><tt>/domains/domain1/config/keyfile</tt>, where <tt>domain1</tt> is the default domain. For a different
domain, substitute its name in the path.</p>
<p>If you have forgotten the administrator password, you will need to create a
new user name-password pair by removing the user name and password, creating new ones,
and restarting the server. (You will not be able to read the password, because it
is encrypted in the keyfile.)</p>
<A NAME="fxxoz"></A><h4><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To remove the user name and password completely</h4>
<h5>Steps</h5><ol><li><p><b>Stop the server, if it is currently running.</b></p></li>
<li><p><b>Change to the appropriate <tt>WEB-INF</tt> directory; for example:</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre><i>install_dir</i>/lib/install/applications/adminapp/adminapp_war/WEB-INF</pre>
</td></table><br></li>
<li><p><b>Comment out the entire <tt>&lt;security-constraint\></tt> element
in the <tt>web.xml</tt> file.</b></p><p>Do not delete the element, as
you will be reenabling it later. This action disables security for command-line operations.</p>
<p><hr size="1" noshade><p><b>Note - </b>The commands will still expect a value for <tt>--username</tt> (or <tt>-u</tt>) and <tt>--password</tt> (or <tt>-w</tt>). But these
can be dummy values, since the server side does not impose any security.</p>
<hr size="1" noshade></p></li>
<li><p><b>Start the server.</b></p><p>At this point, the server does not have
command-line security.</p>
</li>
<li><p><b>Run the following command:</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre>asadmin create-file-user --user &lt;dummy\> --password &lt;dummy\>
 --userpassword &lt;new_secret\> --groups asadmin &lt;new_user_id\></pre>
</td></table><br><p>This command creates the following new entry:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;install_dir\>/domains/domain1/config/keyfile</pre>
</td></table><br></li>
<li><p><b>Uncomment the <tt>&lt;security-constraint\></tt> element in <tt>web.xml</tt> file.</b></p></li>
<li><p><b>Restart the server for the new user name-password to take effect.</b></p><p><hr size="1" noshade><p><b>Note - </b>When the server is started, any remote command-line operations will need <tt>new_user_id</tt> and <tt>new_secret</tt> as user name and password.</p>
<hr size="1" noshade></p></li>
</ol><A NAME="abgdi"></A><h2>Server Will Not Start on Windows (Port Conflict)</h2>
<A NAME="indexterm-47"></A><A NAME="indexterm-48"></A><p>If a message similar to the following is displayed when starting the Application Server on
Microsoft Windows, a server port conflict has occurred:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>Address already in use</pre>
</td></table><br><p>This error occurs when another application is running on the Application Server
port (default <tt>8080</tt>), or because a previous instance of the Application Server did
not shut down cleanly.</p>
<p>Other things to check include the following:</p>
<ul><li><p><A HREF="abgbj.html#abgdj">Is Another Application Running on the Server's Port?</A></p>
</li>
<li><p><A HREF="abgbj.html#abgdk">Has an Ungraceful Shutdown Occurred on a Previously Running Server?</A></p>
</li>
</ul>
<A NAME="abgdj"></A><h3>Is Another Application Running on the Server's Port?</h3>
<p>If another application is using the server's port, stop the other application,
then restart the Application Server.</p>
<p><hr size="1" noshade><p><b>Note - </b>The installer attempts to avoid port conflicts by choosing the next available
port when the default port is in use--but that only works if application using
the default port was running when the Application Server was installed.</p>
<hr size="1" noshade></p><A NAME="abgdk"></A><h3>Has an Ungraceful Shutdown Occurred on a Previously Running
Server?</h3>
<p>Use the <tt>asadmin stop-domain</tt> command to stop the server, or
explicitly kill the Java process and then restart the Application Server.</p>
<A NAME="abgdl"></A><h2>Port Conflicts Debugging Multiple Instances on the Same Server</h2>
<A NAME="abgdm"></A><h3>Description</h3>
<p>Port conflict errors can occur when debugging multiple instances on the same
server that are part of the same cluster.</p>
<A NAME="fxxyx"></A><h3>Solution</h3>
<p>Modify the <tt>domain.xml</tt> file to remove the <tt>address</tt> attribute from the <tt>-Xrunjdwp</tt> option in the <tt>java-config</tt> element for the cluster. This results in the JVM choosing a
random debug port for the instance. The port number chosen for the instance is displayed
in the server log when it is started; for example:</p>
<ul><li><p><b>Before:</b></p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>debug-options="-Xdebug -Xrunjdwp:transport=dt_socket,server=y,
suspend=n,address=9009"</pre>
</td></table><br></li>
<li><p><b>After:</b></p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>debug-options="-Xdebug -Xrunjdwp:transport=dt_socket,server=y,
suspend=n"</pre>
</td></table><br></li>
</ul>
<A NAME="abgdr"></A><h2>Two Server Instances Bind to Same Port on Windows</h2>
<A NAME="abgds"></A><h3>Description</h3>
<p>This problem only occurs on Windows 2000/XP systems with the Application Server Enterprise Edition (not Platform Edition)
software, and is due to a known Windows security flaw rather than a problem with the Application Server itself.</p>
<p>The problem occurs when two or more instances of the Application Server are created
using the same port number for the <tt>instanceport</tt> option; for example:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>asadmin create-domain -adminport 5001 <i>&lt;options\></i> -instanceport 6001
 <i>&lt;domain\</i>
asadmin create-domain -adminport 5002 <i>&lt;options\></i> -instanceport 6001
 <i>&lt;domain\></i></pre>
</td></table><br><p>When the two domains are started on a UNIX/Linux system, a port conflict error
is thrown and the second instance fails to start. However, when the two domains are
started on Windows 2000/XP, no error is thrown, both server instances start, but only
the first instance is accessible at the specified port. When that first server instance
is subsequently shut down, the second instance then becomes accessible. Moreover,
when both instance are running, the Windows <tt>netstat</tt> command shows
the duplicate listeners as active, but only the first listener can respond to requests.</p>
<A NAME="fxxyd"></A><h3>Solution</h3>
<p>Be sure to use unique port numbers for all server instances on Windows systems.</p>
<A NAME="abgdu"></A><h2>Error: <tt>System cannot find the path specified</tt></h2>
<A NAME="fxxyn"></A><h3>Description</h3>
<p>This error message occurs when attempting to start the server after deleting
the J2SE directory that was specified during installation. This situation generally
occurs after being informed during the install that the J2SE platform needs an upgrade,
and the upgrade takes place after the Application Server installation.</p>
<A NAME="abgdv"></A><h3>Solution 1</h3>
<p>To use the new J2SE for all domains, change the <tt>AS_JAVA</tt> variable
in <tt>asenv.conf</tt> (Solaris/Linux), or <tt>asenv.bat</tt> (Windows).</p>
<A NAME="fxxyj"></A><h3>Solution 2</h3>
<p>The J2SE version can be changed on a per-domain basis by modifying the <tt>java-home</tt> attribute for the <tt>java-config</tt> element in the
domain's <tt>domain.xml</tt> file.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;java-config ...
java-home="<i>path</i>"
...\></pre>
</td></table><br><A NAME="fxxzd"></A><h3>Solution 3</h3>
<p>A more time-intensive solution is to uninstall and then reinstall the server.</p>
<A NAME="abgdy"></A><h2>Application Generates Error <tt>persistence.support.JDODataStoreException</tt></h2>
<A NAME="abgdz"></A><h3>Description</h3>
<p>A <tt>com.sun.jdo.api.persistence.support.JDODataStoreException</tt> is
generated by an application, with a nested <tt>java.sql.SQLException</tt> indicating
a duplicate primary key.</p>
<p>Even if the application is checking for a <tt>CreateException</tt>,
it does not see one. The Enterprise JavaBeans specification requires a <tt>CreateException</tt> to be thrown only if two beans with the same primary key are created in
the same transaction, so a <tt>CreateException</tt> is not thrown on transaction
rollback if two entity beans with duplicate primary keys are created.</p>
<A NAME="fxxyt"></A><h3>Solution</h3>
<p>If an application creates an entity bean with a duplicate primary key, check
to see if the primary key exists by calling <tt>findByPrimaryKey</tt> before
calling create.</p>
<A NAME="abgeb"></A><h2>Using <tt>asadmin set</tt> Command May Produce
Unexpected Results</h2>
<A NAME="abgec"></A><h3>Description</h3>
<p>Unexpected results are returned when setting variables in a command, such as:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>asadmin set name={$a-b}</pre>
</td></table><br><p>In this case, <tt>name</tt> is set to <tt>b</tt>, not <tt>{$a-b}</tt> because the shell syntax <tt>${a=b}</tt> is interpreted
as "if the variable <tt>a</tt> is unset, substitute the value <tt>b</tt>, otherwise substitute the value of <tt>a</tt>." This is
standard shell behavior. For example, consider the following:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>asadmin set default-config.http-service.http-listener.http-listener-1.port=
${http-listener-1-port}</pre>
</td></table><br><p>In this case, <tt>default-config.http-service.http-listener.http-listener-1.port</tt> is set to <tt>listener-1-port</tt>, which is invalid.</p>
<A NAME="abgee"></A><h2>Cannot Undeploy Or Redeploy Application With Open Streams
to Jar Files (Windows Only)</h2>
<A NAME="abgef"></A><h3>Description</h3>
<p>On Windows systems, after running an application, subsequent attempts to undeploy
it or redeploy it throw exceptions about the server being unable to delete a file
or rename a directory.</p>
<p>On Windows systems, an application may use <tt>getClass().getResource</tt> or <tt>getResourceAsStream</tt> methods to locate a resource inside the application,
particularly in <tt>jar</tt> files that are in the application or accessible
to it. If the streams remain open, subsequent attempts to redeploy or undeploy the
application can fail. In addition, the Java runtime by default caches streams to <tt>jar</tt> files for performance reasons.</p>
<A NAME="fxxyr"></A><h3>Solution</h3>
<p>Be sure to close streams opened by your applications. Also, if an application
needs to be redeployed or undeployed repeatedly, and also needs to obtain a resource
from a <tt>jar</tt> file using <tt>getResource</tt> or <tt>getResourceAsStream</tt>, consider using <tt>getClass().getResource</tt> which
returns a URL object, then invoke the <tt>url.setUseCaches</tt> method to
turn off caching for that <tt>jar</tt> file, and then use <tt>url.getInputStream()</tt> to obtain the stream.</p>
<p>Although turning off caching for accesses to the <tt>jar</tt> file
can slow down performance, this approach does allow the application to be undeployed
or redeployed. Note also that if the <tt>getClass().getResourceAsStream</tt> method
is used instead, then the <tt>jar</tt> file in which the resource is located
will be cached (this is the default Java runtime setting) and remain open until the
server is stopped.</p>
<A NAME="abgeh"></A><h2>Cannot Reinstall Application Server After Manual Deletion of Directories</h2>
<A NAME="abgei"></A><h3>Description</h3>
<p>If the Application Server directories are deleted manually rather than by means of
the included <tt>uninstall</tt> the program, subsequent attempts to reinstall
the Application Server in the same directory fail. This is because the installation directory
information stored in <tt>/tmp/productregistry</tt> file remains even though
the program directories have been removed.</p>
<A NAME="fxxyu"></A><h3>Solution 1</h3>
<p>Remove Application Server directory information from the <tt>&lt;location\></tt> property entries in the <tt>/tmp/productregistry</tt> file; for
example, change:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;location\>/opt/SUNWappserver/jdk&lt;/location\></pre>
</td></table><br><p>to</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;location\>&lt;/location\></pre>
</td></table><br><A NAME="fxxyg"></A><h3>Solution 2</h3>
<p>Reinstall the Application Server in a different directory.</p>
<A NAME="abgel"></A><h2>Cannot Produce a JVM Thread Dump After Server Crash</h2>
<A NAME="abgem"></A><h3>Description</h3>
<p>If the Application Server crashes, the server dumps a core file and, by default,
restarts with the <tt>-Xrs</tt> flag, which prevents the dump of a JVM thread
dump.</p>
<A NAME="fxxyw"></A><h3>Solution</h3>
<A NAME="fxxpa"></A><h4><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To enable a JVM thread dump</h4>
<h5>Steps</h5><ol><li><p><b>Comment out the <tt>-Xrs</tt> flag in the <tt>server.xml</tt> file for the Application Server.</b></p></li>
<li><p><b>Kill the server process (<tt>kill -3</tt> on UNIX; Ctrl+Break
on Windows).</b></p></li>
</ol>
            <!--stopindex-->
<br>
<A HREF="abgap.html">Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="abgjs.html">Next</A>
</body>
</html>

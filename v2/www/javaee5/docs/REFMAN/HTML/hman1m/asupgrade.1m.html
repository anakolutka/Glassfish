<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- $Id: //release/solbook/online/man2html/man2html2r2/templates/magellan_template.html#1 $ -->
<html>
<head>
<META HTTP-EQUIV="Content-Type" content="text/html"; charset="iso-8879-1">
<title>Sun Java System Application Server Platform Edition 9.0 2006Q1 Reference Manual</title>

</head>
<!--stopindex-->
<body>

<a name="TOC"></a>


<p></p>
<!-- END TOC TITLE ONE LINE -->

<div style="text-align:center">
<a href="../index.html#a-place"><font color="#000000"><B>A</B></font></a> &nbsp;<font color="#aaaaff">B</font> &nbsp;<a href="../index.html#c-place"><font color="#000000"><B>C</B></font></a> &nbsp;<a href="../index.html#d-place"><font color="#000000"><B>D</B></font></a> &nbsp;<font color="#aaaaff">E</font> &nbsp;<font color="#aaaaff">F</font> &nbsp;<font color="#aaaaff">G</font> &nbsp;<font color="#aaaaff">H</font> &nbsp;<font color="#aaaaff">I</font> &nbsp;<a href="../index.html#j-place"><font color="#000000"><B>J</B></font></a> &nbsp;<font color="#aaaaff">K</font> &nbsp;<font color="#aaaaff">L</font> &nbsp;<font color="#aaaaff">M</font> &nbsp;<font color="#aaaaff">N</font> &nbsp;<font color="#aaaaff">O</font> &nbsp;<a href="../index.html#p-place"><font color="#000000"><B>P</B></font></a> &nbsp;<font color="#aaaaff">Q</font> &nbsp;<font color="#aaaaff">R</font> &nbsp;<a href="../index.html#s-place"><font color="#000000"><B>S</B></font></a> &nbsp;<font color="#aaaaff">T</font> &nbsp;<font color="#aaaaff">U</font> &nbsp;<a href="../index.html#v-place"><font color="#000000"><B>V</B></font></a> &nbsp;<a href="../index.html#w-place"><font color="#000000"><B>W</B></font></a> &nbsp;<a href="../index.html#x-place"><font color="#000000"><B>X</B></font></a> &nbsp;<font color="#aaaaff">Y</font> &nbsp;<font color="#aaaaff">Z</font> &nbsp;</div>


<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr valign="top">
<td><img src="../graphics/a.gif" width="10" height="1" border="0" alt="" /></td>
<td>
<!--ADD GIFS HERE-->

</td>
<td width="2%">&nbsp;</td>
<td width="99%">

<!-- BEGIN DOC LIST -->
<table border=0 cellpadding=2 cellspacing=0 width="100%">

<!-- $Change: 9523 $ -->
<Table border="0" width="99%">
<tr>
<td width="50%" align="left"><font class="header">User Commands</font></td><td width="20%" align="right"><font class="header">asupgrade(1M)</font></td>
</tr>
</Table>

<ul type="disc">
<li class="m2hcolor">NAME</li>
<li class="m2hcolor">SYNOPSIS</li>
<li>
<a href="#428414940">DESCRIPTION</a>
</li>
<li>
<a href="#-531492226">OPTIONS</a>
</li>
<li>
<a href="#-1574761399">EXAMPLES</a>
</li>
<li>
<a href="#-1485726412">EXIT STATUS</a>
</li>
<li>
<a href="#1739557780">SEE ALSO</a>
</li>
</ul>

<h2 class="m2hcolor">NAME</h2>
<Blockquote style="margin-left: 2%">&nbsp;asupgrade  - migrates
the configuration of a previously installed Sun Java System Application Server</Blockquote>
<h2 class="m2hcolor">SYNOPSIS</h2>
<blockquote style="margin-left: 2%">&nbsp;<tt>asupgrade</tt> [console ]  [version ]  [help ]  [source <i>applicationserver_7.x/8.x_installation</i>]  [target <i>applicationserver_8.1_installation</i>]  adminuser <i>admin_user</i> [adminpassword <i>admin_password</i>]  [masterpassword <i>changeit</i>]  [passwordfile <i>path_to_password_file</i>]  [domain <i>domain_name</i>]  [nsspwdfile <i> NSS_password_filepath</i>]  [targetnsspwdfile <i> target_NSS_password_filepath</i>]  [jkspwdfile <i> JKS_password_filepath</i>]  [capwdfile <i> CA_password_filepath</i>]  [clinstancefile <i> file1</i> [<i>, file2, file3, ... filen</i>] ] <br>
</blockquote>
<h2>
<a class="m2hcolor" name="428414940" href="#TOC">DESCRIPTION</a>
</h2>
<Blockquote style="margin-left: 2%">
<p>Use the <tt>asupgrade</tt> utility to migrate the server configuration
and its persisted state, J2EE services, and deployed J2EE applications. The
configuration of an installed Sun Java System Application Server 7.x/8.x installation
is migrated to the Sun Java System Application Server 9 installation. If the
domain contains information about a deployed application and the installed
application components do not agree with the configuration information, the
configuration is migrated as is without any attempt to reconfigure the incorrect
configurations.</p>
<p>
<tt>asupgrade</tt> migrates the configuration and deployed
applications of a previous version of the Application Server; however, the
runtime binaries of the server are not updated. Database migrations or conversions
are also beyond the scope of the <tt>asupgrade</tt> command.</p>
<p>Only those instances that do not use Sun Java System Web Server-specific
features will be upgraded seamlessly. Configuration files related to HTTP
path, CGI bin, SHTML, and NSAPI plugins will not be upgraded.</p>
<p>The upgrade process can also be initiated automatically at installation
time using the Upgrade checkbox in the Application Server installer. After
completion of the upgrade, use the uninstaller to remove the previous version
of the application server.</p>
<p>Application archives (EAR files) and component archives (JAR, WAR, and
RAR files) that are deployed in the Application Server 7.x/8.x environment
do not require any modification to run on Application Server 9. Applications
and components that are deployed in the source server are deployed on the
target server during the upgrade. Applications that do not deploy successfully
on the target server must be migrated using the Migration Tool or <tt>asmigrate</tt> command, then redeployed manually.</p>
<p>Specify the source and target directories for the upgrade. </p>
<p> If the upgrade includes certificates, provide the passwords for the
source PKCS12 file and the target JKS keyfile for each domain that contains
certificates to be migrated. Since Application Server 7 uses a different certificate
store format (NSS) than Application Server 9 PE (JSSE), the migration keys
and certificates are converted to the new format. Only one certificate database
password per domain is supported. If multiple certificate database passwords
are used in a single domain, all of the passwords must be made the same before
starting the upgrade. The passwords can be reset after the upgrade has been
completed. </p>
<p>If the upgrade includes clusters, specify one or more cluster files.
Upon successful upgrade, an upgrade report is generated listing successfully
migrated items along with a list of the items that could not be migrated.</p>
<p>If you issue the <tt>asupgrade</tt> command with no options,
the Upgrade Tool GUI will be displayed. If the <tt>asupgrade</tt>
command is used in command-line mode and all of the required information is
not supplied, an interviewer will request information for any required options
that were omitted.</p>
</Blockquote>
<h2>
<a class="m2hcolor" name="-531492226" href="#TOC">OPTIONS</a>
</h2>
<Blockquote style="margin-left: 2%">
<dl compact="">
<dt>c console</dt>
<dd>
<p>Launches the upgrade command line utility.</p>
</dd>
<dt>V version</dt>
<dd>
<p>The version of the Upgrade Tool.</p>
</dd>
<dt>h help</dt>
<dd>
<p>Displays the arguments for launching the UpgradeTool.</p>
</dd>
<dt>s source</dt>
<dd>
<p>The installation directory for Sun Java System
Application Server 7.x/8.x installation that will be upgraded.</p>
</dd>
<dt>t target</dt>
<dd>
<p>The installation directory for Sun Java System
Application Server 9.</p>
</dd>
<dt>a adminuser</dt>
<dd>
<p>The username of the administrator.</p>
</dd>
<dt>w adminpassword</dt>
<dd>
<p>The password for the adminuser. Although this
option can be used, the recommended way to transmit passwords is by using
the passwordfile option.</p>
</dd>
<dt>m masterpassword</dt>
<dd>
<p>The master password that is created during
installation. The default value is changeit. Although this option can be used,
the recommended way to transmit passwords is by using the passwordfile option.</p>
</dd>
<dt>f passwordfile</dt>
<dd>
<p>The path to the file that contains the adminpassword
and masterpassword. Content of this file should be in the following format: AS_ADMIN_ADMINPASSWORD=<em>adminpassword</em> AS_ADMIN_MASTERPASSWORD=<em>masterpassword</em>
</p>
</dd>
<dt>d domain</dt>
<dd>
<p>The  domain name for the migrated certificates.</p>
</dd>
<dt>n nsspwdfile</dt>
<dd>
<p>The path to the NSS password file.</p>
</dd>
<dt>e targetnsspwdfile</dt>
<dd>
<p>The path to the target NSS password file.</p>
</dd>
<dt>j jkspwdfile</dt>
<dd>
<p>The path to the JKS password file.</p>
</dd>
<dt>p capwdfile</dt>
<dd>
<p>The path to the CA certificate password file.</p>
</dd>
<dt>i clinstancefile</dt>
<dd>
<p>The path to the cluster file. The default
filename is <tt>$AS_INSTALL/conf/clinstance.conf</tt> .</p>
</dd>
</dl>
</Blockquote>
<h2>
<a class="m2hcolor" name="-1574761399" href="#TOC">EXAMPLES</a>
</h2>
<Blockquote style="margin-left: 2%">Example  1. Upgrading an Application Server 7 Installation to Application Server
9 with Prompts for Certificate Migration<Blockquote style="margin-left: 2%">
<p>This example shows how to upgrade a Sun Java System Application Server
7 installation to Sun Java System Application Server 9. You will be prompted
to migrate certificates. If you reply no, then no certificates will be migrated.</p>
<Blockquote style="margin-left: 2%">
<pre>example% <tt>asupgrade --adminuser admin --passwordfile password.txt 
--source /home/sunas7 --target /home/sjsas9</tt>
</pre>
</Blockquote>
</Blockquote>Example  2. Upgrading an Application Server 7.1 EE Installation with Clusters and
NSS Certificates to Application Server 9 EE<Blockquote style="margin-left: 2%">
<p>This example shows how to upgrade a Sun Java System Application Server
7.1 EE installation with a cluster to Sun Java System Application Server 9
EE. NSS certificates will be migrated, as will the <tt>clinstance.conf</tt> cluster file.</p>
<Blockquote style="margin-left: 2%">
<pre>example% <tt>asupgrade --adminuser admin 
--passwordfile password.txt 
--source /home/sjsas7.1 --target /home/sjsas9 
--domain domain1 --nsspwdfile /home/sjsas7.1/nsspassword.txt 
--targetnsspwdfile /home/sjsas9/nsspassword.txt
--clinstancefile /home/sjsas7.1/config/clinstance.conf</tt>
</pre>
</Blockquote>
<p>After the upgrade, node agents for all remote instances must be created
and started on their respective host systems.</p>
</Blockquote>Example  3. Upgrading an Application Server 7.0 PE Installation with NSS Certificates
to Application Server 9 PE<Blockquote style="margin-left: 2%">
<p>This example shows how to upgrade a Sun Java System Application Server
7.0 PE installation to Sun Java System Application Server 9 PE. The NSS certificates
from the 7.0 PE source server will be converted to JKS and CA certificates
in the 9 PE target server.</p>
<Blockquote style="margin-left: 2%">
<pre>example% <tt>asupgrade --adminuser admin 
--passwordfile password.txt 
--source /home/sjsas7.0 --target /home/sjsas9 
--domain domain1 --nsspwdfile /home/sjsas7.0/nsspassword.txt 
--jkspwdfile /home/sjsas7.0/jkspassword.txt 
--capwdfile /home/sjsas7.0/capassword.txt </tt>
</pre>
</Blockquote>
</Blockquote>Example  4. Upgrading an Application Server 8.0 PE Installation with JKS and CA
Certificates to Application Server 9 PE<Blockquote style="margin-left: 2%">
<p>This example shows how to upgrade a Sun Java System Application Server
8.0 PE installation to Sun Java System Application Server 9 PE. JKS and CA
certificates will be migrated.</p>
<Blockquote style="margin-left: 2%">
<pre>example% <tt>asupgrade --adminuser admin 
--passwordfile password.txt 
--source /home/sjsas8.0 --target /home/sjsas9 
--domain domain1 --jkspwdfile /home/sjsas8.0/jkspassword.txt 
--capwdfile /home/sjsas9/capassword.txt</tt>
</pre>
</Blockquote>
</Blockquote>
</Blockquote>
<h2>
<a class="m2hcolor" name="-1485726412" href="#TOC">EXIT STATUS</a>
</h2>
<Blockquote style="margin-left: 2%">
<dl compact="">
<dt>0</dt>
<dd>
<p>command executed successfully</p>
</dd>
<dt>1</dt>
<dd>
<p>error in executing the command</p>
</dd>
</dl>
</Blockquote>
<h2>
<a class="m2hcolor" name="1739557780" href="#TOC">SEE ALSO</a>
</h2>
<Blockquote style="margin-left: 2%">
<p>
<a class="m2hlink" href="../hman1m/asmigrate.1m.html"><tt>asmigrate</tt>(1M)</a> </p>
</Blockquote>





</table>




<!-- END GLOBAL FOOTER -->
</body>
</html>


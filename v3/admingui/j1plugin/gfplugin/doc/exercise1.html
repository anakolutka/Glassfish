<html>
    <head>
	<!-- Change this to change the name of this tab -->
        <meta name="j1holtabname" content="Exercise 1">
    </head>
    <body>
        <div class="j1holcontents">
            
            <h1>Exercise 1: Plugging into GlassFish</h1>
            
            <div class="j1holduration xbig">Expected duration: 45 minutes</div>
            
            <p class="j1holheader">Introduction:</p>
            
<p>
  The goal of this exercise is to develop a GlassFish plugin module.&nbsp; You
  will be adding a page and tree node to the GlassFish Administration
  Console.&nbsp;&nbsp; We've already pre-configured your build environment
  leaving you with more time to to get "hands-on" with the code.&nbsp; In this
  exercise, you will do the following:
</p>
<ul class="j1hollist">
  <li>
    Build a plugin using the Maven plugin in NetBeans 6.0 (or command line)<br>
  </li>
  <li>
    Integrate a module into GlassFish V3 which extends the Admin Console<br>
  </li>
  <li>
    Access the GlassFish v3 Administration Console and see your plugin
  </li>
</ul>

<p class=j1holheader>
    <p class="j1holheader">Background information:</p>
</p>
            
<p>
  This section provides more detail about the GlassFish V3 build environment and
  architecture.&nbsp; This information is non-essential for completing this lab,
  however, it will give you better insight into the design of GlassFish
  V3.&nbsp; <span class="j1holnote">To proceed with the lab, conintue to the "<a href="#ex1steps">Step-by-Step Instructions</a>"
  section.</span><br>
</p>
            
<a name="hk2background">
<p class="j1holsubheader">GlassFish (HK2) Modules</p>
</a>

<p>
  GlassFish uses the HK2 project (https://hk2.dev.java.net) to provide "modules"
  which can be plugged together to build an application server with unique
  capabilities.&nbsp; These GlassFish (or HK2) modules need only be placed in
  the &lt;install-root&gt;/modules directory to be found by the
  environment.&nbsp; The modules describe themselves to GlassFish so that
  GlassFish knows how to interact with them.&nbsp; This is done by using the HK2
  @Contract and @Service annotations.
</p>
<p>
  The @Contract annotation is typically placed on a Java Interface.&nbsp; Doing
  this makes the interface known to HK2.&nbsp; Here is an example Java Interface
  annotated with the @Contract annotation:
</p>
<div class="codebox"><pre>
@Contract
public interface ConsoleProvider {
    /**
     *  &lt;p&gt; Returns a &lt;code&gt;URL&lt;/code&gt; to the &lt;code&gt;console-config.xml&lt;/code&gt;
     *      file, or &lt;code&gt;null&lt;/code&gt;.  If &lt;code&gt;null&lt;/code&gt; is returned, the
     *      default (@{link #DEFAULT_CONFIG_FILENAME}) will be used.&lt;/p&gt;
     */
    public URL getConfiguration();

    /**
     *  &lt;p&gt; The default location of the &lt;code&gt;console-config.xml&lt;/code&gt;.&lt;/p&gt;
     */
     public String DEFAULT_CONFIG_FILENAME   =
	     "META-INF/admingui/console-config.xml";
}
</pre></div>

<p>
  The @Service annotation is placed on a Java Class which typically implements a
  Java Interface which is annotated by the @Contract annotation.&nbsp; When
  @Service annotations are processed by the Annotation Processor Tool at
  compile-time, the HK2 processor creates an entry in the
  META-INF/inhabitants/default file, such as:
</p>

<div class="codebox"><pre>
  class=org.example.glassfish.admingui.JavaOnePlugin,index=org.glassfish.api.admingui.ConsoleProvider</pre></div>

<p> This is used to efficiently locate all implementations of a @Contract in the system.</p>

<p>
  Lets consider an example of how this is used.&nbsp; The GlassFish
  Administration Console needs to find GlassFish Modules that wish to integrate
  content.&nbsp; To do this, each of these GlassFish Modules must provide an
  implementation of the ConsoleProvider "@Contract" Interface which is annotated
  with the @Service annotation.&nbsp; The GlassFish Admin Console is then able
  to easily find these implementations and access the configuration file they
  specify via their interface (see fig TBD).&nbsp; Once the configuration
  information is obtained, the task of integrating the new content is easily
  performed.
</p>

<p> You can find more information about this architecture at the GlassFish or HK2 web sites: </p>

    <ul class="j1hollist">
	<li><a href="https://glassfish.dev.java.net">https://glassfish.dev.java.net</a></li>
	<li><a href="https://hk2.dev.java.net">https://hk2.dev.java.net"</a></li>
    </ul>

<p>
The exercises in this lab aim to describe in detail the specific steps required
to create a module and to integrate with the GlassFish Administrative Console.
Complete this lab to gain a better understanding of these steps.
</p>

<p class=j1holsubheader>Source code system layout</p>

<p>
  This section of the document describes the file layout found in the lab
  exercises, as well as the layout of all GlassFish Modules.&nbsp; A snapshot of
  the GlassFish V3 source code can be found under the
  <code>gfplugin/glassfish-src</code>
  directory.&nbsp; This is for your reference only and is <span class="j1holnote">NOT</span> needed for
  any exercises in this lab.&nbsp; To obtain the latest GlassFish source code,
  you can follow the instructions found on the GlassFish v3 build instructions
  web site:
  <a href="http://wiki.glassfish.java.net/Wiki.jsp?page=V3FullBuildInstructions">http://wiki.glassfish.java.net/Wiki.jsp?page=V3FullBuildInstructions</a>.
</p>

<p>
  When viewing the top-level directory of the GlassFish source, you should note
  all the sub-directories are Maven Modules, which follow a standard maven 2
  project layout.&nbsp; The java source files are under
  &lt;maven-module&gt;/src/main/java.&nbsp; Additional resources are under
  &lt;maven-module&gt;/src/main/resources.&nbsp; Unit tests are under
  &lt;maven-module&gt;/src/test/java.&nbsp; There is a pom.xml file for each
  maven module that specifies information such as: parent Maven Module, groupId,
  artifactId, version number, build dependencies, and build and packaging
  instructions.&nbsp; Configuration information from a parent Maven Module is
  inherited.
</p>

<p>
  The source code for the GlassFish Administration Console is located in the
  directory named "admingui".&nbsp; This lab does not touch any of the files in
  the GlassFish Administration Console, it instead provides a plugin which is
  integrated seamlessly with the GlassFish Administrative Console.&nbsp; If you
  want to know more details about the GlassFish Administration Console, below is
  an explanation of all the admingui sub-modules.&nbsp; The specifics of the
  Adminstration Console itself are, however, outside the scope of this
  lab.&nbsp; You may become involved the the GlassFish Administration Console
  team or find out more information by going to https://glassfish.dev.java.net
  or emailing admin@glassfish.dev.java.net.
</p>

<p> <b>Plugin Service Module</b></p>

<p>
  This module detects all GlassFish Modules that provide IntegrationPoints
  to the console.&nbsp; It also contains code to discover and serve all
  additional resources provided by other plugin modules (JSFTemplating
  JavaServer Faces Pages, Images, Java code, etc.).
</p>
</p>
<div class="codebox"><pre>
v3/admingui/plugin-service/pom.xml
v3/admingui/plugin-service/src/main/java/org/glassfish/admingui/plugin/ConsoleClassLoader.java
v3/admingui/plugin-service/src/main/java/org/glassfish/admingui/plugin/ConsoleConfig.java
v3/admingui/plugin-service/src/main/java/org/glassfish/admingui/plugin/ConsolePluginService.java
v3/admingui/plugin-service/src/main/java/org/glassfish/admingui/plugin/IntegrationPoint.java</pre>
</div>

<b>Core Module for Admin Console</b>

<p>
This is the module that provides the infrastructure for the GlassFish
Administration Console.&nbsp; It contains code for initialization, setting up
the home page, building the navigation tree, common utilities, etc.&nbsp; It
also contains the JavaServer Faces pages such as the common task page, header,
version window, top-level tree node's corresponding pages, etc.</p>

<div class="codebox"><pre>
v3/admingui/pom.xml
v3/admingui/core/src/main/java/com/sun/enterprise/tools/admingui/handlers
v3/admingui/core/src/main/resources/home.jsf</pre>
</div>

  <b> Admin Console Web Application </b>

<p>
  This is the war packaging module which contains the deployment descriptor and
  includes the <code>console-core-1.2-SNAPSHOT.jar</code> which is built from the core
  module.&nbsp; After the build cycle, a war file is created ready for
  deployment.
</p>

<br>
<p class=j1holheader style="BACKGROUND-COLOR:#f3f3f3; MARGIN-LEFT:40px">
</p>
<pre style="BACKGROUND-COLOR:#f3f3f3; MARGIN-LEFT:40px">v3/admingui/war/src/main/webapp/WEB-INF/web.xml<br><br></pre>


<a name="ex1steps">
    <p class="j1holheader">Step-by-Step Instructions:</p>
</a>

    <p class="j1holsubheader">Overview:</p>

<p> In this excercise, you will complete the following:</p>

    <ol class="j1hollist" style="list-style-type: upper-alpha;">
	<li><b><a href="#ex1stepA">Implement the ConsoleProvider @Contract</a></b>
	    <p>
In this step, you will create a Java Class which implements the
<code>ConsoleProvider @Contract</code>.  This is done so your plugin can be
discovered by the GlassFish v3 Administration Console.&nbsp; Implementing the
<code>ConsoleProvider</code> interface is simply a matter of annotating your
class with the <code>@Service</code> annotation and implementing 1 method.
	    </p></li>
	<li><b><a href="#ex1stepB">Provide a console-config.xml file</a></b>
	    <p>
This file is necessary to declare your "IntegrationPoints."&nbsp; In this
step, you'll learn what an IntegrationPoint is and how to declare them.<br>
	    </p></li>
	<li><b><a href="#ex1stepC">Create a couple JavaServer Faces pages</a></b>
	    <p>
JavaServer Faces pages are needed to produce the content you are
providing.&nbsp; You will create 2 very simple JSFTemplating JavaServer
Faces pages.
	    </p></li>
	<li><b><a href="#ex1stepD">Install your first GlassFish v3 plugin</a></b>
	    <p>
In this step you will install and test your plugin.
	    </p></li>
    </ol>

<br>
<p class="j1holsubheader">Steps:</p>

<a name="ex1stepA">
<b>A. Implement the ConsoleProvider @Contract</b>
</a>
<p>
In this step, you will create a Java Class which implements the
<code>ConsoleProvider @Contract</code>.  This is done so your plugin can be
discovered by the GlassFish v3 Administration Console.&nbsp; Implementing the
<code>ConsoleProvider</code> interface is simply a matter of annotating your
class with the <code>@Service</code> annotation and implementing 1 method.
</p>
<p>
For more background information, please the <a href="#hk2background">GlassFish
(HK2) Modules</a> section above.  Or the
<a href="https://hk2.dev.java.net/components.html">HK2 Component Model web
page</a>.
</p>
<ol class="j1hollist">  <!-- Start Step 1 Ordered List -->
  <li><b>Open the plugin module in NetBeans</b> (<a href="#ex1stepA2">Skip to step A-2</a> if you are not using NetBeans.)
    <ol class="j1hollist">
	<li>Launch NetBeans IDE 6.0.</li>
	<li>Open plugin module.
	    <ol class="j1hollist">
		<li>Choose <code>Open Project</code> from the <code>File</code> menu.</li>
		<li>Browse to <code>&lt;gfplugin&gt;</code> and select <code>myplugin</code>.</li>
		<li>Press the <code>Open Project</code> button.
		<p>&nbsp;</p>
		<p><img src="images/ex1-1-openproject.jpg" /></p>
		Figure:&nbsp; Ex1-1&nbsp; Open Project myplugin
		</li>
	    </ol>
	    <p>&nbsp;</p>
	    </li>

  <li>You should see the following directory layout under the Projects tab:
    <p>&nbsp;</p>
    <p><img src="images/ex1-2-project-layout.jpg"></p>
    Figure:&nbsp; Ex1-2&nbsp;&nbsp;&nbsp; Project <code>myplugin</code> layout

<br>

<a name="ex1stepA2">
        1-D&nbsp; Add Java Class<br>
        <div id=aaga style="PADDING:1em 0pt; TEXT-ALIGN:left">
          <div style=MARGIN-LEFT:40px>
            7.&nbsp;&nbsp; Next we are going to finish the implementation of
            this plugin module.&nbsp; All we need now is a&nbsp; Java Class that
            is a Service and implements the ConsoleProvider.&nbsp;&nbsp;
            ConsoleProvider is an interface that requires the method
            getConfiguration that returns the URL to the config-console.xml
            file.&nbsp; If this method returns null, the plugin framework will
            look for a default configuration file
            META-INF/admingui/console-config.java.<br>
            <br>
            For your information,&nbsp; ConsoleProvider.java resides under
            glassfish-src/v3/common/glassfish-api/src/main/java/org/glassfish/api/admingui.<br>
            (TBD: is the above sentence necessary ?)<br>
            <div id=ne15 style="PADDING:1em 0pt; TEXT-ALIGN:left">
              Follow these steps in NetBeans:<br>
              <ol class="j1hollist">
                <li>
                  Locate&nbsp; the directory 'org.example.glassfish.admingui'
                  under&nbsp; 'Source Packages'.<br>
                </li>
                <li>
                  Right click on it and select&nbsp; 'New' and 'Java
                  Class".&nbsp; A pop up window will display.<br>
                </li>
                <li>
                  Enter the class name 'JavaOnePlugin' &nbsp; (Note:&nbsp; do
                  not enter the .java extension)
                </li>
                <li>
                  Select Finish
                </li>
              </ol>
              <div style=MARGIN-LEFT:40px>
                <div id=nab5 style="PADDING:1em 0pt; TEXT-ALIGN:left">
                  <img src="images/ex1-9-createJava.jpg">
                </div>
                Figure: Ex1-9 Create JavaOnePlugin.java<br>
                <br>
                7.&nbsp;&nbsp;&nbsp; Now open this newly created Java File and
                add the necessary implementation for the plugin.&nbsp;&nbsp;
                (Note: the full path of this file is
                '&lt;gfplugin&gt;/myplugin/src/main/java/org/example/glassfish/admingui/JavaOnePlugin.java')<br>
                <br>
                Here are some hints for the implementation. (TBD: when changing
                to the lab template, they have a special DIV for hints, may want
                to use that)<br>
              </div>
              <ol class="j1hollist">
                <li>
                  Add @Service Annotation
                </li>
                <li>
                  Implements ConsoleProvider
                </li>
                <li>
                  A Public method getConfiguration() that returns a
                  URL.&nbsp;&nbsp; If this returns Null, the system will get the
                  configuration from a default location.
                </li>
              </ol>
              <div style=MARGIN-LEFT:40px>
                <br>
                <span style=BACKGROUND-COLOR:#ffffff>Or you can copy and paste
                the following code to your file:&nbsp; </span>
              </div>
              <br style=BACKGROUND-COLOR:#cccccc>
              <div style="MARGIN-LEFT:40px; BACKGROUND-COLOR:#cccccc">
                <span style=BACKGROUND-COLOR:#cccccc><br>
                package
                org.example.glassfish.admingui;</span><br style=BACKGROUND-COLOR:#cccccc>
                <span style=BACKGROUND-COLOR:#cccccc>import
                org.glassfish.api.admingui.ConsoleProvider;</span><br style=BACKGROUND-COLOR:#cccccc>
                <span style=BACKGROUND-COLOR:#cccccc>import
                org.jvnet.hk2.annotations.Service;</span><br style=BACKGROUND-COLOR:#cccccc>
                <span style=BACKGROUND-COLOR:#cccccc>import
                java.net.URL;</span><br style=BACKGROUND-COLOR:#cccccc>
                <br style=BACKGROUND-COLOR:#cccccc>
                <span style=BACKGROUND-COLOR:#cccccc>/**</span><br style=BACKGROUND-COLOR:#cccccc>
                <span style=BACKGROUND-COLOR:#cccccc>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                &lt;p&gt; Returns the URL of the Integration Point configuration
                file console-config.xml
                &lt;/p&gt;</span><br style=BACKGROUND-COLOR:#cccccc>
                <span style=BACKGROUND-COLOR:#cccccc>&nbsp;*</span><br style=BACKGROUND-COLOR:#cccccc>
                <span style=BACKGROUND-COLOR:#cccccc>&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                @return URL of configration file.&nbsp;
                </span><br style=BACKGROUND-COLOR:#cccccc>
                <span style=BACKGROUND-COLOR:#cccccc>&nbsp;*/</span><br style=BACKGROUND-COLOR:#cccccc>
                <span style=BACKGROUND-COLOR:#cccccc>@Service</span><br style=BACKGROUND-COLOR:#cccccc>
                <span style=BACKGROUND-COLOR:#cccccc>public class JavaOnePlugin
                implements ConsoleProvider
                {</span><br style=BACKGROUND-COLOR:#cccccc>
                <span style=BACKGROUND-COLOR:#cccccc>&nbsp;&nbsp;&nbsp;
                </span><br style=BACKGROUND-COLOR:#cccccc>
                <span style=BACKGROUND-COLOR:#cccccc>&nbsp;&nbsp;&nbsp; public
                URL getConfiguration() { return null;
                }</span><br style=BACKGROUND-COLOR:#cccccc>
                <span style=BACKGROUND-COLOR:#cccccc>}<br>
                <br>
                </span>
              </div>
              <div style=MARGIN-LEFT:80px>
                <br>
                <br>
              </div>
              <div style=MARGIN-LEFT:40px>
                <div id=p0p4 style="PADDING:1em 0pt; TEXT-ALIGN:left">
                  <div style=MARGIN-LEFT:40px>
                    <div id=wk70 style="PADDING:1em 0pt; TEXT-ALIGN:left">
                      <img src="images/ex1-10-editJavaOnePlugin.jpg">
                    </div>
                    Figure: Ex1-10&nbsp; Edit&nbsp; JavaOnePlugin.java<br>
                    <br>
                  </div>
                </div>
              </div>
              <div id=p0p4 style="PADDING:1em 0pt; TEXT-ALIGN:left; MARGIN-LEFT:40px">
                8.&nbsp;&nbsp; The last step of this implementation is to build
                the project.<br>
                <br>
                Note:&nbsp; If you are using a command line and have 'maven 2'
                installed on your system you can build the project by doing the
                following:<br>
                &nbsp;&nbsp;&nbsp;<span style=BACKGROUND-COLOR:#999999>
                %cd&nbsp; &lt;gfplugin&gt;/plugin;&nbsp; mvn install</span><br>
              </div>
              <div id=p0p4 style="PADDING:1em 0pt; TEXT-ALIGN:left">
                <div style=MARGIN-LEFT:40px>
                  &nbsp;&nbsp;&nbsp; Steps in NetBeans:<br>
                </div>
                <ol class="j1hollist">
                  <ol class="j1hollist">
                    <li>
                      Right click on the project 'Java One 2008 Admin Console
                      Plugin'
                    </li>
                    <li>
                      Select Build.
                    </li>
                  </ol>
                </ol>
                <br>
                After the above steps are finished, you will have the jar file named 
                <code>myplugin</span></span><span style=BACKGROUND-COLOR:#ffffff>/target/console-myplugin-1.0-SNAPSHOT.jar</code>.
                This jar file is ready to be integrated into GlassFish.</span><br>
              </div>
              <div id=p0p4 style="PADDING:1em 0pt; TEXT-ALIGN:left; MARGIN-LEFT:40px">
                <div style=MARGIN-LEFT:40px>
                </div>
              </div>
              <div id=ne15 style="PADDING:1em 0pt; TEXT-ALIGN:left">
                <hr style="WIDTH:100%; HEIGHT:2px"><br>
    </ol>
</a></li>




</ol> <!-- End Steps Ordered List -->



      <hr style="WIDTH:100%; HEIGHT:2px"><br>
      <b> 1-B.&nbsp;&nbsp; Add configuration files to indicate&nbsp; integration
      points.<br>
      </b>
      <div id=rbo: style="PADDING:1em 0pt; TEXT-ALIGN:left">
        <div style=MARGIN-LEFT:40px>
          4.&nbsp; You are now ready to add the console-config.xml file which
          specifies the integration point for your module.&nbsp;&nbsp; You will
          add this XML file under&nbsp;
          myplugin/src/main/resources/META-INF/admingui,&nbsp; since the default
          location of this file in a plugin jar is
          META-INF/admingui/console-config.xml. &nbsp; In this file, you will be
          adding the following two xml entries:<br>
        </div>
        <div style=MARGIN-LEFT:80px>
          <i>console-config</i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          id:&nbsp; javaone<br>
          I<i>ntegration Point </i>:&nbsp;&nbsp; id: JavaOneNode,&nbsp;
          type:tree,&nbsp; priority:210,&nbsp;&nbsp; parentId:tree,&nbsp;
          content:&nbsp; treenode-ex1.jsf<br>
        </div>
        <div style=MARGIN-LEFT:80px>
          <br>
        </div>
        <div style=MARGIN-LEFT:40px>
          Follow these steps in NetBeans:<br>
        </div>
        <div style=MARGIN-LEFT:40px>
          <ol class="j1hollist">
            <li>
              Right click on 'admingui' under 'Other
              Resources-&gt;Resources-&gt;META-INF-&gt;admingui'
            </li>
            <li>
              Select 'New' and 'Other...'<br>
            </li>
            <li>
              Select 'Other' in the Categories column on the right and 'Empty
              File' in File Types categories on the left. Select Next.
            </li>
            <li>
              Enter 'console-config.xml' as the file name. Select
              Finish.&nbsp;&nbsp;<br>
            </li>
            <li>
              Open the file. Copy and paste the following code.&nbsp; (Note: the
              full path of this file is:
              myplugin/src/main/resources/META-INF/admingui/console-config.xml)
            </li>
          </ol>
          <br style=BACKGROUND-COLOR:#cccccc>
          <div style="MARGIN-LEFT:40px; BACKGROUND-COLOR:#cccccc">
            &lt;?xml version="1.0" encoding="UTF-8"?&gt;<br>
            &lt;console-config id="javaone"&gt;<br>
            &nbsp;&nbsp;&nbsp; &lt;integration-point id="JavaOneNode"
            type="tree" priority="210" parentId="tree"
            content="treenode-ex1.jsf" /&gt;<br>
            &lt;/console-config&gt;<br>
          </div>
          <br>
        </div>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        TBD: (Ana: I don't think we need all these screen shots showing how to
        create a fille??)<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        (I guess we can delete this first one, but would like to keep the next
        one to ensure they have it at right directory &nbsp; anissa)<br>
        <div id=hhf4 style="PADDING:1em 0pt; TEXT-ALIGN:left; MARGIN-LEFT:80px">
          <img src="images/ex1-3-createConfig1.jpg"><br>
          <br>
          Figure: Ex1-3&nbsp; Creating console-config.xml (step 1)<br>
          <div style=MARGIN-LEFT:40px>
            <div id=v6gz style="PADDING:1em 0pt; TEXT-ALIGN:left">
              <div id=dqfl style="PADDING:1em 0pt; TEXT-ALIGN:left">
                <div id=bd-l style="PADDING:1em 0pt; TEXT-ALIGN:left">
                  <img src="images/ex1-4-createConfig2.jpg">
                </div>
                <br>
                Figure: Ex1-4 Creating console-config.xml (step 2)<br>
                <br>
                <br>
                <div id=q_x4 style="PADDING:1em 0pt; TEXT-ALIGN:left">
                  <img src="images/ex1-5-editConfig.jpg">
                </div>
                Figure: Ex1-5&nbsp; Editing&nbsp; console-config.xml<br>
              </div>
            </div>
            <br>
            <hr style="WIDTH:100%; HEIGHT:2px"><br style=FONT-WEIGHT:bold>
          </div>
        </div>
        <b>1-C&nbsp; Add JSF Pages</b><br>
        <br>
        &nbsp;&nbsp; 5 .&nbsp; In this step you will be creating the JSF pages
        which will be displayed in the Administration Console when your JavaOne
        tree node is displayed and clicked.&nbsp;&nbsp;<br>
        In the first JSF file you will specify a top level JavaOne tree node and
        a sub node underneath.&nbsp; In the second JSF file you will be using
        Facelets syntax to create a simple 'hello world' page that is displayed
        when the sub node is clicked. &nbsp; To learn more about JSF or Facelets
        you can visit the JSFTemplating web site:
        https://jsftemplating.dev.java.net, or the Facelets web site:
        https://facelets.dev.java.net.<br>
        <br>
        <div style=MARGIN-LEFT:40px>
          Step-by-step instructions in NetBeans<br>
        </div>
        <ol class="j1hollist">
          <ol class="j1hollist">
            <li>
              Right click on Resources.&nbsp; Select 'New' and 'Other...'
            </li>
            <li>
              Select 'Other' in the Categories column on the right and 'Empty
              File' in File Types categories on the left. Select Next.
            </li>
            <li>
              Fill in 'treenode-ex1.jsf' as&nbsp; the file name.&nbsp;&nbsp;
              This corresponds to the 'content' specified in console-config.xml
            </li>
            <li>
              Open the file. Copy and paste the following code.&nbsp;&nbsp;
              (Note: the full path of this file is
              myplugin/src/main/resources/treenode-ex1.jsf)
            </li>
          </ol>
        </ol>
        <br style=BACKGROUND-COLOR:#cccccc>
        <div style="MARGIN-LEFT:40px; BACKGROUND-COLOR:#cccccc">
          &lt;sun:treeNode&nbsp;&nbsp; id="j1root"<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          text="J1 TreeNode"<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          imageURL="theme/com/sun/webui/jsf/suntheme/images/tree/tree_folder.gif"<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          target="main"&gt;<br>
          &nbsp;&nbsp;&nbsp; &lt;sun:treeNode id="first" t<br>
          <div style=MARGIN-LEFT:80px>
            ext="First Node"<br>
          </div>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          url="javaone/hello.jsf"<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          imageURL="resource/images/instance.gif"<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          target="main" /&gt;<br>
          &lt;/sun:treeNode&gt;<br>
        </div>
        <p class=pb style=page-break-after:always>
        </p>
        <br>
        <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
        <div id=b0tu style="PADDING:1em 0pt; TEXT-ALIGN:left; MARGIN-LEFT:40px">
          <img src="images/ex1-6-createTreenode.jpg">
        </div>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Figure Ex1-6&nbsp; Create
        treenode-ex1.jsf (Step 2)<br>
        <br>
        <div id=x130 style="PADDING:1em 0pt; TEXT-ALIGN:left; MARGIN-LEFT:40px">
          <div id=hre9 style="PADDING:1em 0pt; TEXT-ALIGN:left">
            <br>
          </div>
          <br>
          <div id=w-zh style="PADDING:1em 0pt; TEXT-ALIGN:left">
            <img src="images/ex1-7-editTreenode-1.jpg">&nbsp;
            &nbsp;&nbsp;&nbsp; Figure:&nbsp; Ex1-7&nbsp; Edit treenode-ex1.jsf<br>
          </div>
          <br>
          6.&nbsp; In this step you will be creating the hello.jsf&nbsp; page
          which will be displayed on the right frame of the Administration
          Console when the 'Exercise #1' tree node is clicked.&nbsp; The file
          will be created in the same directory where you created
          'treenode-1.jsf'.&nbsp;<br>
          &nbsp;The full path to this file is
          'myplugin/src/main/resources/hello.jsf'.&nbsp;&nbsp;&nbsp;<br>
          <br>
          Step-by-step instructions in NetBeans<br>
          <ol class="j1hollist">
            <li>
              Right click on Resources.&nbsp; Select 'New' and 'Other...'
            </li>
            <li>
              Select <b>'</b>Other' in the left Categories column and 'Empty
              File' on the File Type column.
            </li>
            <li>
              Enter 'hello.jsf<b>'</b> as&nbsp; the file name.&nbsp;&nbsp; This
              corresponds to the 'url' specified in&nbsp; the 'treenode-ex1.jsf'
              file you created in step 5 above.<br>
            </li>
            <li>
              Open the file.&nbsp; Add the following code.&nbsp;&nbsp; (Note:
              the full path to this file is
              myplugin/src/main/resources/hello.jsf)<br style=BACKGROUND-COLOR:#cccccc>
            </li>
          </ol>
        </div>
        <div id=x130 style="PADDING:1em 0pt; TEXT-ALIGN:left">
          <div style="MARGIN-LEFT:40px; BACKGROUND-COLOR:#cccccc">
            &lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"<br>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;<br>
            &lt;html xmlns="http://www.w3.org/1999/xhtml"<br>
            &nbsp;&nbsp;&nbsp; xmlns:ui="http://java.sun.com/jsf/facelets"<br>
            &nbsp;&nbsp;&nbsp; xmlns:h="http://java.sun.com/jsf/html"<br>
            &nbsp;&nbsp;&nbsp; xmlns:f="http://java.sun.com/jsf/core"&gt;<br>
            &lt;head&gt;<br>
            &nbsp;&nbsp;&nbsp; &lt;title&gt; Hello World &lt;/title&gt;<br>
            &lt;/head&gt;<br>
            &lt;body&gt;<br>
            &nbsp;&nbsp;&nbsp; &lt;h:outputText value="Your plugin is working,
            Congratulation !!!" /&gt;<br>
            &lt;/body&gt;<br>
            &lt;/html&gt;<br>
            <br>
          </div>
        </div>
        <div id=x130 style="PADDING:1em 0pt; TEXT-ALIGN:left; MARGIN-LEFT:40px">
          <br>
          <div id=enfz style="PADDING:1em 0pt; TEXT-ALIGN:left">
            <img src="images/ex1-8-editHello.jpg">
          </div>
          Figure: Ex1-8&nbsp; Edit
          hello.jsf<hr style="WIDTH:100%; HEIGHT:2px"><br>
        </div>

                <b>1-E.&nbsp; Integrate this plugin module to GlassFish V3<br>
                <br>
                </b>You now need a Terminal to enter some commands.&nbsp; Please
                bring up a terminal window.<br>
                <br>
                9.&nbsp; The GlassFish V3 server is installed as
                'gfplugin/glassfish'. &nbsp; It is already running.<br>
                10.&nbsp; In the browser enter the following URL to bring up the
                Admin Console.<br>
                http://localhost:8080/admingui/index.jsf<br>
                <br>
                Note that the Navigation tree on the left does not have the
                JavaOne tree node yet since you have not integrated your jar.<br>
                <br>
                <div id=rlz1 style="PADDING:1em 0pt; TEXT-ALIGN:left">
                  <img src="images/ex1-11-before.jpg">
                </div>
                Figure: Ex1-11 Before Integration<br>
                <br>
                11. Shut down the server<br>
                <span style=BACKGROUND-COLOR:#eeeeee> %
                &lt;gfplugin&gt;/glassfish/bin/stop-domain</span><br>
                <br>
                12. Integrate the jar to GlassFish by copying it to
                &lt;gfplugin&gt;/glassfish/modules directory<br>
                <span style=BACKGROUND-COLOR:#eeeeee> % cp&nbsp;
                &lt;gfplugin&gt;/myplugin</span><span style=BACKGROUND-COLOR:#ffffff><span style=BACKGROUND-COLOR:#eeeeee>/target/console-myplugin-1.0-SNAPSHOT.jar&nbsp;
                to
                &lt;gfplugin&gt;/glassfish/modules/console-myplugin-1.0-SNAPSHOT.jar</span><br>
                </span><br>
                13.&nbsp; Start the server again,<br>
                <span style=BACKGROUND-COLOR:#eeeeee> % glassfish/bin/asadmin
                start-domain&nbsp;</span><br style=BACKGROUND-COLOR:#eeeeee>
                <br>
                14. Go to
                <span style=BACKGROUND-COLOR:#eeeeee>http://localhost:8080/admingui/index.jsf</span><br>
                &nbsp;Note that the JavaOne tree node is displayed in the
                Navigation Tree and clicking on the tree node displays the
                'Hello World' page.<br>
                <br>
                <div style=MARGIN-LEFT:40px>
                  <div id=ep_a style="PADDING:1em 0pt; TEXT-ALIGN:left">
                    <div id=ni67 style="PADDING:1em 0pt; TEXT-ALIGN:left">
                      <div id=u30h style="PADDING:1em 0pt; TEXT-ALIGN:left">
                        <div id=eocd style="PADDING:1em 0pt; TEXT-ALIGN:left">
                          <img src="images/ex1-12-ex1result.jpg">
                        </div>
                        <br>
                      </div>
                      Figure: Ex1-12 &nbsp; Browser showing the plugin page.
                    </div>
                  </div>
                  <b>You have just customized the Administration Console and
                  plugged in your own tree node and page,&nbsp; Congratulations
                  !!</b>


<p class="j1holheader">Summary:</p>
            
<p>In this exercise, you learned how to create your hands-on lab document. (TBD)</p>
            
            <p><a href="#Solution_1">Go to solution</a></p>
            <p><a href="#Exercise_2">Go on to next exercise</a></p>
        </div>
    </body>
</html>

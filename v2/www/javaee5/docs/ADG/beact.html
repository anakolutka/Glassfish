<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html><!-- GenHTML@12751-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<!-- ident	"%Z%%M%	%I%	%E% SMI" -->

    <title>1.&nbsp;&nbsp;Assembling and Deploying Applications
    </title>
</head>
<body>
<font style="color: red; font-family:arial,helvetica,sans-serif; font-size:12pt; font-weight:bold}">Not For Publication</font>&nbsp;&nbsp;&nbsp;<br>Glassfish Review Draft<br> </td>

<A href="toc.html">Sun Java System Application Server Platform Edition 9.0 Application Deployment Guide</A>&nbsp;<br>
<A HREF="p1.html">Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="beaqi.html">Next</A><br>
            <!--startindex--><A NAME="beact"></A><b>Chapter&nbsp;1</b><h1>Assembling and Deploying Applications</h1>
<p>This chapter describes Sun Java&#153; System Application Server modules
and how these modules are assembled separately or together in an application.
This chapter also describes tools for assembly and deployment.</p>
<p>The Application Server modules and applications include Java&#153; Platform,
Enterprise Edition (Java EE&#153; platform) standard features
and Application Server specific features. Only Application Server specific features
are described in detail in this chapter.</p>
<p>The following topics are presented in this chapter:</p>
<ul><li><p><A HREF="beact.html#beacu">Overview of Assembly and Deployment</A></p>
</li>
<li><p><A HREF="beact.html#beadm">Assembling Modules and Applications</A></p>
</li>
<li><p><A HREF="beact.html#beadu">Deploying Modules and Applications</A></p>
</li>
</ul>
<A NAME="beacu"></A><h2>Overview of Assembly and Deployment</h2>
<A NAME="indexterm-1"></A><A NAME="indexterm-2"></A><A NAME="indexterm-3"></A><p>Application assembly (also known as packaging) is the process of combining
discrete components of an application into a single unit that can be deployed
to a Java-EE-compliant application server. A package can be classified either
as a module or as a full-fledged application. This section covers the following
topics:</p>
<ul><li><p><A HREF="beact.html#beacv">Modules</A></p>
</li>
<li><p><A HREF="beact.html#beacw">Applications</A></p>
</li>
<li><p><A HREF="beact.html#gatsc">Java EE Standard Annotation</A></p>
</li>
<li><p><A HREF="beact.html#beacx">Java EE Standard Descriptors</A></p>
</li>
<li><p><A HREF="beact.html#beacy">Sun Java System Application Server Descriptors</A></p>
</li>
<li><p><A HREF="beact.html#beacz">Naming Standards</A></p>
</li>
<li><p><A HREF="beact.html#beada">Directory Structure</A></p>
</li>
</ul>
<A NAME="beacv"></A><h3>Modules</h3>
<p>A Java EE <A NAME="indexterm-4"></A><A NAME="indexterm-5"></A>module is a collection of one or
more Java EE components that execute in the same container type (for example,
web or EJB) with annotations or deployment descriptors of that type. One descriptor
is Java EE standard, the other is Application Server specific. Annotations can
be used instead of Java EE standard descriptors.</p>
<p>Types of Java EE modules are as follows:</p>
<ul><li><p><b>Web Application Archive (WAR):</b> A <A NAME="indexterm-6"></A>web application is a collection of servlets, HTML pages, classes,
and other resources that can be bundled and deployed to several Java EE application
servers. A WAR file can consist of the following items: servlets, JSP files,
JSP tag libraries, utility classes, static pages, client-side applets, beans,
bean classes, and annotations or deployment descriptors (<tt>web.xml</tt> and <tt>sun-web.xml</tt>).</p>
</li>
<li><p><b>EJB JAR File:</b> The <A NAME="indexterm-7"></A>EJB JAR file is the standard format for assembling enterprise
beans. This file contains the bean classes (home, remote, local, and implementation),
all of the utility classes, and annotations or deployment descriptors (<tt>ejb-jar.xml</tt> and <tt>sun-ejb-jar.xml</tt>). If the EJB
component is a version 2.1 or earlier entity bean with container managed persistence,
a <tt>.dbschema</tt> file and a CMP mapping descriptor, <tt>sun-cmp-mapping.xml</tt>, must be included as well.</p>
</li>
<li><p><b>Application Client Container JAR File:</b> An <A NAME="indexterm-8"></A>ACC client is an Application Server specific type of Java EE client.
An ACC client supports the standard Java EE Application Client specifications,
and in addition, supports direct access to the Application Server. Its deployment
descriptors are <tt>application-client.xml</tt> and <tt>sun-application-client.xml</tt>.</p>
</li>
<li><p><b>Resource RAR File:</b> RAR
files apply to Java EE CA <A NAME="indexterm-9"></A>connectors. A  connector extends the EJB container to allow access
to external  systems much like a device driver provides access to a peripheral
device  from a process hosted by an operating system. It is a portable way
of allowing EJB components to access a foreign enterprise system. Each Application Server connector
has annotations or a Java EE XML file, <tt>ra.xml</tt>.</p>
</li>
</ul>
<p>Package definitions must be used in the source code of all modules so
the class loader can properly locate the classes after the modules have been
deployed.</p>
<p>Because the information in a deployment descriptor is declarative, it
can be changed without requiring modifications to source code. At run time,
the Java EE server reads this information and acts accordingly.</p>
<p>The Application Server also supports lifecycle modules. See <A HREF="http://docs.sun.com/app/docs/doc/819-3659">Chapter 12, "Developing Lifecycle Listeners," in <i>Sun Java System Application Server Platform Edition 9.0 2006Q1 Developer's Guide</i></A> for
more information.</p>
<p>EJB JAR and Web modules can also be deployed separately, outside of
any application, as in the following figure. EJB components are assembled
in a JAR file with <tt>ejb-jar.xml</tt> and <tt>sun-ejb-jar.xml</tt> deployment descriptors. Web components are assembled in a WAR file
with <tt>web.xml</tt> and <tt>sun-web.xml</tt> deployment
descriptors. Both module types are deployed to the Application Server.</p>
<A NAME="fwfdj"></A><p><b>Figure 1-1 </b>Module assembly and deployment</p>
<IMG src="figures/dgdeploy3.gif" class="figure"  alt="Figure shows EJB or Web module assembly and deployment." title="Figure shows EJB or Web module assembly and deployment."><A NAME="beacw"></A><h3>Applications</h3>
<p>A Java EE <A NAME="indexterm-10"></A><A NAME="indexterm-11"></A>application is a logical collection
of one or more Java EE modules tied together by application deployment descriptors.
Components can be assembled at either the module or the application level.
Components can also be deployed at either the module or the application level.</p>
<p>The following diagram illustrates how components are assembled into
modules and then assembled into an Application Server application and deployed.
EJB components are assembled in a JAR file with ejb-jar.xml and sun-ejb-jar.xml
deployment descriptors. Web components are assembled in a WAR file with web.xml
and sun-web.xml deployment descriptors. An application client is assembled
in a JAR file with application-client.xml and sun-application-client.xml deployment
descriptors. A resource adapter is assembled in a RAR file with a ra.xml deployment
descriptor. All modules are assembled in an EAR file and deployed to the Application
Server.</p>
<A NAME="fvyip"></A><p><b>Figure 1-2 </b>Application assembly and deployment</p>
<IMG src="figures/dgdeploya.gif" class="figure"  alt="Figure shows Java EE application assembly and deployment." title="Figure shows Java EE application assembly and deployment."><p>Each module has an Application Server deployment descriptor and a Java EE
deployment descriptor. The Application Server uses the deployment descriptors to
deploy the application components and to register the resources with the Application Server.</p>
<p>An application consists of one or more modules, an optional Application Server deployment
descriptor, and a required Java EE application deployment descriptor. All
items are assembled, using the Java ARchive (<tt>.jar</tt>) file
format, into one file with an extension of <tt>.ear</tt>.</p>
<A NAME="gatsc"></A><h3>Java EE Standard Annotation</h3>
<A NAME="indexterm-12"></A><p>The Application Server supports applications and modules annotated according
to the following specifications:</p>
<ul><li><p>JSR 250 Common Annotation Specification (<A HREF="http://www.jcp.org/en/jsr/detail?id=250">http://www.jcp.org/en/jsr/detail?id=250</A>)</p>
</li>
<li><p>JSR 181 Annotation for Web Services Specification (<A HREF="http://www.jcp.org/en/jsr/detail?id=181">http://www.jcp.org/en/jsr/detail?id=181</A>)</p>
</li>
<li><p>EJB 3.0 Specification (<A HREF="http://www.jcp.org/en/jsr/detail?id=220">http://www.jcp.org/en/jsr/detail?id=220</A>)</p>
</li>
</ul>
<p>The following annotation and deployment descriptor combinations are
supported:</p>
<ul><li><p>Java EE applications or modules can be packaged with full
Java EE 5.0 compliant standard and runtime deployment descriptors. If the
standard deployment descriptors have specified the attribute <tt>full</tt>, annotations in the application or module are ignored.</p>
</li>
<li><p>Java EE applications or modules can be fully annotated with
metadata defined by the listed specifications.  Annotation eliminates the
need for Java EE standard deployment descriptors. In most cases, the Application Server deployment
descriptors are also optional.</p>
</li>
<li><p>Java EE applications or modules can be partially annotated
with some deployment information in standard deployment descriptors.  In case
of conflicts, deployment descriptor values supersede the annotated metadata,
but a warning message is logged.</p>
</li>
</ul>
<p>To check the correctness of annotations or deployment descriptors prior
to deployment, see <A HREF="beact.html#beadq">The Verifier Utility</A>.</p>
<A NAME="beacx"></A><h3>Java EE Standard Descriptors</h3>
<A NAME="indexterm-13"></A><A NAME="indexterm-14"></A><p>Java EE standard deployment descriptors are described in the Java EE
specification, v5. You can find the specification at <A HREF="http://java.sun.com/products/">http://java.sun.com/products/</A>.</p>
<p>The following table shows where to find more information about the most
commonly used Java EE standard deployment descriptors.</p>
<A NAME="fvyev"></A><p><b>Table 1-1 </b>Java EE Standard
Descriptors</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Deployment Descriptor</p></th><th scope="col"><p>Where to Find More Information</p></th></tr>
<tr><td><p><A NAME="indexterm-15"></A><tt>application.xml</tt></p></td><td><p>Java Platform Enterprise Edition Specification, v5, Chapter 8, "Application
Assembly and Deployment - Java EE:application XML DTD"</p></td></tr>
<tr><td><p><A NAME="indexterm-16"></A><tt>web.xml</tt></p></td><td><p>Java Servlet Specification, v2.5 Chapter 13, "Deployment Descriptor,"
and JavaServer Pages Specification, v2.1, Chapter 7, "JSP Pages as XML
Documents," and Chapter 5, "Tag Extensions"</p></td></tr>
<tr><td><p><A NAME="indexterm-17"></A><tt>ejb-jar.xml</tt></p></td><td><p>Enterprise JavaBeans Specification, v3.0, Chapter 16, "Deployment
Descriptor"</p></td></tr>
<tr><td><p><A NAME="indexterm-18"></A><tt>application-client.xml</tt></p></td><td><p>Java Platform Enterprise Edition Specification, v5, Chapter 9, "Application
Clients - Java EE:application-client XML DTD"</p></td></tr>
<tr><td><p><A NAME="indexterm-19"></A><tt>ra.xml</tt></p></td><td><p>Java Enterprise Edition, J2EE Connector Architecture Specification,
v1.5, Chapter 10, "Packaging and Deployment."</p></td></tr>
</table><A NAME="beacy"></A><h3>Sun Java System Application Server Descriptors</h3>
<A NAME="indexterm-20"></A><A NAME="indexterm-21"></A><p>The Application Server uses additional deployment descriptors for configuring
features specific to the Application Server. The <tt>sun-application-client.xml</tt> and <tt>sun-acc.xml</tt> files are required; all the
others are optional.</p>
<p>To check the correctness of these deployment descriptors prior to deployment,
see <A HREF="beact.html#beadq">The Verifier Utility</A>.</p>
<p>For complete descriptions of these files, see <A HREF="beaqi.html#beaqi">Appendix&nbsp;A, Deployment Descriptor Files</A>.</p>
<A NAME="beacz"></A><h3>Naming Standards</h3>
<p>Names of <A NAME="indexterm-22"></A>applications and individually deployed EJB JAR, WAR, and connector
RAR modules must be unique within an Application Server domain. Modules of the
same type within an application must have unique names. In addition, for entity
beans that use CMP,<tt>.dbschema</tt> file names must be unique
within an application.</p>
<p>If you do not explicitly specify a name, the default name is the first
portion of the file name (without the <tt>.war</tt> or <tt>.jar</tt> extension). Modules of different types can have the same name
within an application, because the directories holding the individual <A NAME="indexterm-23"></A>modules are named with <tt>_jar</tt>, <tt>_war</tt> and <tt>_rar</tt> suffixes. This is the case when you
use the Admin Console or the <tt>asadmin</tt> command. See <A HREF="beact.html#beaeb">Tools for Deployment</A>.</p>
<p>You can specify a name in one of these ways:</p>
<ul><li><p>If deploying using the Admin Console, specify the name in
the Application Name field.</p>
</li>
<li><p>If deploying using the <tt>asadmin deploy</tt> command,
the default name of the application or module is the prefix of the JAR file
that you are deploying. For example, for the <tt>hello.war</tt> file,
the Web application name is <tt>hello</tt>. To override the default
name, specify the <tt>--name</tt> option.</p>
</li>
</ul>
<p>Make sure your package and file names do not contain spaces or characters
that are illegal for your operating system.</p>
<p>Using a Java package-like naming scheme is recommended for module filenames,
EAR filenames, module names as found in the <tt>&lt;module-name></tt> portion
of the <tt>ejb-jar.xml</tt> files, and EJB names as found in the <tt>&lt;ejb-name></tt> portion of the <tt>ejb-jar.xml</tt> files.
The use of this package-like naming scheme ensures that name collisions do
not occur. The benefits of this naming practice apply not only to the Application Server,
but to other Java EE application servers as well.</p>
<p><A NAME="indexterm-24"></A>JNDI lookup names for EJB components must also be unique. Establishing
a consistent naming convention might help. For example, appending the application
name and the module name to the EJB name is one way to guarantee unique names.
In this case, <tt>mycompany.pkging.pkgingEJB.MyEJB</tt> would be
the JNDI name for an EJB in the module <tt>pkgingEJB.jar</tt>, which
is packaged in the application <tt>pkging.ear</tt>.</p>
<p>If you are writing your own <A NAME="indexterm-25"></A><A NAME="indexterm-26"></A>JSR 88 client to deploy applications to the Application Server using
the following API, the name of the application is taken from the <tt>display-name</tt> entry in the Java EE standard deployment descriptor,
because there is no file name in this case. If the <tt>display-name</tt> entry
is not present, the Application Server creates a temporary file name and uses that
name to deploy the application.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>javax.enterprise.deploy.spi.DeploymentManager.distribute(Target[], InputStream, 
InputStream)</pre>
</td></table><br><p>Neither the Admin Console nor the <tt>asadmin</tt> command
uses this API.</p>
<p><hr size="1" noshade><p><b>Note - </b>Use of the following JSR 88 API is preferred. In this case, the
name is derived from the file name as previously described.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>javax.enterprise.deploy.spi.DeploymentManager.distribute(Target[], File, File)</pre>
</td></table><br><hr size="1" noshade></p><p>For more information about JSR 88, see the JSR 88 page at <A HREF="http://jcp.org/en/jsr/detail?id=88">http://jcp.org/en/jsr/detail?id=88</A>.</p>
<A NAME="beada"></A><h3>Directory Structure</h3>
<p>When you deploy an <A NAME="indexterm-27"></A>application, the application is expanded from the EAR file to
an open directory structure. The directories holding the individual <A NAME="indexterm-28"></A>modules are named with <tt>_jar</tt>, <tt>_war</tt> and <tt>_rar</tt> suffixes. If you use the <tt>asadmin deploydir</tt> command to deploy a directory instead of an EAR
file, your directory structure must follow this same convention. Module and
application directory structures follow the structure outlined in the Java
EE specification.</p>
<A NAME="beadm"></A><h2>Assembling Modules and Applications</h2>
<p>Assembling (or packaging) modules and applications in Application Server conforms
to all of the customary Java-EE-defined specifications. The only difference
is that when you assemble in Application Server, you include Application Server specific
deployment descriptors that enhance the functionality of the Application Server.</p>
<p>For example, when you assemble an <A NAME="indexterm-29"></A><A NAME="indexterm-30"></A>EJB JAR module, you annotate or create two deployment descriptor
files with these names: <tt>ejb-jar.xml</tt> and <tt>sun-ejb-jar.xml</tt>. If the EJB component is an entity bean with container-managed
persistence, you can also create a <A NAME="indexterm-31"></A><tt>.dbschema</tt> file and a <tt>sun-cmp-mapping.xml</tt> file. For more information about <tt>sun-ejb-jar.xml</tt> and <tt>sun-cmp-mapping.xml</tt>, see <A HREF="beaqi.html#beaqi">Appendix&nbsp;A, Deployment Descriptor Files</A>.</p>
<p><hr size="1" noshade><p><b>Note - </b>According to the Java EE specification, section 8.1.1.2, "Dependencies,"
you cannot package <A NAME="indexterm-32"></A>utility classes within an individually deployed EJB module. Instead,
package the EJB module and utility JAR within an application using the <A NAME="indexterm-33"></A>JAR Extension Mechanism Architecture. For other alternatives,
see <A HREF="http://docs.sun.com/app/docs/doc/819-3659">Chapter 2, "Class Loaders," in <i>Sun Java System Application Server Platform Edition 9.0 2006Q1 Developer's Guide</i></A>.</p>
<hr size="1" noshade></p><p>The Application Server provides these tools for assembling and verifying
a module or an application:</p>
<ul><li><p><A HREF="beact.html#beado">The asant Utility</A></p>
</li>
<li><p><A HREF="beact.html#beadp">NetBeans IDE</A></p>
</li>
<li><p><A HREF="beact.html#beadq">The Verifier Utility</A></p>
</li>
</ul>
<A NAME="beado"></A><h3>The asant Utility</h3>
<p>The <tt>asant</tt> utility can help you assemble and deploy
modules and applications. For details, see <A HREF="http://docs.sun.com/app/docs/doc/819-3659">Chapter 3, "The asant Utility," in <i>Sun Java System Application Server Platform Edition 9.0 2006Q1 Developer's Guide</i></A>.</p>
<A NAME="beadp"></A><h3>NetBeans IDE</h3>
<p>You can use <A NAME="indexterm-34"></A>the NetBeans&#153; IDE (integrated development
environment) to assemble J2EE applications and modules. The Platform Edition of
the Application Server is bundled with the NetBeans 5 IDE. For more information
about using the NetBeans IDE, see <A HREF="http://www.netbeans.org">http://www.netbeans.org</A>.</p>
<A NAME="beadq"></A><h3>The Verifier Utility</h3>
<p>The <A NAME="indexterm-35"></A><A NAME="indexterm-36"></A>verifier utility validates Java EE annotations and deployment
descriptors and Application Server specific deployment descriptors against their
corresponding DTD schema files. It gives errors and warnings if a module or
application is not Java EE and Application Server compliant. You can verify deployment
descriptors in EAR, WAR, RAR, and JAR files.</p>
<p>The verifier tool is not simply an <A NAME="indexterm-37"></A>XML syntax verifier. Rules and interdependencies between various
elements in the deployment descriptors are verified. Where needed, user application
classes are introspected to apply validation rules.</p>
<p>The verifier is integrated into Application Server deployment and the <A NAME="indexterm-38"></A><tt>asant</tt> task <A HREF="http://docs.sun.com/app/docs/doc/819-3659">"sun-appserv-deploy" in <i>Sun Java System Application Server Platform Edition 9.0 2006Q1 Developer's Guide</i></A>. You can also run it as a stand-alone utility from
the command line. The <tt>verifier</tt> utility is located in the <i>install-dir</i><tt>/bin</tt> directory.</p>
<p>You can run the verifier during Application Server deployment using the Admin Console or
the <tt>asadmin deploy</tt> command with the <tt>--verify="true"</tt> option (see <A HREF="beact.html#beaeg">The asadmin Deployment Commands</A> and <A HREF="beact.html#beaeh">The Admin Console Deployment Pages</A>).
In these cases, the output of the verifier is written to the <i>tempdir</i><tt>/verifier-results/</tt> directory, where <i>tempdir</i> is the temporary directory defined in the operating
system. Deployment fails if any failures are reported during the verification
process. The verifier also logs information about verification progress to
the standard output.</p>
<p>For details on all the assertions tested by the verifier, see the assertions
documentation provided at <A HREF="http://java.sun.com/j2ee/avk/index.html">http://java.sun.com/j2ee/avk/index.html</A>.</p>
<p><hr size="1" noshade><p><b>Tip - </b>Using the verifier tool can help you avoid runtime errors that
are difficult to debug.</p>
<hr size="1" noshade></p><p>This section covers the following topics:</p>
<ul><li><p><A HREF="beact.html#beadr">Command Line Syntax</A></p>
</li>
<li><p><A HREF="beact.html#beads">Ant Integration</A></p>
</li>
<li><p><A HREF="beact.html#beadt">Sample Results Files</A></p>
</li>
</ul>
<A NAME="beadr"></A><h4>Command Line Syntax</h4>
<p>The verifier tool's syntax is as follows:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>verifier [<i>options</i>] <i>file</i></pre>
</td></table><br><p>The <i>file</i> can be an EAR, WAR, RAR, or JAR
file.</p>
<p>The following table shows the <i>options</i> for
the <tt>verifier</tt> tool.</p>
<A NAME="fvyec"></A><p><b>Table 1-2 </b>Verifier Options</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Short Form</p></th><th scope="col"><p>Long Form</p></th><th scope="col"><p>Description</p></th></tr>
<tr><td><p><tt>-v</tt></p></td><td><p><tt>--verbose</tt></p></td><td><p>Turns on verbose mode. In verbose mode, the status of each run of each
test is displayed on the verifier console.</p></td></tr>
<tr><td><p><tt>-d</tt> <i>output-dir</i></p></td><td><p><tt>--destdir</tt> <i>output-dir</i></p></td><td><p>Writes test results to the <i>output-dir</i>, which
must already exist. By default, the results files are created in the current
directory.</p></td></tr>
<tr><td><p><tt>-D</tt> <i>domain-dir</i></p></td><td><p><tt>--domain</tt> <i>domain-dir</i></p></td><td><p>Specifies the absolute path to the domain directory. This option is
ignored if the <tt>-p</tt> option is used. The default domain directory
is<i>install-dir</i><tt>/domains/domain1</tt>.</p></td></tr>
<tr><td><p><tt>-r</tt><i>level</i></p></td><td><p><tt>--reportlevel</tt> <i>level</i></p></td><td><p>Sets the output report <i>level</i> to one of the
following values:</p><ul><li><p><tt>a</tt> or <tt>all</tt> - Reports all
results.</p></li>
<li><p><tt>w</tt> or <tt>warnings</tt> - Reports
only warning and failure results. This is the default.</p></li>
<li><p><tt>f</tt> or <tt>failures</tt> - Reports
only failure results.</p></li>
</ul>
</td></tr>
<tr><td><p><tt>-t</tt></p></td><td><p><tt>--timestamp</tt></p></td><td><p>Appends a timestamp to the output file name. The format of the timestamp
is yyyyMMddhhmmss.</p></td></tr>
<tr><td><p><tt>-?</tt></p></td><td><p><tt>--help</tt></p></td><td><p>Displays help for the verifier command. If you use this option, you
do not need to specify an EAR, WAR, RAR, or JAR file.</p></td></tr>
<tr><td><p><tt>-V</tt></p></td><td><p><tt>--version</tt></p></td><td><p>Displays the verifier tool version. If you use this option, you do not
need to specify an EAR, WAR, RAR, or JAR file.</p></td></tr>
<tr><td><p><tt>-p</tt></p></td><td><p><tt>--portability</tt></p></td><td><p>Verifies portable features only. By default, the verifier also checks
correct usage of Application Server features in the <tt>sun-*.xml</tt> deployment
descriptor files.</p></td></tr>
<tr><td><p><tt>-a</tt></p></td><td><p><tt>--app</tt></p></td><td><p>Runs only the application tests.</p></td></tr>
<tr><td><p><tt>-A</tt></p></td><td><p><tt>--appclient</tt></p></td><td><p>Runs only the application client tests.</p></td></tr>
<tr><td><p><tt>-c</tt></p></td><td><p><tt>--connector</tt></p></td><td><p>Runs only the connector tests.</p></td></tr>
<tr><td><p><tt>-e</tt></p></td><td><p><tt>--ejb</tt></p></td><td><p>Runs only the EJB tests.</p></td></tr>
<tr><td><p><tt>-w</tt></p></td><td><p><tt>--web</tt></p></td><td><p>Runs only the web module tests.</p></td></tr>
<tr><td><p><tt>-s</tt></p></td><td><p><tt>--webservices</tt></p></td><td><p>Runs only the web service tests.</p></td></tr>
<tr><td><p><tt>-l</tt></p></td><td><p><tt>--webservicesclient</tt></p></td><td><p>Runs only the web service client tests.</p></td></tr>
</table><p>For example, the following command runs the verifier on the <tt>ejb.jar</tt> file with default settings:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>verifier ejb.jar</pre>
</td></table><br><p>The results files are <tt>ejb.jar.txt</tt> and <tt>ejb.jar.xml</tt>.</p>
<p>For a more complex example, the following command runs the verifier
on the <tt>ejb.jar</tt> file in portability mode displaying only
failures and with a timestamp:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>verifier -p -rf -t ejb.jar</pre>
</td></table><br><p>The results files are <tt>ejb.jar</tt><i>timestamp</i><tt>.txt</tt> and <tt>ejb.jar</tt><i>timestamp</i><tt>.xml</tt>. The format of the <i>timestamp</i> is yyyyMMddhhmmss.</p>
<p>If the verifier runs successfully and no verification errors occurred,
a result code of <tt>0</tt> is returned. A nonzero error code is
returned if errors occurred or the verifier fails to run.</p>
<A NAME="beads"></A><h5>Ant Integration</h5>
<p>You can integrate the verifier into an <A NAME="indexterm-39"></A>Ant build file as a target and use the Ant call feature to call
the target each time an application or module is assembled. You can use any
of the arguments described in <A HREF="beact.html#fvyec">Table 1-2</A>.
Example code for an Ant verify target is as follows:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;?xml version="1.0" encoding="iso-8859-1"?>
&lt;project name="Verifier Launcher" default="verify">
    &lt;target name="verify" description="verify using verifier script">
        &lt;exec executable="<i>install-dir</i>/bin/verifier" 
                failonerror="true" vmlauncher="false">
            &lt;arg line="-d /tmp <i>path-to-app</i>"/>
        &lt;/exec>
    &lt;/target>
&lt;/project></pre>
</td></table><br><A NAME="beadt"></A><h5>Sample Results Files</h5>
<p>Here is a sample results XML file:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;static-verification>
 &lt;ejb>
	 &lt;failed>
		 &lt;test>
			 &lt;test-name>
tests.ejb.session.TransactionTypeNullForContainerTX
			&lt;/test-name>
			 &lt;test-assertion>
Session bean with bean managed transaction demarcation test
			&lt;/test-assertion>
			 &lt;test-description>
For [ TheGreeter ] Error: Session Beans [ TheGreeter ] with 
[ Bean ] managed transaction demarcation should not have 
container transactions defined.
			 &lt;/test-description>
		 &lt;/test>
	 &lt;/failed>
 &lt;/ejb>
...
&lt;/static-verification></pre>
</td></table><br><p>Here is a sample results TXT file:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>---------------------------
STATIC VERIFICATION RESULTS
---------------------------


----------------------------------
NUMBER OF FAILURES/WARNINGS/ERRORS
----------------------------------
# of Failures : 1
# of Warnings : 0
# of Errors : 0

-----------------------------
RESULTS FOR EJB-RELATED TESTS
-----------------------------

--------------
FAILED TESTS : 
--------------

Test Name : tests.ejb.ejb30.BusinessIntfInheritance
Test Assertion : A business interface must not extend javax.ejb.EJBObject 
or javax.ejb.EJBLocalObject. Please refer to EJB 3.0 Simplified API Section 
#3.2 for further information.
Test Description : For [ sessionApp#session-ejb.jar#HelloEJB ]
[ com.sun.sample.session.Hello ] extends either javax.ejb.EJBObject or 
javax.ejb.EJBLocalObject.


----------------------------------
END OF STATIC VERIFICATION RESULTS
----------------------------------</pre>
</td></table><br><A NAME="beadu"></A><h2>Deploying Modules and Applications</h2>
<p>This section describes the different ways to deploy Java EE applications
and modules to the Application Server. It covers the following topics:</p>
<ul><li><p><A HREF="beact.html#beadv">Deployment Errors</A></p>
</li>
<li><p><A HREF="beact.html#ablgy">The Deployment Life Cycle</A></p>
</li>
<li><p><A HREF="beact.html#beadw">Deployment for Development</A></p>
</li>
<li><p><A HREF="beact.html#beaeb">Tools for Deployment</A></p>
</li>
<li><p><A HREF="beact.html#beaei">Deployment by Module or Application</A></p>
</li>
<li><p><A HREF="beact.html#gbiye">Deploying a Web Service</A></p>
</li>
<li><p><A HREF="beact.html#beaej">Deploying a WAR Module</A></p>
</li>
<li><p><A HREF="beact.html#beaek">Deploying an EJB JAR Module</A></p>
</li>
<li><p><A HREF="beact.html#beael">Deploying a Lifecycle Module</A></p>
</li>
<li><p><A HREF="beact.html#beaem">Deploying an Application Client</A></p>
</li>
<li><p><A HREF="beact.html#beaen">Deploying a Java EE CA Resource Adapter</A></p>
</li>
<li><p><A HREF="beact.html#beaeo">Access to Shared Frameworks</A></p>
</li>
</ul>
<A NAME="beadv"></A><h3>Deployment Errors</h3>
<A NAME="indexterm-40"></A><A NAME="indexterm-41"></A><p>If an error occurs during deployment, the application or module is not
deployed. If a module within an application contains an error, the entire
application is not deployed. This prevents a partial deployment that could
leave the server in an inconsistent state.</p>
<A NAME="ablgy"></A><h3>The Deployment Life Cycle</h3>
<A NAME="indexterm-42"></A><p>After installing the Application Server and starting a domain, you can deploy
(install) Java EE applications and modules. During deployment and as the application
is changed, an application or module can go through the following stages:</p>
<ol Type="1"><li><p>Initial Deployment</p>
<p>Before deploying an application
or module, start the domain.</p>
<p>Deploy (install)
an application or module. Because applications and modules are packaged in
archive files, specify the archive file name during deployment.</p>
<p><A NAME="indexterm-43"></A><A NAME="indexterm-44"></A>Deployment is <i>dynamic</i>: you don't need
to restart the server instance after deploying application or module for applications
to be available. If you do restart, all deployed applications and modules
are still deployed and available.</p>
</li>
<li><p>Enabling or Disabling</p>
<p>By default, a deployed application
or module is enabled, which means that it is runnable and can be accessed
by clients. To prevent access, disable the application or module.
A disabled application or module is not uninstalled from the domain and can
be easily enabled after deployment. For more information, see <A HREF="beact.html#beady">Disabling a Deployed Application or Module</A>.</p>
</li>
<li><p>Redeployment</p>
<p>To replace a deployed application
or module, redeploy it. Redeploying automatically undeploys the previously
deployed application or module and <A NAME="indexterm-45"></A><A NAME="indexterm-46"></A>replaces it with the new one.</p>
</li>
<li><p>Undeployment</p>
<p>To uninstall an application or module,
undeploy it.</p>
</li>
</ol>
<A NAME="beadw"></A><h3>Deployment for Development</h3>
<p>This section covers the following topics related to deployment for development:</p>
<ul><li><p><A HREF="beact.html#beadx">Dynamic Deployment</A></p>
</li>
<li><p><A HREF="beact.html#beady">Disabling a Deployed Application or Module</A></p>
</li>
<li><p><A HREF="beact.html#beadz">Dynamic Reloading</A></p>
</li>
<li><p><A HREF="beact.html#beaea">Automatic Deployment</A></p>
</li>
<li><p><A HREF="beact.html#ablig">Using a Deployment Plan</A></p>
</li>
</ul>
<p><hr size="1" noshade><p><b>Note - </b>You can overwrite a previously deployed application by using the <tt>--force</tt> option of <A NAME="indexterm-47"></A><A NAME="indexterm-48"></A><A NAME="indexterm-49"></A><tt>asadmin deploy</tt> or by checking the appropriate
box in the Admin Console during deployment. However, you must remove a preconfigured
resource before you can update it.</p>
<hr size="1" noshade></p><A NAME="beadx"></A><h4>Dynamic Deployment</h4>
<A NAME="indexterm-50"></A><A NAME="indexterm-51"></A><A NAME="indexterm-52"></A><A NAME="indexterm-53"></A><p>You can deploy, redeploy, and undeploy an application or module without
restarting the server. This is
called dynamic deployment. Although primarily for developers, dynamic deployment
can be used in operational environments to bring new applications and modules
online without requiring a server restart. </p>
<p><A NAME="indexterm-54"></A>Whenever a redeployment is done, the sessions at that transit
time become invalid. The client must restart the session.</p>
<A NAME="beady"></A><h4>Disabling a Deployed Application or Module</h4>
<A NAME="indexterm-55"></A><A NAME="indexterm-56"></A><A NAME="indexterm-57"></A><p>You can disable a deployed application or module without removing it
from the server. Disabling an application makes it inaccessible to clients.</p>
<p>To disable an application or module using the <tt>asadmin disable</tt> command, see
the <i><A HREF="http://docs.sun.com/app/docs/doc/819-3662"><i>Sun Java System Application Server Platform Edition 9.0 2006Q1 Reference Manual</i></A></i>.</p>
<A NAME="fvyje"></A><p><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To disable an application or module in the Admin Console</p>
<A NAME="indexterm-58"></A><h5>Steps</h5><ol><li><p><b>Open the Applications component.</b></p></li>
<li><p><b>Go to the page for the type of application or module. </b></p><p>For example, for a web application, go to the Web Applications page.</p>
</li>
<li><p><b>Click on the name of the application or module you wish to disable.</b></p></li>
<li><p><b>Uncheck the Status Enabled box.</b></p></li>
</ol><h5>See Also</h5><p>For details, see the <i><A HREF="http://docs.sun.com/app/docs/doc/819-3658"><i>Sun Java System Application Server Platform Edition 9.0 Administration Guide</i></A></i>.</p>
<A NAME="beadz"></A><h4>Dynamic Reloading</h4>
<A NAME="indexterm-59"></A><A NAME="indexterm-60"></A><p>If dynamic reloading is enabled (it is by default), you do not have
to redeploy an application or module when you change its code or deployment
descriptors. All you have to do is copy the changed JSP or class files into
the deployment directory for the application or module. The server checks
for changes periodically and redeploys the application, automatically and
dynamically, with the changes.</p>
<p>This is useful in a development environment, because it allows code
changes to be tested quickly. In a production environment, however, dynamic
reloading might degrade performance. In addition, whenever a reload is done,
the <A NAME="indexterm-61"></A>sessions at that transit time become invalid. The client must
restart the session.</p>
<p>You can also use the <tt>sun-appserv-update</tt> task with
the <tt>asant</tt> utility to update an application or module. See <A HREF="http://docs.sun.com/app/docs/doc/819-3659">Chapter 3, "The asant Utility," in <i>Sun Java System Application Server Platform Edition 9.0 2006Q1 Developer's Guide</i></A>.</p>
<A NAME="fvybc"></A><p><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To enable dynamic reloading in the Admin Console</p>
<A NAME="indexterm-62"></A><h5>Steps</h5><ol><li><p><b>Select the Application Settings component under the relevant configuration.</b></p></li>
<li><p><b>Check the Reload Enabled box to enable dynamic reloading.</b></p></li>
<li><p><b>Enter a number of seconds in the Reload Poll Interval field. </b></p><p>This sets the interval at which applications and modules are
checked for code changes and dynamically reloaded. The default is <tt>2</tt>.</p>
</li>
</ol><h5>See Also</h5><p>For details, see the <i><A HREF="http://docs.sun.com/app/docs/doc/819-3658"><i>Sun Java System Application Server Platform Edition 9.0 Administration Guide</i></A></i>.</p>
<A NAME="fwakh"></A><p><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To reload code or deployment descriptor changes</p>
<h5>Steps</h5><ol><li><p><b>Create an empty file named <A NAME="indexterm-63"></A> <tt>.reload</tt> at the root of the deployed application
or module.</b></p><p>For an application:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre><i>domain-dir</i>/applications/j2ee-apps/<i>app-name</i>/.reload</pre>
</td></table><br><p>For an individually deployed module:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre><i>domain-dir</i>/applications/j2ee-modules/<i>module-name</i>/.reload</pre>
</td></table><br></li>
<li><p><b>Explicitly update the <tt>.reload</tt> file's
timestamp (<tt>touch .reload</tt> in UNIX) each time you make changes.</b></p></li>
</ol><A NAME="beaea"></A><h4>Automatic Deployment</h4>
<p>Automatic deployment, also called <A NAME="indexterm-64"></A><i>autodeployment</i>, involves copying an application
or module file (JAR, WAR, RAR, or EAR) into a special directory, where it
is automatically deployed by the Application Server. To undeploy an automatically
deployed application or module, simply remove its file from the special autodeployment
directory. This is useful in a development environment, because it allows
new code to be tested quickly.</p>
<p>Autodeployment of a web services JSR 181 annotated file is supported.
For more information, see <A HREF="http://www.jcp.org/en/jsr/detail?id=181">JSR 181</A> and <A HREF="http://docs.sun.com/app/docs/doc/819-3659">Chapter 6, "Developing Web Services," in <i>Sun Java System Application Server Platform Edition 9.0 2006Q1 Developer's Guide</i></A>.</p>
<p>Autodeployment is enabled by default.</p>
<A NAME="fvxze"></A><p><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To enable and configure or to disable autodeployment</p>
<h5>Steps</h5><ol><li><p><b>Select the Application Settings component under the relevant configuration.</b></p></li>
<li><p><b>Check the Auto Deploy Enabled box to enable autodeployment, or
uncheck this box to disable autodeployment.</b></p></li>
<li><p><b>Enter a number of seconds in the Auto Deploy Poll Interval field.</b></p><p>This sets the interval at which applications and modules are
checked for code changes and dynamically reloaded. The default is <tt>2</tt>.</p>
</li>
<li><p><b>You can change the Auto Deploy Directory if you like. </b></p><p>You can enter an absolute or relative path. A relative path is relative
to <i>domain-dir</i>. The default is <i>domain-dir</i><tt>/autodeploy</tt>. </p>
</li>
<li><p><b>You can check the Verifier Enabled box to verify your deployment
descriptor files. This is optional. </b></p><p>For details about the verifier,
see <A HREF="beact.html#beadq">The Verifier Utility</A>.</p>
</li>
<li><p><b>Check the Precompile Enabled box to precompile any JSP files.</b></p></li>
</ol><h5>See Also</h5><p>For details, see the <i><A HREF="http://docs.sun.com/app/docs/doc/819-3658"><i>Sun Java System Application Server Platform Edition 9.0 Administration Guide</i></A></i>.</p>
<A NAME="ablig"></A><h4>Using a Deployment Plan</h4>
<p><A NAME="indexterm-65"></A><A NAME="indexterm-66"></A>This feature is for advanced developers.</p>
<p>A deployment plan is an JAR file that contains only the deployment descriptors
that are specific to the Application Server. The deployment plan is part of the
implementation of JSR 88. Use a deployment plan to deploy an application or
module that does not contain the deployment descriptors that are specific
to the Application Server. For more information about JSR 88, see the JSR 88 page
at <A HREF="http://jcp.org/en/jsr/detail?id=88">http://jcp.org/en/jsr/detail?id=88</A>.</p>
<p>To deploy using a deployment plan, specify the <tt>--deploymentplan</tt> option of the <tt>asadmin deploy</tt> command. The following
command, for example, deploys the enterprise application in the <tt>myrostapp.ear</tt> file according to the plan specified by the <tt>mydeployplan.jar</tt> file.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>$ asadmin deploy --user admin --deploymentplan mydeployplan.jar myrostapp.ear</pre>
</td></table><br><p>In the deployment plan file for an enterprise application (EAR), the <tt>sun-application.xml</tt> file is located at the root. The deployment
descriptor for each module is stored according to this syntax: <i>module-name.sun-dd-name</i>, where the <i>sun-dd-name</i> depends on the module type. If a module contains a CMP mappings
file, the file is named <i>module-name</i><tt>.sun-cmp-mappings.xml</tt>. A <tt>.dbschema</tt> file is stored at the root level
with each forward slash character (/) replaced by a pound sign (#). The following
listing shows the structure of the deployment plan file for an enterprise
application (EAR).</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>$ jar -tvf mydeployplan.jar
420 Thu Mar 13 15:37:48 PST 2003 sun-application.xml
370 Thu Mar 13 15:37:48 PST 2003 RosterClient.war.sun-web.xml
418 Thu Mar 13 15:37:48 PST 2003 roster-ac.jar.sun-application-client.xml
1281 Thu Mar 13 15:37:48 PST 2003 roster-ejb.jar.sun-ejb-jar.xml
2317 Thu Mar 13 15:37:48 PST 2003 team-ejb.jar.sun-ejb-jar.xml
3432 Thu Mar 13 15:37:48 PST 2003 team-ejb.jar.sun-cmp-mappings.xml
84805 Thu Mar 13 15:37:48 PST 2003 team-ejb.jar.RosterSchema.dbschema</pre>
</td></table><br><p>In the deployment plan for a web application or a module file, the deployment
descriptor that is specific to the Application Server is at the root level. If
a stand-alone EJB module contains a CMP bean, the deployment plan includes
the <tt>sun-cmp-mappings.xml</tt> and <tt>.dbschema</tt> files
at the root level. In the following listing, the deployment plan describes
a CMP bean.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>$ jar r -tvf myotherplan.jar
3603 Thu Mar 13 15:24:20 PST 2003 sun-ejb-jar.xml
3432 Thu Mar 13 15:24:20 PST 2003 sun-cmp-mappings.xml
84805 Thu Mar 13 15:24:20 PST 2003 RosterSchema.dbschema</pre>
</td></table><br><A NAME="beaeb"></A><h3>Tools for Deployment</h3>
<A NAME="indexterm-67"></A><A NAME="indexterm-68"></A><p>This section discusses the various tools that can be used to deploy
modules and applications. The deployment tools include:</p>
<ul><li><p><A HREF="beact.html#beaec">The asant Utility</A></p>
</li>
<li><p><A HREF="beact.html#beaee">JSR 88</A></p>
</li>
<li><p><A HREF="beact.html#beaeg">The asadmin Deployment Commands</A></p>
</li>
<li><p><A HREF="beact.html#beaeh">The Admin Console Deployment Pages</A></p>
</li>
</ul>
<A NAME="beaec"></A><h4>The asant Utility</h4>
<p>The <tt>asant</tt> utility can help you assemble and deploy
modules and applications. For details, see <A HREF="http://docs.sun.com/app/docs/doc/819-3659">Chapter 3, "The asant Utility," in <i>Sun Java System Application Server Platform Edition 9.0 2006Q1 Developer's Guide</i></A>.</p>
<A NAME="beaee"></A><h4>JSR 88</h4>
<A NAME="indexterm-69"></A><A NAME="indexterm-70"></A><p>You can write your own JSR 88 client to deploy applications to the Application Server.
For more information, see the JSR 88 page at <A HREF="http://jcp.org/en/jsr/detail?id=88">http://jcp.org/en/jsr/detail?id=88</A>.</p>
<p>See <A HREF="beact.html#beacz">Naming Standards</A> for application
and module naming considerations.</p>
<A NAME="beaeg"></A><h4>The asadmin Deployment Commands</h4>
<p><A NAME="indexterm-71"></A><A NAME="indexterm-72"></A><A NAME="indexterm-73"></A><A NAME="indexterm-74"></A>You can use the <tt>asadmin deploy</tt> or <tt>asadmin deploydir</tt> command to deploy or undeploy applications and
individually deployed modules on local servers. For details, see the <i><A HREF="http://docs.sun.com/app/docs/doc/819-3662"><i>Sun Java System Application Server Platform Edition 9.0 2006Q1 Reference Manual</i></A></i>.</p>
<p>To deploy a lifecycle module, see <A HREF="beact.html#beael">Deploying a Lifecycle Module</A>.</p>
<p><hr size="1" noshade><p><b>Note - </b>On Windows, if you are deploying a directory on a mapped drive,
you must be running the Application Server as the same user to which the mapped
drive is assigned, or the Application Server won't see the directory.</p>
<hr size="1" noshade></p><A NAME="beaeh"></A><h4>The Admin Console Deployment Pages</h4>
<p><A NAME="indexterm-75"></A><A NAME="indexterm-76"></A>You can use the Admin Console to deploy modules and applications
to both local and remote Application Server sites. </p>
<A NAME="fvyfv"></A><p><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To use the Admin Console for deployment</p>
<h5>Steps</h5><ol><li><p><b>Open the Applications component.</b></p></li>
<li><p><b>Go to the page for the type of application or module.</b></p><p>For example, for a web application, go to the Web Applications page. </p>
</li>
<li><p><b>Type the path to the WAR, JAR, EAR, or RAR file.</b></p></li>
<li><p><b>Click on the Deploy button.</b></p><p>You can<A NAME="indexterm-77"></A> undeploy, enable, or disable an application or module from this
page. You can also change deployment settings that vary according to the type
of application or module.</p>
</li>
</ol><h5>See Also</h5><p>For details, see the <i><A HREF="http://docs.sun.com/app/docs/doc/819-3658"><i>Sun Java System Application Server Platform Edition 9.0 Administration Guide</i></A></i>.</p>
<p>To deploy a lifecycle module, see <A HREF="beact.html#beael">Deploying a Lifecycle Module</A>.</p>
<A NAME="beaei"></A><h3>Deployment by Module or Application</h3>
<p>You can deploy applications or individual modules that are independent
of applications; see <A HREF="beact.html#beacv">Modules</A> and <A HREF="beact.html#beacw">Applications</A>. <A NAME="indexterm-78"></A><A NAME="indexterm-79"></A>Individual module-based deployment is preferable when components
need to be accessed by:</p>
<ul><li><p>Other modules</p>
</li>
<li><p>Java EE Applications</p>
</li>
<li><p>ACC clients (Module-based deployment allows shared access
to a bean from an ACC client, a servlet, or an EJB component.)</p>
</li>
</ul>
<p>Modules can be combined into an EAR file and then deployed as a single
module. This is similar to deploying the modules of the EAR independently.</p>
<A NAME="gbiye"></A><h3>Deploying a Web Service</h3>
<A NAME="indexterm-80"></A><p>You deploy a web service endpoint to the Application Server just as you would
any servlet or stateless session bean (SLSB). You can use the <tt>--registryjndiname</tt> option of the <tt>asadmin deploy</tt> command to publish
the web service as part of deployment, but this is optional. See <A HREF="beact.html#beaeb">Tools for Deployment</A>.</p>
<p>To deploy a JSR 181 annotated file, use the autodeployment feature.
You can compile and deploy in one step, as in the following example:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>javac -cp javaee.jar -d <i>domain-dir</i>/autodeploy MyWS.java</pre>
</td></table><br><p>For more information about JSR 181, see <A HREF="http://jcp.org/en/jsr/detail?id=181">http://jcp.org/en/jsr/detail?id=181</A>. For more information about autodeployment, see <A HREF="beact.html#beaea">Automatic Deployment</A>.</p>
<p>The Sun-specific deployment descriptor files <tt>sun-web.xml</tt> and <tt>sun-ejb-jar.xml</tt> provide optional web service enhancements in their <A HREF="beaqi.html#beayv">webservice-endpoint</A> and <A HREF="beaqi.html#beayt">webservice-description</A> elements.</p>
<p>For more information about web services, see <A HREF="http://www.jcp.org/en/jsr/detail?id=181">JSR 181</A> and <A HREF="http://docs.sun.com/app/docs/doc/819-3659">Chapter 6, "Developing Web Services," in <i>Sun Java System Application Server Platform Edition 9.0 2006Q1 Developer's Guide</i></A>.</p>
<A NAME="beaej"></A><h3>Deploying a WAR Module</h3>
<A NAME="indexterm-81"></A><A NAME="indexterm-82"></A><p>You deploy a WAR module as described in <A HREF="beact.html#beaeb">Tools for Deployment</A>. If you do not specify a context root, the default
is the name of the WAR file without the extension.</p>
<p>If a web application accesses a <tt>DataSource</tt> that is
not specified in a <tt>resource-ref</tt> in <tt>sun-web.xml</tt>, or there is no <tt>sun-web.xml</tt> file, the <tt>resource-ref-name</tt> defined in <tt>web.xml</tt> is used.
 A warning message is logged recording the JNDI name used to look up the resource.</p>
<p><A NAME="indexterm-83"></A><A NAME="indexterm-84"></A><A NAME="indexterm-85"></A>You can precompile JSP files during deployment by checking the
appropriate box in the Admin Console or by using the <tt>--precompilejsp</tt> option of the <tt>asadmin deploy</tt> or <tt>asadmin
deploydir</tt> command. The <tt>asant</tt> tasks <tt>sun-appserv-deploy</tt> and <tt>sun-appserv-jspc</tt> also
allow you to precompile JSP files. For more information, see <A HREF="http://docs.sun.com/app/docs/doc/819-3659">Chapter 3, "The asant Utility," in <i>Sun Java System Application Server Platform Edition 9.0 2006Q1 Developer's Guide</i></A>.</p>
<p><A NAME="indexterm-86"></A><A NAME="indexterm-87"></A><A NAME="indexterm-88"></A><A NAME="indexterm-89"></A>You can keep the generated source for JSP files by adding the <tt>-keepgenerated</tt> flag to the <tt>jsp-config</tt> element
in <tt>sun-web.xml</tt>. If you include this property when you deploy
the WAR module, the generated source is kept in <i>domain-dir</i><tt>/generated/jsp/j2ee-apps/</tt><i>app-name</i><tt>/</tt><i>module-name</i> if it is in an application or <i>domain-dir</i><tt>/generated/jsp/j2ee-modules/</tt><i>module-name</i> if
it is in an individually deployed web module.</p>
<p>For more information about JSP precompilation, see <A HREF="http://docs.sun.com/app/docs/doc/819-3659">"Options for Compiling JSP Files" in <i>Sun Java System Application Server Platform Edition 9.0 2006Q1 Developer's Guide</i></A> and <A HREF="beaqi.html#beatx">jsp-config</A>.</p>
<A NAME="beaek"></A><h3>Deploying an EJB JAR Module</h3>
<A NAME="indexterm-90"></A><A NAME="indexterm-91"></A><p>You deploy an EJB JAR module as described in <A HREF="beact.html#beaeb">Tools for Deployment</A>.</p>
<p>If no JNDI name for the EJB JAR module is specified in the <tt>jndi-name</tt> element immediately under the <tt>ejb</tt> element
in <tt>sun-ejb-jar.xml</tt>, or there is no <tt>sun-ejb-jar.xml</tt> file, a default, non-clashing JNDI name is derived. A warning message
is logged recording the JNDI name used to look up the EJB JAR module.</p>
<p>You can keep the generated source for <A NAME="indexterm-92"></A>stubs and ties by adding the <A NAME="indexterm-93"></A><tt>-keepgenerated</tt> flag to the <A NAME="indexterm-94"></A><tt>rmic-options</tt> attribute of the <A NAME="indexterm-95"></A><tt>java-config</tt> element in <A NAME="indexterm-96"></A><tt>domain.xml</tt>. If you include this flag when you
deploy the <A NAME="indexterm-97"></A>EJB JAR module, the generated source is kept in <i>domain-dir</i><tt>/generated/ejb/j2ee-apps/</tt><i>app-name</i><tt>/</tt><i>module-name</i> if it is in an application
or <i>domain-dir</i><tt>/generated/ejb/j2ee-modules/</tt><i>module-name</i> if it is in an individually deployed EJB JAR module.
For more information about the <tt>-keepgenerated</tt> flag, see
the <i><A HREF="http://docs.sun.com/app/docs/doc/819-3661"><i>Sun Java System Application Server Platform Edition 9.0 2006Q1 Administration Reference</i></A></i>.</p>
<p>Generation of <A NAME="indexterm-98"></A>stubs and ties is performed asynchronously, so unless you request
their generation during deployment (for example, using the <tt>--retrieve</tt> option of the <tt>asadmin deploy</tt> command), stubs
and ties are not guaranteed to be available immediately after deployment.
You can use the <A NAME="indexterm-99"></A><tt>asadmin get-client-stubs</tt> command to retrieve
the stubs and ties whether or not you requested their generation during deployment.
For details, see
the <i><A HREF="http://docs.sun.com/app/docs/doc/819-3662"><i>Sun Java System Application Server Platform Edition 9.0 2006Q1 Reference Manual</i></A></i>.</p>
<A NAME="beael"></A><h3>Deploying a Lifecycle Module</h3>
<p>For general information about <A NAME="indexterm-100"></A><A NAME="indexterm-101"></A>lifecycle modules, see <A HREF="http://docs.sun.com/app/docs/doc/819-3659">Chapter 12, "Developing Lifecycle Listeners," in <i>Sun Java System Application Server Platform Edition 9.0 2006Q1 Developer's Guide</i></A>.</p>
<p>You can deploy a lifecycle module using the following tools:</p>
<ul><li><p>In the <A NAME="indexterm-102"></A>Admin Console, open the Applications component and go to the
Lifecycle Modules page. For details, see the <i><A HREF="http://docs.sun.com/app/docs/doc/819-3658"><i>Sun Java System Application Server Platform Edition 9.0 Administration Guide</i></A></i>.</p>
</li>
<li><p>Use the <A NAME="indexterm-103"></A><tt></tt><tt>asadmin create-lifecycle-module</tt> command.
For details, see
the <i><A HREF="http://docs.sun.com/app/docs/doc/819-3662"><i>Sun Java System Application Server Platform Edition 9.0 2006Q1 Reference Manual</i></A></i>.</p>
</li>
</ul>
<p><hr size="1" noshade><p><b>Note - </b>If the <A NAME="indexterm-104"></A><tt>is-failure-fatal</tt> setting is set to <tt>true</tt> (the default is <tt>false</tt>), lifecycle module
failure prevents server initialization or startup, but not shutdown or termination.</p>
<hr size="1" noshade></p><A NAME="beaem"></A><h3>Deploying an Application Client</h3>
<A NAME="indexterm-105"></A><A NAME="indexterm-106"></A><A NAME="indexterm-107"></A><p>Deployment is only necessary for application clients that communicate
with EJB components. </p>
<p>Java Web Start is supported for application clients and for applications
that contain application clients. It is enabled by default both in application
clients and in the Application Server.</p>
<p>If you are using Java Web Start, you should deploy the application or
application client as an EAR or JAR file rather than using directory deployment.
Java Web Start uses JAR files, which means that the Application Server must JAR
application client files during deployment, resulting in slower performance.</p>
<p>This section contains the following topics:</p>
<ul><li><p><A HREF="beact.html#fvyal">To deploy an application client</A></p>
</li>
<li><p><A HREF="beact.html#fwahd">To prepare another machine for executing an application client</A></p>
</li>
<li><p><A HREF="beact.html#gavpv">Undeployment of Application Clients</A></p>
</li>
</ul>
<A NAME="fvyal"></A><h4><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To deploy an application client</h4>
<h5>Steps</h5><ol><li><p><b>Assemble the necessary client files. </b></p></li>
<li><p><b>Assemble the EJB components to be accessed by the client.</b></p></li>
<li><p><b>Package the client and EJB components together in an application.</b></p></li>
<li><p><b>Deploy the application as described in <A HREF="beact.html#beaeb">Tools for Deployment</A>.</b></p></li>
<li><p><b>If Java Web Start is <i>not</i> enabled for the
application client, retrieve the client JAR file.</b></p><p>The client JAR
file contains the ties and necessary classes for the ACC client. </p>
<p>You can use the <tt>--retrieve</tt> option to get the <A NAME="indexterm-108"></A><A NAME="indexterm-109"></A>client JAR file.</p>
<p>You can also use the <A NAME="indexterm-110"></A><tt>asadmin get-client-stubs</tt> command to retrieve
the stubs and ties whether or not you requested their generation during deployment.
For details, see
the <i> <A HREF="http://docs.sun.com/app/docs/doc/819-3662"><i>Sun Java System Application Server Platform Edition 9.0 2006Q1 Reference Manual</i></A></i>.</p>
</li>
<li><p><b>If Java Web Start is <i>not</i> enabled for the
application client, copy the client JAR file to the client machine, and set
the APPCPATH environment variable on the client to point to this JAR.</b></p></li>
</ol><h5>Next Steps</h5><p>You can execute the client on the Application Server machine to test it in
one of the following ways:</p>
<ul><li><p>If Java Web Start is enabled for the application client, use
the Launch button on the App Client Modules page to launch the application
client using Java Web Start.</p>
</li>
<li><p><A NAME="indexterm-111"></A>If Java Web Start is <i>not</i> enabled for the
application client, use the <tt>appclient</tt> script in the <i>install-dir</i><tt>/bin</tt> directory.The only required option is <tt>-client</tt>. For example:</p>
<p><tt>appclient -client converterClient.jar</tt></p>
<p>The <tt>-xml</tt> parameter specifies the location of the <tt>sun-acc.xml</tt> file.</p>
</li>
</ul>
<h5>See Also</h5><p>For more detailed information about Java Web Start, see <A HREF="http://docs.sun.com/app/docs/doc/819-3659">Chapter 10, "Developing Java Clients," in <i>Sun Java System Application Server Platform Edition 9.0 2006Q1 Developer's Guide</i></A>. </p>
<p>For more detailed information about the <tt>appclient</tt> script,
see the <A HREF="http://docs.sun.com/app/docs/doc/819-3662"><i>Sun Java System Application Server Platform Edition 9.0 2006Q1 Reference Manual</i></A>.</p>
<A NAME="fwahd"></A><h4><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To prepare another machine for executing an application
client</h4>
<A NAME="indexterm-112"></A><p>If Java Web Start is enabled, the default URL for an application is
as follows:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>http://<i>host</i>:<i>port</i>/<i>context-root</i></pre>
</td></table><br><p>The default URL for a stand-alone application client module is as follows:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>http://<i>host</i>:<i>port</i>/<i>module-id</i></pre>
</td></table><br><p>If the <i>context-root</i> or <i>module-id</i> is not specified during deployment, the name of the EAR or
JAR file without the extension is used. For an application, the relative path
to the application client JAR file is also included. If the application or
module is not in EAR or JAR file format, a <i>context-root</i> or <i>module-id</i> is generated. </p>
<p>Regardless of how the <i>context-root</i> or <i>module-id</i> is determined, it is written to the server log. For
details about naming, see <A HREF="beact.html#beacz">Naming Standards</A>.</p>
<p>To set a different URL for an application client, use the <tt>context-root</tt> subelement of the <A HREF="beaqi.html#gauax">java-web-start-access</A> element in the <tt>sun-application-client.xml</tt> file.</p>
<p>If Java Web Start is <i>not</i> enabled for the application
client, follow these steps.</p>
<h5>Steps</h5><ol><li><p><b><A NAME="indexterm-113"></A>You can use the <tt>package-appclient</tt> script in
the <i>install-dir</i><tt>/bin</tt> directory to create the ACC package
JAR file. This is optional. </b></p><p>This JAR file is created in the <i>install-dir</i><A NAME="indexterm-114"></A><A NAME="indexterm-115"></A> <tt>/lib/appclient</tt> directory.</p>
</li>
<li><p><b>Copy the ACC package JAR file to the client machine and unjar
it.</b></p></li>
<li><p><b>Configure the <A NAME="indexterm-116"></A> <tt>sun-acc.xml</tt> file.</b></p><p>This file is
located in the <tt>appclient/appserv/lib/appclient</tt> directory
by default if you used the <tt>package-appclient</tt> script.</p>
</li>
<li><p><b>Configure the <A NAME="indexterm-117"></A> <tt>asenv.conf</tt> (<tt>asenv.bat</tt> on
Windows) file.</b></p><p>This file is located in <tt>appclient/appserv/bin</tt> by default if you used the <tt>package-appclient</tt> script.</p>
</li>
<li><p><b>Copy the client JAR file to the client machine. </b></p><p>You are now ready to execute the client.</p>
</li>
</ol><h5>See Also</h5><p>For more detailed information about Java Web Start and the <tt>package-appclient</tt> script, see <A HREF="http://docs.sun.com/app/docs/doc/819-3659">Chapter 10, "Developing Java Clients," in <i>Sun Java System Application Server Platform Edition 9.0 2006Q1 Developer's Guide</i></A>.</p>
<A NAME="gavpv"></A><h4>Undeployment of Application Clients</h4>
<p>Once application clients are downloaded, they remain on the client until
removed manually.  The Java Web Start control panel provides a simple interface
you can use to discard downloaded application clients that used Java Web Start.
 When you undeploy an application client, you can no longer use Java Web Start,
or any other mechanism, to download the application client. If you try to
launch an application client that was previously downloaded even though the
server side of the application client is no longer present, the results depend
on whether the application client has been written to tolerate such situations.</p>
<p>You can write your application client to detect failures in contacting
server-side components and to continue running anyway. In this case, Java
Web Start can run an undeployed application client as it is cached locally.
For example, your application client can be written to catch and recover from
a <tt>javax.naming.NamingException</tt> in locating a resource or
a <tt>java.rmi.RemoteException</tt> in referring to a previously-located
resource that becomes inaccessible.</p>
<A NAME="beaen"></A><h3>Deploying a Java EE CA Resource Adapter</h3>
<A NAME="indexterm-118"></A><A NAME="indexterm-119"></A><p>You deploy a connector module as described in <A HREF="beact.html#beaeb">Tools for Deployment</A>. After deploying the module, you must configure
it as described in <A HREF="http://docs.sun.com/app/docs/doc/819-3659">Chapter 11, "Developing Connectors," in <i>Sun Java System Application Server Platform Edition 9.0 2006Q1 Developer's Guide</i></A>.</p>
<A NAME="beaeo"></A><h3>Access to Shared Frameworks</h3>
<A NAME="indexterm-120"></A><A NAME="indexterm-121"></A><p>When Java EE applications and modules use shared framework classes (such
as utility classes and libraries) the classes can be put in the path for the
System Classloader, the Common Classloader, or an application-specific class
loader rather than in an application or module. If you assemble a large, shared
library into every module that uses it, the result is a huge file that takes
too long to register with the server. In addition, several versions of the
same class could exist in different classloaders, which is a waste of resources.
For more information, see <A HREF="http://docs.sun.com/app/docs/doc/819-3659">Chapter 2, "Class Loaders," in <i>Sun Java System Application Server Platform Edition 9.0 2006Q1 Developer's Guide</i></A>.</p>

            <!--stopindex-->
<br>
<A HREF="p1.html">Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="beaqi.html">Next</A>
</body>
</html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <style type="text/css"> /* <![CDATA[ */
 @import "/branding/css/tigris.css";
 @import "/branding/css/inst.css";
 /* ]]> */</style>
  <link rel="stylesheet" type="text/css" href="/branding/css/print.css"
 media="print">
  <script src="/branding/scripts/tigris.js" type="text/javascript"></script>
  <title>glassfish: GlassFish Project - Monitoring</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <meta name="version" content="3.5.1.19.4">
  <meta http-equiv="Content-Type"
 content="text/html; charset=iso-8859-1">
<!--
		@page { size: 8.27in 11.69in; margin: 0.79in }
		P { margin-bottom: 0.08in }
	-->
</head>
<body style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);"
 dir="ltr" lang="en-US">
<div id="projecthome" dir="ltr">
<p><b><font size="4">&nbsp;One Pager CallFlow/Monitoring.next</font></b><br>
<!--StartFragment --></p>
<br>
<table border="1" cellpadding="2" width="756">
  <tbody>
    <tr>
      <td>
      <p><b>Table of Contents</b><br>
      <a href="#1">1. Introduction</a><br>
      </p>
      <blockquote> <a href="#11">1.1 </a><a
 href="http://www.glassfishplanet.org/wiki/attach/OnePagersOrFunctionalSpecs/one-pager.html#11">Project/Component
Working Name</a><br>
        <a href="#12">1.2&nbsp; Name(s) and e-mail address of
Document
Author(s)/Supplier</a><br>
        <a href="#13">1.3. Date of This Document</a> </blockquote>
      <a href="#2">2. Project Summary</a><br>
      <blockquote> <a href="#21">2.1 Project Description</a><br>
        <a href="#22">2.2 Risks and Assumptions</a><br>
      </blockquote>
      <a href="#3">3. Problem Summary</a><br>
      <blockquote> <a href="#31">3.1 Problem Area</a><br>
        <a href="#32">3.2 Justification</a><br>
      </blockquote>
      <a href="#4">4. Technical Description</a><br>
      <blockquote>
        <p><a href="#41">4.1 Details</a><br>
        <a href="#42">4.2 Bugs/RFE's</a><br>
        <a href="#43">4.3 Scope</a><br>
        <a href="#44">4.4 Out-of-scope</a><br>
        <a href="#45">4.5 Interfaces</a><br>
        <a href="#46">4.6 Documentation Impact</a><br>
        <a href="#47">4.7 Configuration/administration Impact</a><br>
        <a href="#48">4.8 High Availability Impact</a><br>
        <a href="#49">4.9 Internationalization</a><br>
        <a href="#410">4.10 Packaging</a><br>
        <a href="#411">4.11 Security Impact</a><br>
        <a href="#412">4.12 Compatibility</a><br>
        <a href="#412">4.12 Dependencies</a></p>
      </blockquote>
      <p><a href="#5">5. References</a><br>
      <a href="#6">6. Schedule </a> <br>
      </p>
      <p><br>
      </p>
      <h3>1. <a name="1"></a>Introduction</h3>
&nbsp;&nbsp;&nbsp; 1.1. <a name="1.1"></a>Project/Component Working
Name:<br>
      <br>
&nbsp;&nbsp;&nbsp; &nbsp;CallFlow.Next/Monitoring enhancements<br>
      <br>
&nbsp;&nbsp;&nbsp; 1.2. <a name="12"></a>Name(s) and e-mail address of
Document
Author(s)/Supplier:<br>
      <br>
&nbsp;&nbsp;&nbsp; &nbsp;Harpreet Singh: harpreet.singh@sun.com<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Siraj Ghaffar :
siraj.ghaffar@sun.com<br>
      <br>
&nbsp;&nbsp;&nbsp; 1.3. <a name="13"></a>Date of This Document:<br>
&nbsp;&nbsp;&nbsp; &nbsp; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 25th August 2006.<br>
      <br>
      <h3>2. <a name="2"></a>Project Summary</h3>
&nbsp;&nbsp;&nbsp; 2.1. <a name="21"></a>Project Description:<br>
      <br>
&nbsp;&nbsp;&nbsp; &nbsp;o This project builds on CallFlow delivered in
9.0 and<br>
&nbsp;&nbsp;&nbsp; &nbsp;provides an "Application Level CallFlow View".
      <br>
&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp; &nbsp; o It widens the CallFlow base to incorporate
information<br>
&nbsp;&nbsp;&nbsp; &nbsp;about JPA entities.<br>
      <br>
&nbsp;&nbsp;&nbsp; &nbsp;o Provide Performance Improvement to the
CallFlow<br>
&nbsp;&nbsp;&nbsp; &nbsp;Layer. <br>
      <br>
&nbsp;&nbsp;&nbsp; &nbsp;o Provide a CallFlow.Lite mode that does not
require a<br>
&nbsp;&nbsp;&nbsp; &nbsp;Database and will provide an aggregate view
for an<br>
&nbsp;&nbsp;&nbsp; &nbsp;application <br>
&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp; 2.2. <a name="22"></a>Risks and Assumptions: <br>
      <br>
&nbsp;&nbsp;&nbsp; &nbsp;o EJB container team will need to provide
hooks for JPA. <br>
      <br>
&nbsp;&nbsp;&nbsp; &nbsp;o Some of the features require Admin GUI
changes and CLI changes<br>
      <br>
      <br>
      <h3>3. <a name="3"></a>Problem Summary</h3>
&nbsp;&nbsp;&nbsp; 3.1. <a name="31"></a>Problem Area:<br>
&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp; &nbsp;o CallFlow base will expand to provide
information about JPA<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; entities.&nbsp; <br>
      <br>
&nbsp;&nbsp;&nbsp; &nbsp;o Current CallFlow view provides a view for
each request. In<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; addition CallFlow will
provide a view grouped by applications<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; and show timing
information per container, per method for<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; each application.
Thus, you can get a birds eye view of all<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; applications and then
drill down to look at individual<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; requests per
application.<br>
      <br>
&nbsp;&nbsp;&nbsp; &nbsp;o Provide a CallFlow.Lite mode that does not
require database<br>
&nbsp;&nbsp;&nbsp; &nbsp;availability. This lite mode will just provide
aggregate<br>
&nbsp;&nbsp;&nbsp; &nbsp;information for applications and containers.
This mode will<br>
&nbsp;&nbsp;&nbsp; &nbsp;be less resource intensive than CallFlow
regular mode and can<br>
&nbsp;&nbsp;&nbsp; &nbsp;possibly be turned on all the time. You will
not be able to<br>
&nbsp;&nbsp;&nbsp; &nbsp;drill down and view individual request for
each mode.<br>
      <br>
      <br>
&nbsp;&nbsp;&nbsp; 3.2<a name="32"></a>. Justification:<br>
      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; o Provides an
Application View that is more intuitive and<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; useful and does not
overwhelm the user with a lot of<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; information for
mutiple requests..<br>
      <br>
&nbsp;&nbsp;&nbsp; &nbsp;o Since JPA spec was not final during CallFlow<br>
&nbsp;&nbsp;&nbsp; &nbsp;implementation, we do not monitor JPA
entities. We address<br>
&nbsp;&nbsp;&nbsp; &nbsp;this hole in this release.<br>
      <br>
&nbsp;&nbsp;&nbsp; &nbsp;o CallFlow.Lite gives us the
(optional)capability to monitor<br>
&nbsp;&nbsp;&nbsp; &nbsp;applications all the time without overhead of
database. This<br>
&nbsp;&nbsp;&nbsp; &nbsp;information can be used to turn on regular
CallFlow to get<br>
&nbsp;&nbsp;&nbsp; &nbsp;detailed view into Application behaviour. We
can use this<br>
&nbsp;&nbsp;&nbsp; &nbsp;feature for sophisticated Root Cause Analysis
features<br>
&nbsp;&nbsp;&nbsp; &nbsp;envisioned for v3. This provides the framework
on which Root<br>
&nbsp;&nbsp;&nbsp; &nbsp;Cause Analysis features for v3 can be built.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
      <br>
      <h3>4.<a name="4"></a> Technical Description:</h3>
&nbsp;&nbsp;&nbsp;&nbsp; 4.1. <a name="41"></a>Details:<br>
      <br>
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp; &nbsp; The project aims to address performance
issues in the<br>
&nbsp;&nbsp;&nbsp; &nbsp; CallFlow layer. It will widen the entities
that will be<br>
&nbsp;&nbsp;&nbsp; &nbsp; monitored by CallFlow to include JPA. It will
provide a<br>
&nbsp;&nbsp;&nbsp; &nbsp; "Lite" feature that will will not require a
database.<br>
&nbsp;&nbsp;&nbsp; &nbsp; <br>
&nbsp;&nbsp;&nbsp; &nbsp; <br>
&nbsp;&nbsp;&nbsp; &nbsp;4.1.1 CallFlow Specific Features<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp; &nbsp;4.1.1.1 Performance Improvement<br>
      <br>
&nbsp;&nbsp;&nbsp; &nbsp;In 9.0, a Asynchronous Writer was implemented
to write out<br>
&nbsp;&nbsp;&nbsp; &nbsp;CallFlow data to the database. Performance
analysis shows the<br>
&nbsp;&nbsp;&nbsp; &nbsp;Asynchronous writer is heavy. An alternative
implementation<br>
&nbsp;&nbsp;&nbsp; &nbsp;has shown about 6x performance improvement.
This performant<br>
&nbsp;&nbsp;&nbsp; &nbsp;code will be integrated in V2.<br>
      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4.1.1.2. CallFlow View
Grouped by Application<br>
&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp; &nbsp;Current CallFlow implementation tracks
information at request<br>
&nbsp;&nbsp;&nbsp; &nbsp;level. Inspite of its use, a developer or an
administrator<br>
&nbsp;&nbsp;&nbsp; &nbsp;does not get a birds eye view of the
application<br>
&nbsp;&nbsp;&nbsp; &nbsp;performance. We will group requests at
Application Level, a<br>
&nbsp;&nbsp;&nbsp; &nbsp;user can quickly visualize the application
performance,<br>
&nbsp;&nbsp;&nbsp; &nbsp;container performance. If he wishes to drill
deeper, we can<br>
&nbsp;&nbsp;&nbsp; &nbsp;take him to the Requests View.<br>
      <br>
&nbsp;&nbsp;&nbsp; &nbsp;This has a dependency on the Admin GUI team.<br>
      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4.1.1.3. JPA Entities<br>
      <br>
&nbsp;&nbsp;&nbsp; &nbsp;JPA spec was not finalized CallFlow was
written. We will<br>
&nbsp;&nbsp;&nbsp; &nbsp;widen the base for CallFlow by monitoring JPA
entities.<br>
&nbsp;&nbsp;&nbsp; &nbsp;Additional hooks will be required from the EJB
container<br>
&nbsp;&nbsp;&nbsp; &nbsp;group to monitor this information.<br>
      <br>
&nbsp;&nbsp;&nbsp; &nbsp;This has a dependency on the core EJB
container group.<br>
      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4.1.1.4 CallFlow Lite<br>
      <br>
&nbsp;&nbsp;&nbsp; &nbsp;We will implement a new layer called
"CallFlow.Lite" that<br>
&nbsp;&nbsp;&nbsp; &nbsp;does not require the database. CallFlow.Lite
will store only<br>
&nbsp;&nbsp;&nbsp; &nbsp;aggregate information about each layer per
application. This<br>
&nbsp;&nbsp;&nbsp; &nbsp;information can be gleaned today from CallFlow
layer, it<br>
&nbsp;&nbsp;&nbsp; &nbsp;requires database to be on all the time.
CF.Lite<br>
&nbsp;&nbsp;&nbsp; &nbsp;implementation will provide a framework for
future Root Cause<br>
&nbsp;&nbsp;&nbsp; &nbsp;Analysis work. This can (optionally) allow us
to keep the<br>
&nbsp;&nbsp;&nbsp; &nbsp;CallFlow layer on all the time. We envision
that Root Cause<br>
&nbsp;&nbsp;&nbsp; &nbsp;Analysis work will use CF.Lite to pro-actively
monitor<br>
&nbsp;&nbsp;&nbsp; &nbsp;applications.<br>
      <br>
&nbsp;&nbsp;&nbsp; &nbsp;This has a dependency on the Admin GUI team.<br>
      <br>
      <br>
&nbsp;&nbsp;&nbsp;&nbsp; 4.2. <a name="42"></a>Bug/RFE Number(s):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4.2.1 Improved JNDI browser
(RFE #6338601). This will impact admin gui.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4.2.2 Improvements to
CLI&nbsp;&nbsp; monitoring facilities (parts of RFE# 6454161). This
will impact CLI.<br>
      <br>
&nbsp;&nbsp;&nbsp;&nbsp; 4.3.<a name="43"></a> In Scope:<br>
      <br>
      <br>
&nbsp;&nbsp;&nbsp;&nbsp; 4.4. <a name="44"></a>Out of Scope:<br>
      <br>
      <br>
&nbsp;&nbsp;&nbsp;&nbsp; 4.5. <a name="45"></a>Interfaces:<br>
      <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4.5.1 Exported Interfaces<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4.5.2 Imported interfaces<br>
      <br>
&nbsp;&nbsp;&nbsp;&nbsp; 4.6.<a name="46"></a> Documentation Impact:<br>
      <br>
&nbsp;&nbsp;&nbsp; &nbsp; Administration Guide will be impacted for
these<br>
&nbsp;&nbsp;&nbsp; &nbsp; features. The online Admin GUI will need to
incorporate<br>
&nbsp;&nbsp;&nbsp; &nbsp; these features. The inline help will be
modified.<br>
      <br>
&nbsp;&nbsp;&nbsp;&nbsp; 4.7. <a name="47"></a>Configuration/Administration
Impact: <br>
      <br>
&nbsp;&nbsp;&nbsp; &nbsp; Admin cli will need an option to specify
callflow<br>
&nbsp;&nbsp;&nbsp; &nbsp; lite. Admin GUI will be impacted.<br>
      <br>
&nbsp;&nbsp;&nbsp;&nbsp; 4.8. <a name="48"></a>HA Impact:<br>
      <br>
&nbsp;&nbsp;&nbsp;&nbsp; 4.9. <a name="49"></a>Internationalization
Impact:<br>
      <br>
      <br>
&nbsp;&nbsp;&nbsp;&nbsp; 4.10. <a name="410"></a>Packaging &amp;
Delivery:<br>
      <br>
&nbsp;&nbsp;&nbsp;&nbsp; 4.11. <a name="411"></a>Security Impact:<br>
      <br>
&nbsp;&nbsp;&nbsp;&nbsp; 4.12. <a name="412"></a>Compatibility Impact<br>
      <br>
&nbsp;&nbsp;&nbsp;&nbsp; 4.13. Dependencies:<br>
      <br>
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; Project has partial dependencies on
Admin GUI and EJB Container team for providing JPA statistics.<br>
      <br>
      <h3>5. <a name="5"></a>Reference Documents:</h3>
      <br>
      <br>
      <h3>6. <a name="6"></a>Schedule:</h3>
&nbsp; <br>
&nbsp;&nbsp;&nbsp; <br>
      <br>
      </td>
    </tr>
  </tbody>
</table>
</div>
</body>
</html>

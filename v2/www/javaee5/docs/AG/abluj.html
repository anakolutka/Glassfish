<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html><!-- GenHTML@12751-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<!-- ident	"%Z%%M%	%I%	%E% SMI" -->

    <title>16.&nbsp;&nbsp;Configuring Logging
    </title>
</head>
<body>
<font style="color: red; font-family:arial,helvetica,sans-serif; font-size:12pt; font-weight:bold}">Not For Publication</font>&nbsp;&nbsp;&nbsp;<br>Glassfish Review Draft<br> </td>

<A href="toc.html">Sun Java System Application Server Platform Edition 9 Administration Guide</A>&nbsp;<br>
<A HREF="abluc.html">Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="ablur.html">Next</A><br>
            <!--startindex--><A NAME="abluj"></A><b>Chapter&nbsp;16</b><h1>Configuring Logging</h1>
<p>This chapter briefly describes how to use the Admin Console to configure logging
and view the server log. It contains the following sections:</p>
<ul><li><p><A HREF="abluj.html#abluk">About Logging</A></p>
</li>
<li><p><A HREF="abluj.html#ablun">Admin Console Tasks for Logging</A></p>
</li>
</ul>
<A NAME="abluk"></A><h2>About Logging</h2>
<ul><li><p><A HREF="abluj.html#ablul">Log Records</A></p>
</li>
<li><p><A HREF="abluj.html#ablum">The Logger Namespace Hierarchy</A></p>
</li>
</ul>
<A NAME="ablul"></A><h3>Log Records</h3>
<A NAME="indexterm-337"></A><A NAME="indexterm-338"></A><p>The Application Server uses the Java 2 platform Logging API specified in JSR 047. Application Server logging
messages are recorded in the server log, normally found at <i>domain-dir</i><tt>/logs/server.log</tt>.</p>
<p>The <i>domain-dir</i><tt>/logs</tt> directory contains two other kinds of
logs in addition to the server log. In the <tt>access</tt> subdirectory
are the HTTP Service access logs, and in the <tt>tx</tt> subdirectory are
the Transaction Service logs. For information about these logs, see LINK REMOVED To
configure the HTTP service access log and <A HREF="ablsn.html#ablss">Configuring Transactions</A>.</p>
<p>The components of the Application Server generate logging output. Application components
can also generate logging output.</p>
<p>Application components may use the Apache Commons Logging Library to log messages.
The platform standard JSR 047 API, however, is recommended for better log configuration.</p>
<p>Log records follow a uniform format:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>[#|<i>yyyy</i>-<i>mm</i>-<i>dd</i>T<i>hh</i>:<i>mm</i>:<i>ss</i>.<i>SSS</i>-<i>Z</i>|<i>Log Level</i>|<i>ProductName-Version</i>|<i>LoggerName</i>|<i>Key Value Pairs</i>|<i>Message</i>|#]</pre>
</td></table><br><p>For example:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>[#|2004-10-21T13:25:53.852-0400|INFO|sun-appserver-epe8.1|javax.enterprise.
system.core|_ThreadID=13;|CORE5004: Resource Deployed: 
[cr:jms/DurableConnectionFactory].|#]</pre>
</td></table><br><p>In this example,</p>
<ul><li><p><tt>[#</tt> and <tt>#]</tt> mark the beginning
and end of the record.</p>
</li>
<li><p>The vertical bar (<tt>|</tt>) separates the record fields.</p>
</li>
<li><p><tt>2004-10-21T13:25:53.852-0400</tt> specifies the date
and time.</p>
</li>
<li><p>The <i>Log Level</i> is <tt>INFO</tt>. This
level may have any of the following values: <tt>SEVERE</tt>, <tt>WARNING</tt>, <tt>INFO</tt>, <tt>CONFIG</tt>, <tt>FINE</tt>, <tt>FINER</tt>, and <tt>FINEST</tt>.</p>
</li>
<li><p>The <i>ProductName-Version</i> is <tt>sun-appserver-pe8.1</tt>.</p>
</li>
<li><p>The <i>LoggerName</i> is a hierarchical logger namespace
that identifies the source of the log module, in this case <tt>javax.enterprise.system.core</tt>.</p>
</li>
<li><p>The <i>Key Value Pairs</i> are key names and values,
typically a thread ID such as <tt>_ThreadID=14;</tt>.</p>
</li>
<li><p>The <i>Message</i> is the text of the log message. For
all Application Server <tt>SEVERE</tt> and <tt>WARNING</tt> messages
and many <tt>INFO</tt> messages, it begins with a message ID that consists
of a module code and a numerical value (in this case, <tt>CORE5004</tt>).</p>
</li>
</ul>
<p>The log record format might be changed or enhanced in future releases.</p>
<p>See Also:</p>
<ul><li><p><A HREF="abluj.html#ablum">The Logger Namespace Hierarchy</A></p>
</li>
</ul>
<A NAME="ablum"></A><h3>The Logger Namespace Hierarchy</h3>
<A NAME="indexterm-339"></A><p>The Application Server provides a logger for each of its modules. The following table
lists the names of the modules and the namespace for each logger in alphabetical order,
as they appear on the Log Levels page of the Admin Console (see <A HREF="abluj.html#ablup">To configure log levels</A>). The last three modules in the table do not appear
on the Log Levels page.</p>
<p><b>Table 16-1 </b>Application Server Logger Namespaces</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Module Name</p></th><th scope="col"><p>Namespace</p></th></tr>
<tr><td><p>Admin</p></td><td><p><tt>javax.enterprise.system.tools.admin</tt></p></td></tr>
<tr><td><p>Classloader</p></td><td><p><tt>javax.enterprise.system.core.classloading</tt></p></td></tr>
<tr><td><p>CMP</p></td><td><p><tt>javax.enterprise.system.container.cmp</tt></p></td></tr>
<tr><td><p>Configuration</p></td><td><p><tt>javax.enterprise.system.core.config</tt></p></td></tr>
<tr><td><p>Connector</p></td><td><p><tt>javax.enterprise.resource.resourceadapter</tt></p></td></tr>
<tr><td><p>CORBA</p></td><td><p><tt>javax.enterprise.resource.corba</tt></p></td></tr>
<tr><td><p>Deployment</p></td><td><p><tt>javax.enterprise.system.tools.deployment</tt></p></td></tr>
<tr><td><p>EJB Container</p></td><td><p><tt>javax.enterprise.system.container.ejb</tt></p></td></tr>
<tr><td><p>JavaMail</p></td><td><p><tt>javax.enterprise.resource.javamail</tt></p></td></tr>
<tr><td><p>JAXR</p></td><td><p><tt>javax.enterprise.resource.webservices.registry</tt></p></td></tr>
<tr><td><p>JAX-RPC</p></td><td><p><tt>javax.enterprise.resource.webservices.rpc</tt></p></td></tr>
<tr><td><p>JDO</p></td><td><p><tt>javax.enterprise.resource.jdo</tt></p></td></tr>
<tr><td><p>JMS</p></td><td><p><tt>javax.enterprise.resource.jms</tt></p></td></tr>
<tr><td><p>JTA</p></td><td><p><tt>javax.enterprise.resource.jta</tt></p></td></tr>
<tr><td><p>JTS</p></td><td><p><tt>javax.enterprise.system.core.transaction</tt></p></td></tr>
<tr><td><p>MDB Container</p></td><td><p><tt>javax.enterprise.system.container.ejb.mdb</tt></p></td></tr>
<tr><td><p>Naming</p></td><td><p><tt>javax.enterprise.system.core.naming</tt></p></td></tr>
<tr><td><p>Node Agent (Enterprise Edition only)</p></td><td><p><tt>javax.ee.enterprise.system.nodeagent</tt></p></td></tr>
<tr><td><p>Root</p></td><td><p><tt>javax.enterprise</tt></p></td></tr>
<tr><td><p>SAAJ</p></td><td><p><tt>javax.enterprise.resource.webservices.saaj</tt></p></td></tr>
<tr><td><p>Security</p></td><td><p><tt>javax.enterprise.system.core.security</tt></p></td></tr>
<tr><td><p>Server</p></td><td><p><tt>javax.enterprise.system</tt></p></td></tr>
<tr><td><p>Synchronization (Enterprise Edition only)</p></td><td><p><tt>javax.ee.enterprise.system.tools.synchronization</tt></p></td></tr>
<tr><td><p>Util</p></td><td><p><tt>javax.enterprise.system.util</tt></p></td></tr>
<tr><td><p>Verifier</p></td><td><p><tt>javax.enterprise.system.tools.verifier</tt></p></td></tr>
<tr><td><p>Web Container</p></td><td><p><tt>javax.enterprise.system.container.web</tt></p></td></tr>
<tr><td><p>Core</p></td><td><p><tt>javax.enterprise.system.core</tt></p></td></tr>
<tr><td><p>System Output (<tt>System.out.println</tt>)</p></td><td><p><tt>javax.enterprise.system.stream.out</tt></p></td></tr>
<tr><td><p>System Error (<tt>System.err.println</tt>)</p></td><td><p><tt>javax.enterprise.system.stream.err</tt></p></td></tr>
</table><p>See Also:</p>
<ul><li><p><A HREF="abluj.html#ablul">Log Records</A></p>
</li>
<li><p><A HREF="abluj.html#ablup">To configure log levels</A></p>
</li>
</ul>
<A NAME="ablun"></A><h2>Admin Console Tasks for Logging</h2>
<ul><li><p><A HREF="abluj.html#abluo">To configure general logging settings</A></p>
</li>
<li><p><A HREF="abluj.html#ablup">To configure log levels</A></p>
</li>
<li><p><A HREF="abluj.html#abluq">To view the server log</A></p>
</li>
</ul>
<A NAME="abluo"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To configure general logging settings</h3>
<A NAME="indexterm-340"></A><h5>Steps</h5><ol><li><p><b>In the tree component, select the Application Server node.</b></p></li>
<li><p><b>Click the Logging tab.</b></p></li>
<li><p><b>On the Logging Settings page, use the following fields to customize logging:</b></p><ul><li><p><b>Log File</b> -- To specify an
alternative name or location for the server log file, type the new path name in the
text field. By default, the location is <i>domain-dir</i><tt>/logs/server.log</tt>.</p>
</li>
<li><p><b>Alarms</b> -- To route <tt>SEVERE</tt> and <tt>WARNING</tt> messages through the JMX framework,
select the Enabled checkbox.</p>
</li>
<li><p><b>Write to System Log</b> -- On
Solaris and Linux systems only, to send logging output to the <tt>syslog</tt> facility
in addition to the server log, select the Enabled checkbox.</p>
</li>
<li><p><b>Log Handler</b> -- To send logs
to a destination other than <tt>server.log</tt> or <tt>syslog</tt>,
you can plug in a custom log handler. The custom handler must extend the class <tt>java.util.logging.Handler</tt> (a JSR 047 compliant API). Type the absolute class
name of the handler in the Log Handler field. Also put the handler class in the Application Server classpath
so that the handler is installed during server startup. The log records from the custom
handler will have the format described in <A HREF="abluj.html#ablul">Log Records</A>.</p>
</li>
<li><p><b>Log Filter</b> -- To filter log
records that are sent to destinations such as <tt>server.log</tt>, <tt>syslog</tt>, or a destination specified by a custom log handler, you can plug
in a custom log filter. The custom filter must implement the interface <tt>java.util.logging.Filter</tt>. Type the absolute class name of the filter in the Log Filter field. Also
put the filter class in the Application Server classpath so that the filter is installed
during server startup.</p>
</li>
<li><p><b>File Rotation Limit</b>: When the server
log reaches the specified size in bytes, create a new, empty file named <tt>server.log</tt> and rename the old file <tt>server.log_</tt><i>date</i>, where <i>date</i> is the date and time when
the file was rotated. The default value is 2 megabytes. The minimum value for the
limit is 500 kilobytes; if you specify a lower value, the file rotates when it reaches
500 KB. To turn off log file rotation, set the value to 0.</p>
</li>
<li><p><b>File Rotation Time Limit</b> --
Rotate the server log after the specified number of minutes is reached. The default
value is zero, which means that the file is rotated when it reaches the size specified
in the File Rotation Limit field. <i>If you specify one or more minutes, the
time limit takes precedence over the size limit.</i></p>
</li>
</ul>
</li>
<li><p><b>Click Save to save changes. Click View Log Files to view the server log.</b></p></li>
<li><p><b>Stop and restart the Application Server.</b></p></li>
</ol><h5>See Also</h5><ul><li><p><A HREF="abluj.html#ablul">Log Records</A></p>
</li>
<li><p><A HREF="abluj.html#ablum">The Logger Namespace Hierarchy</A></p>
</li>
<li><p><A HREF="abluj.html#ablup">To configure log levels</A></p>
</li>
<li><p><A HREF="abluj.html#abluq">To view the server log</A></p>
</li>
</ul>
<A NAME="ablup"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To configure log levels</h3>
<A NAME="indexterm-341"></A><A NAME="indexterm-342"></A><h5>Steps</h5><ol><li><p><b>In the tree component, select the Application Server node.</b></p></li>
<li><p><b>Click the Logging tab.</b></p></li>
<li><p><b>On the Logging
Settings page, click the Log Levels tab.</b></p></li>
<li><p><b>On the Module Log Levels page, choose a new value from the drop-down list
opposite the module or modules whose log level is to be changed. </b></p><p>The
default level is <tt>INFO</tt>, meaning that messages at that level or higher
(<tt>WARNING</tt>, <tt>SEVERE</tt>) appear in the log. Choose
any of the following values (listed from highest to lowest):</p>
<ul><li><p><tt>SEVERE</tt></p>
</li>
<li><p><tt>WARNING</tt></p>
</li>
<li><p><tt>INFO</tt></p>
</li>
<li><p><tt>CONFIG</tt></p>
</li>
<li><p><tt>FINE</tt></p>
</li>
<li><p><tt>FINER</tt></p>
</li>
<li><p><tt>FINEST</tt></p>
</li>
<li><p><tt>OFF</tt></p>
</li>
</ul>
</li>
<li><p><b>Use the Additional Properties area to configure log levels for any application
loggers. </b></p><p>The property name is the logger namespace, and the value is
one of the eight possible levels. For example, the property name could be <tt>samples.logging.simple.servlet</tt>, and the value could be <tt>FINE</tt>.</p>
<p>Also use this area to change the log level for a submodule, such as the
transport submodule of the CORBA module:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>javax.enterprise.resource.corba.<i>ORBId</i>.transport</pre>
</td></table><br></li>
<li><p><b>Click Save to save the changes, or click Default to restore the default
values.</b></p><p>Calls to <tt>System.out.println</tt> are logged at the <tt>INFO</tt> level using the logger name <tt>javax.enterprise.system.stream.out</tt>. Calls to <tt>System.err.println</tt> are logged at the <tt>WARNING</tt> level using the logger name <tt>javax.enterprise.system.stream.err</tt>. To turn off the logs from these sources, specify the logger name with
the value <tt>OFF</tt> in the Additional Properties area.</p>
<p>Changes
to the Log Level settings take effect immediately. They are also saved in the <tt>domain.xml</tt> file for use when the server restarts.</p>
</li>
</ol><h5>See Also</h5><ul><li><p><A HREF="abluj.html#ablul">Log Records</A></p>
</li>
<li><p><A HREF="abluj.html#ablum">The Logger Namespace Hierarchy</A></p>
</li>
<li><p><A HREF="abluj.html#abluo">To configure general logging settings</A></p>
</li>
<li><p><A HREF="abluj.html#abluq">To view the server log</A></p>
</li>
</ul>
<A NAME="abluq"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To view the server log</h3>
<A NAME="indexterm-343"></A><A NAME="indexterm-344"></A><h5>Steps</h5><ol><li><p><b>In the tree component, select the Application Server node.</b></p></li>
<li><p><b>Click the Logging tab.</b></p></li>
<li><p><b>On the Logging
Settings page, click View Log Files.</b></p></li>
<li><p><b>Use the Search Criteria area to customize and filter the log viewer. Use
the basic fields as follows:</b></p><ul><li><p><b>Instance Name</b> -- Choose an
instance name from the drop-down list to view the log for that server instance. The
default is the current server instance.</p>
</li>
<li><p><b>Log File</b> -- Choose a log file
name from the drop-down list to view the contents of that log. The default is <tt>server.log</tt>.</p>
</li>
<li><p><b>Timestamp</b> -- To view the most
recent messages, select Most Recent (the default). To view messages only from a certain
period of time, select Specific Range and type a date and time value in the From and
To fields that appear. For the Time value, the syntax must take the following form
(<i>SSS</i> stands for milliseconds):</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre><i>hh</i>:<i>mm</i>:<i>ss</i>.<i>SSS</i></pre>
</td></table><br><p>For example:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>17:10:00.000</pre>
</td></table><br><p>If the From value is later than the To value, an error message appears.</p>
</li>
<li><p><b>Log Level</b> -- To filter messages
by log level, choose a log level from the drop-down list. By default, the display
includes all messages that appear in the server log at the chosen log level and more
severe levels. Select the checkbox labeled "Do not include more severe messages"
to display messages at only the chosen level.</p>
<p>To ensure that the messages
you want to view appear in the server log, first set the appropriate log levels on
the Log Levels page.  See <A HREF="abluj.html#ablup">To configure log levels</A></p>
<p>If you choose to filter log messages based on log level, only messages matching
the specified filter criteria are shown.  However, this filtering does not affect
which messages are logged to the server log.</p>
<p>The most recent 40 entries
in the server log appear, with the settings specified on the Logging Settings and
Log Levels pages.</p>
<p>Click the triangle next to the Timestamp header to sort
the messages so that the most recent one appears last.</p>
<p>To view a formatted
version of any message, click the link marked</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>(details)</pre>
</td></table><br><p>A window labeled Log Entry Detail appears, with a formatted version of the message.</p>
<p>At the end of the list of entries, click the buttons to view earlier
or later entries in the log file.</p>
<p>Click Advanced Search in the Search
Criteria area to make additional refinements to the log viewer. Use the Advanced Options
fields as follows:</p>
</li>
<li><p><b>Logger</b> -- To filter by module,
choose one or more namespaces from the drop-down list. Use shift-click or control-click
to choose multiple namespaces.</p>
<p>Selecting a namespace at a higher level
selects all the namespaces below it. For example, selecting <tt>javax.enterprise.system</tt> also selects the loggers for all the modules under that namespace: <tt>javax.enterprise.system.core</tt>, <tt>javax.enterprise.system.tools.admin</tt>, and so on.</p>
</li>
<li><p><b>Custom Logger</b> -- To view messages
from loggers specific to a particular application, type the logger names in the text
field, one per line. If the application has several modules, you can view any or all
of them. For example, suppose the application has loggers with the following names:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>com.mycompany.myapp.module1
com.mycompany.myapp.module2
com.mycompany.myapp.module3</pre>
</td></table><br><p>To view messages from all modules in the application, type <tt>com.mycompany.myapp</tt>. To view messages from <tt>module2</tt> only, type <tt>com.mycompany.myapp.module2</tt>.</p>
<p>When you specify one or more custom
loggers, messages from Application Server modules appear only if you specify them explicitly
in the Logger area.</p>
</li>
<li><p><b>Name-Value Pairs</b> -- To view
output from a specific thread, type the key name and value for that thread in the
text field. The key name is <tt>_ThreadID</tt>. For example:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>_ThreadID=13</pre>
</td></table><br><p>Suppose that <tt>com.mycompany.myapp.module2</tt> runs in several
threads. To refine the log viewer to show only the output from a single thread, specify
that module's logger in the Custom Logger field, and then specify the thread
ID in this field.</p>
</li>
<li><p><b>Display</b> -- To view more than
40 messages at a time (the default), choose another of the available values from the
drop-down list (100, 250, or 1000).</p>
<p>To view stack traces, deselect the "Limit
excessively long messages" checkbox. By default, stack traces do not appear
in the viewer; to view them, click the <tt>(details)</tt> link for a message.</p>
<p>Click Basic Search to hide the Advanced Options area.</p>
</li>
</ul>
</li>
</ol><h5>See Also</h5><ul><li><p><A HREF="abluj.html#ablul">Log Records</A></p>
</li>
<li><p><A HREF="abluj.html#ablum">The Logger Namespace Hierarchy</A></p>
</li>
<li><p><A HREF="abluj.html#abluo">To configure general logging settings</A></p>
</li>
<li><p><A HREF="abluj.html#ablup">To configure log levels</A></p>
</li>
</ul>

            <!--stopindex-->
<br>
<A HREF="abluc.html">Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="ablur.html">Next</A>
</body>
</html>

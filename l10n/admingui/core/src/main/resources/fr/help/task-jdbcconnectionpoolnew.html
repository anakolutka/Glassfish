<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>

<!--

-->

<head>

  <meta http-equiv="Content-type" content="text/html; charset=utf-8">
  <!-- ident      "%Z%%M% %I%     %E% SMI" -->

  <title>Créer un pool de connexions JDBC - Aide en ligne de la console d'administration de Sun GlassFish Enterprise Server v3 Prelude
  </title>
  <script language="JavaScript1.2">
    linktag = window.parent.frames[0].document.getElementsByTagName('link');
    for (var i = 0; i < linktag.length; i++) {
        if (linktag[i].rel == "stylesheet") {
            var s = "<link rel=" + linktag[i].rel + " type='text/css' href=" + linktag[i].href + " />";
            document.write(s);
        }
    }
  </script>

</head>

<body class="HlpBdy">



<a name="task-jdbcconnectionpoolnew"></a><h4>Créer un pool de connexions JDBC</h4><p>Lors de la création d'un pool de connexions à l'aide de la
Console d’administration, vous définissez les aspects d'une connexion à une base de
données spécifique.</p><h6>Avant de commencer</h6><p>Pour créer un pool de connexions, vous devez d'abord installer et intégrer
un pilote prenant en charge l'API JDBC (pilote JDBC). Voir <a href="task-integratejdbcdriver.html">Intégrer un pilote JDBC</a>.</p><p>Les informations suivantes sont requises pour créer le pool de connexions JDBC.
Rassemblez ces informations avant de procéder :</p>
<ul><li><p>Nom du fournisseur de base de données</p></li>
<li><p>Type de ressource, notamment <tt>javax.sql.DataSource</tt> (transactions locales uniquement), <tt>java.sql.ConnectionPoolDataSource</tt> (transactions locales, améliorations possibles des performances) et <tt>javax.sql.XADataSource </tt> (transactions globales)</p></li>
<li><p>Nom de la classe de source de données</p></li>
<li><p>Propriétés requises, telles que le nom de la base de données (URL), nom de l'utilisateur et mot de passe</p></li></ul>
<ol>
<li><b>Dans l'arborescence de navigation, sélectionnez le nœud Tâches courantes.</b></li>
<li><b>Dans la page Tâches courantes, cliquez sur le bouton Créer un nouveau
pool de connexions JDBC.</b><p>La page Nouveau pool de connexions JDBC (étape 1 sur 2) s'ouvre.</p>
<hr><p><b>Remarque – </b>Vous pouvez également accéder à la page Pool de connexions JDBC en
développant les nœuds Ressources et JDBC et en sélectionnant le nœud Pools
de connexions. Sélectionnez l'option Nouveau sur la page Nouveau pool de connexions
pour créer un pool de connexions.</p>
<hr>
</li>
<li><b>Dans le champ Nom, entrez le nom du nouveau pool de connexions.</b><p>Ce champ est obligatoire.</p></li>
<li><b>Dans la liste déroulante Type de ressource, sélectionnez un type de ressource.</b><p>Les options incluent : <tt>javax.sql.XADataSource</tt> (transactions globales) et <tt>java.sql.ConnectionPoolDataSource</tt> (transactions locales, améliorations
possibles des performances), <tt>javax.sql.DataSource </tt> (transactions locales seulement).</p></li>
<li><b>Dans la liste déroulante Fournisseur de base de données, sélectionnez un fournisseur
de base de données.</b></li>
<li><b>Cliquez sur Suivant.</b><p>La page Nouveau pool de connexions JDBC (étape 2 sur 2) s'ouvre.</p></li>
<li><b>Dans le champ Nom de classe de la source de données, entrez
le nom de la classe spécifique au fournisseur qui implémente les API
DataSource et/ou XADataSource.</b></li>
<li><b>Dans le champ Description, entrez une brève description du pool de connexions.</b></li>
<li><b>Dans le champ Taille initiale et minimale du pool, entrez le nombre
minimal de connexions pour ce pool.</b><p>Cette valeur détermine également le nombre de connexions placées dans le pool
lors de la création initiale du pool ou du démarrage du serveur
d'application. La valeur par défaut est 8.</p></li>
<li><b>Dans le champ Taille maximale du pool, entrez le nombre maximal de
connexions pour ce pool.</b><p>La valeur par défaut est 32.</p></li>
<li><b>Dans le champ Valeur de redimensionnement du pool, entrez le nombre de
connexions par lot de redimensionnement du pool.</b><p>Lorsque le pool augmente ou diminue à la taille maximale et minimale
respectivement, il est redimensionné par lots. Cette valeur détermine le nombre de
connexions dans le lot. Une valeur trop élevée retarde la création et
le recyclage de la connexion, alors qu'une valeur trop basse affecte les
performances. La valeur par défaut est 2.</p></li>
<li><b>Dans le champ Délai d'inactivité, entrez le délai maximal, en secondes, durant
lequel une connexion peut demeurer inactive dans le pool.</b><p>Une fois ce délai expiré, la connexion est supprimée du pool. 
La valeur par défaut est 30.</p></li>
<li><b>Dans le champ Attente max., entrez le délai maximal, en millisecondes, durant
lequel l'application demandant une connexion attend avant que la connexion n'arrive à
expiration.</b><p>La valeur par défaut est 60,000.</p></li>
<li><b>Cochez la case Validation des connexions requise pour activer la validation des
connexions.</b><p>La validation des connexions permet au serveur de se reconnecter en cas
d'échec.</p></li>
<li><b>Dans la liste déroulante Méthode de validation, sélectionnez une méthode de validation.</b><p>Le serveur d'application peut valider des connexions à la base de données
de trois manières : validation automatique, méta-données et table.</p><dl><dt>Validation automatique et métadonnées </dt>
<dd><p>Le serveur d'application valide une connexion en appelant les méthodes <tt>con.getAutoCommit</tt> et <tt>con.getMetaData</tt>. </p>
<hr><p><b>Remarque – </b>La plupart des pilotes JDBC mettent en cache le résultat de ces appels. Par conséquent, l'utilisation de ces appels ne donne pas toujours une validation fiable. Contactez votre fournisseur de pilotes pour savoir si ces appels sont mis ou non en cache.</p>
<hr>
</dd>
<dt>Table</dt>
<dd><p>L'application interroge la table de base de données indiquée. La table doit exister et être accessible, mais ne requiert aucune ligne. N'utilisez pas une table existante comportant un nombre important de lignes ou une table déjà fréquemment consultée. </p></dd>
</dl>
</li>
<li><b>Si vous sélectionnez Table dans la liste déroulante Méthode de validation, entrez
ensuite le nom de la table de base de données dans le
champ Nom de la table.</b><p>Le nom ne peut contenir que des caractères alphanumériques, des caractères de
soulignement, des tirets ou des points.</p></li>
<li><b>Cochez la case Fermer toutes les connexions sur tout échec pour que
le serveur ferme toutes les connexions du pool et les rétablisse lorsqu'une
connexion échoue.</b><p>Si cette case à cocher est désactivée, les connexions individuelles ne sont
rétablies que lorsqu'elles sont utilisées.</p></li>
<li><b>Cochez la case Autoriser des programmes appelants non composant pour que le
pool puisse être utilisé par des appelants non-composant.</b><p>Les modules Filtres de servlet et Cycle de vie sont des exemples
d'appelants non-composant.</p></li>
<li><b>Cochez la case Connexions non transactionnelles pour revenir aux connexions non transactionnelles.</b></li>
<li><b>Dans la liste déroulante Niveau d'isolement des transactions, sélectionnez le niveau d'isolement
des transactions de ce pool de connexions.</b><p>Si aucune valeur n'est spécifiée, les connexions sont établies au niveau d'isolement
par défaut indiqué par le pilote JDBC.</p></li>
<li><b>La case à cocher Niveau d'isolement garanti ne s'applique que lorsqu'un niveau
d'isolement de transaction a été spécifié à l'étape 20.</b><p>Si la case à cocher Garanti est activée, toutes les connexions empruntées
au pool partagent le même niveau d'isolement. Par exemple, si le niveau
d'isolement de la connexion est systématiquement modifié (avec <tt>con.setTransactionIsolation</tt>) lors de sa
dernière utilisation, ce mécanisme rétablit l'état au niveau d'isolement spécifié.</p></li>
<li>(Facultatif) <b>Dans la section Autres propriétés, spécifiez d'autres propriétés.</b><p>Le nom de la base de données (URL), le nom d'utilisateur et
le mot de passe sont des exemples de propriétés requises. Les propriétés
variant d'un fournisseur de bases de données à l'autre, consultez la documentation
de chacun pour plus d'informations.</p></li>
<li><b>Cliquez sur Terminer.</b></li></ol><h6>Voir aussi</h6>
<ul><li><p><a href="task-setdbaccess.html">Configurer l'accès à la base de données</a></p></li>
<li><p><a href="task-integratejdbcdriver.html">Intégrer un pilote JDBC</a></p></li>
<li><p><a href="task-jdbcresourcenew.html">Créer une ressource JDBC</a></p></li>
<li><p><a href="task-jdbcresourcesedit.html">Modifier une ressource JDBC</a></p></li>
<li><p><a href="task-jdbcresourcesdelete.html">Supprimer une ressource JDBC</a></p></li>
<li><p><a href="task-jdbcconnectionpooledit.html">Modifier les paramètres généraux du pool de connexions JDBC</a></p></li>
<li><p><a href="task-jdbcconnectionpooladvance.html">Modifier les attributs avancés d'un pool de connexions JDBC</a></p></li>
<li><p><a href="task-verifyconnpoolsettings.html">Vérifier les paramètres du pool de connexions</a></p></li>
<li><p><a href="task-jdbcconnectionpoolproperty.html">Modifier les propriétés du pool de connexions JDBC</a></p></li>
<li><p><a href="task-jdbcconnectionpooldelete.html">Supprimer un pool de connexions JDBC</a></p></li></ul>

<br/>

</body>
</html>

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<rng:grammar xmlns:x="http://www.w3.org/1999/xhtml" xmlns:rng="http://relaxng.org/ns/structure/1.0" datatypeLibrary="http://www.w3.org/2001/XMLSchema-datatypes">
<start xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:ias="http://www.sun.com/ias/validation">
    <choice>
      <ref name="domain"/>
    </choice>
  </start>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="boolean">
    <choice>
      <value>yes</value>
      <value>no</value>
      <value>on</value>
      <value>off</value>
      <value>1</value>
      <value>0</value>
      <value>true</value>
      <value>false</value>
    </choice>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="isolation">
    <choice>
      <value>read-uncommitted</value>
      <value>read-committed</value>
      <value>repeatable-read</value>
      <value>serializable</value>
    </choice>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="validation-level">
    <choice>
      <value>full</value>
      <value>parsing</value>
      <value>none</value>
    </choice>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="object-type">
    <x:div class="dtd">
      defines the type of the resource. It can be:
    </x:div>
    <choice>
      <value x:desc="These are system resources for all instances and DAS">system-all</value>
      <value x:desc="These are system resources only in DAS">system-admin</value>
      <value x:desc="These are system resources only in instances (and not DAS)">system-instance</value>
      <value x:desc="User resources (This is the default for all elements)">user</value>
    </choice>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="rjmx-protocol">
    <x:div class="dtd">
      SE/EE related ENTITIES: This will define the available JSR 160
      connector transport protocols.
    </x:div>
    <choice>
      <value>rmi_jrmp</value>
      <value>rmi_iiop</value>
      <value>jmxmp</value>
    </choice>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="monitoring-level">
    <x:div class="dtd">
      monitoring-level controls the amount of monitoring data
      collected and exposed to clients
    </x:div>
    <choice>
      <value x:desc="no monitoring/statistical data is exposed to the clients.">OFF</value>
      <value x:desc="SE/EE only">LOW</value>
      <value x:desc="maximum data is gathered and released.">HIGH</value>
    </choice>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="session-save-frequency">
    <choice>
      <value>web-method</value>
      <value>time-based</value>
      <value>on-demand</value>
    </choice>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="session-save-scope">
    <choice>
      <value>session</value>
      <value>modified-session</value>
      <value>modified-attribute</value>
    </choice>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="apply-to-type">
    <choice>
      <value>request</value>
      <value>response</value>
      <value>both</value>
    </choice>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="lb-policy-type">
    <choice>
      <value>round-robin</value>
      <value>weighted-round-robin</value>
      <value>user-defined</value>
    </choice>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="event-type">
    <choice>
      <value>log</value>
      <value>timer</value>
      <value>trace</value>
      <value>monitor</value>
      <value>cluster</value>
      <value>lifecycle</value>
      <value>notification</value>
    </choice>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="file-type">
    <data type="string"/>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="unix-fs-safe-name-type">
    <data type="string">
      <param name="pattern">[\p{L}\p{N}_][\p{L}\p{N}\-_.;]*</param>
    </data>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="name-type">
    <data type="string">
      <param name="pattern">[\p{L}\p{N}_][\p{L}\p{N}\-_./;#]*</param>
    </data>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="web-service-name-type">
    <data type="string">
      <param name="pattern">[\p{L}\p{N}_][\p{L}\p{N}\-_./;]*#[\p{L}\p{N}_][\p{L}\p{N}\-_./;]*</param>
    </data>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="jndi-unique-type">
    <data type="string">
      <param name="pattern">[^':,][^':,]*</param>
    </data>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="jmx-safe-key-type">
    <data type="string">
      <param name="pattern">[^':,][^':,]*</param>
    </data>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="message-layer">
    <choice>
      <value>SOAP</value>
      <value>HttpServlet</value>
    </choice>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="port-type">
    <data type="positiveInteger">
      <param name="maxInclusive">65535</param>
    </data>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="classname-type">
    <data type="string"/>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="IPAddress-type">
    <data type="string"/>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="domain">
    <element name="domain">
      <x:div class="dtd">
        Top level Domain Element that includes applications,
        resources, configs, servers, clusters and node-agents, load
        balancer configurations and load balancers.  node-agents and
        load balancers are SE/EE related entities only.
      </x:div>
      <ref name="domain-attlist"/>
      <optional>
        <ref name="applications"/>
      </optional>
      <optional>
        <ref name="resources"/>
      </optional>
      <ref name="configs"/>
      <ref name="servers"/>
      <optional>
        <ref name="clusters"/>
      </optional>
      <optional>
        <ref name="node-agents"/>
      </optional>
      <optional>
        <ref name="lb-configs"/>
      </optional>
      <optional>
        <ref name="load-balancers"/>
      </optional>
      <zeroOrMore>
        <ref name="system-property"/>
      </zeroOrMore>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="domain-attlist" combine="interleave">
    <optional>
      <attribute name="application-root">
        <x:div class="dtd">
          for PE this defines the location where applications are
          deployed
        </x:div>
	<ref name="file-type"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="log-root">
        <x:div class="dtd">
          specifies where the server instance's log files are kept,
          including HTTP access logs, server logs, and transaction
          logs. Default is $INSTANCE-ROOT/logs
        </x:div>
	<ref name="file-type"/>
     </attribute>
    </optional>
    <optional>
      <attribute name="locale">
        <x:div class="dtd">
          If present, overrides OS locale setting.
        </x:div>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="configs">
    <element name="configs">
      <ref name="configs-attlist"/>
      <oneOrMore>
        <ref name="config"/>
      </oneOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="configs-attlist" combine="interleave">
    <empty/>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="servers">
    <element name="servers">
      <ref name="servers-attlist"/>
      <zeroOrMore>
        <ref name="server"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="servers-attlist" combine="interleave">
    <empty/>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="clusters">
    <element name="clusters">
      <ref name="clusters-attlist"/>
      <zeroOrMore>
        <ref name="cluster"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="clusters-attlist" combine="interleave">
    <empty/>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="node-agents">
    <element name="node-agents">
      <ref name="node-agents-attlist"/>
      <zeroOrMore>
        <ref name="node-agent"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="node-agents-attlist" combine="interleave">
    <empty/>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="lb-configs">
    <element name="lb-configs">
      <ref name="lb-configs-attlist"/>
      <zeroOrMore>
        <ref name="lb-config"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="lb-configs-attlist" combine="interleave">
    <empty/>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="applications">
    <element name="applications">
      <x:div class="dtd">
        Various types of applications that can be deployed on Sun ONE
        Application Server instance
      </x:div>
      <ref name="applications-attlist"/>
      <zeroOrMore>
        <choice>
          <ref name="lifecycle-module"/>
          <ref name="j2ee-application"/>
          <ref name="ejb-module"/>
          <ref name="web-module"/>
          <ref name="connector-module"/>
          <ref name="appclient-module"/>
          <ref name="mbean"/>
          <ref name="extension-module"/>
        </choice>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="applications-attlist" combine="interleave">
    <empty/>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="lifecycle-module">
    <element name="lifecycle-module">
      <ref name="lifecycle-module-attlist"/>
      <optional>
        <ref name="description"/>
      </optional>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="lifecycle-module-attlist" combine="interleave">
    <attribute name="name" ias:type="key" ias:belongs-to="applications">
      <x:div class="dtd">
        unqiue identifier for the deployed server lifecycle event
        listener module.
      </x:div>
      <ref name="name-type"/>
    </attribute>
    <attribute name="class-name">
      <x:div class="dtd">
        fully qualified name of the startup class.
      </x:div>
      <ref name="classname-type"/>
    </attribute>
    <optional>
      <attribute name="classpath">
        <x:div class="dtd">
          where this module is actually located, if it is not under
          applications-root
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="load-order">
        <x:div class="dtd">
          integer value that can be used to force the order in which
          deployed lifecycle modules are loaded at server start
          up. Smaller numbered modules get loaded sooner. Order is
          unspecified if two or more lifecycle modules have the same
          load-order value.
        </x:div>
	<data type="positiveInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="is-failure-fatal" a:defaultValue="false">
        <x:div class="dtd">
          if true, aborts server start up if this module does not load
          properly.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="object-type" a:defaultValue="user">
        <ref name="object-type"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="enabled" a:defaultValue="true">
        <x:div class="dtd">
          boolean attribute. If set to "false" this module will not be
          loaded at server start up.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="j2ee-application">
    <element name="j2ee-application">
      <ref name="j2ee-application-attlist"/>
      <optional>
        <ref name="description"/>
      </optional>
      <zeroOrMore>
        <ref name="web-service-endpoint"/>
      </zeroOrMore>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="j2ee-application-attlist" combine="interleave">
    <attribute name="name" ias:type="key" ias:belongs-to="applications">
      <ref name="name-type"/>
    </attribute>
    <attribute name="location">
      <ref name="file-type"/>
    </attribute>
    <optional>
      <attribute name="object-type" a:defaultValue="user">
        <ref name="object-type"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="enabled" a:defaultValue="true">
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="libraries">
        <x:div class="dtd">
           System dependent path separator [: for Unix/Solaris/Linux and
            ; for Windows] separated list of jar paths. These paths could be
            either relative [relative to {com.sun.aas.instanceRoot}/lib/applibs]
            or absolute paths. These dependencies appears *after* the libraries
            defined in classpath-prefix in the java-config and *before* the
            application server provided over-rideable jar set. The libraries
            would be made available to the application in the order in which
            they were specified.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="availability-enabled" a:defaultValue="false">
        <x:div class="dtd">
          This boolean flag controls whether availability is enabled
          for SFSB checkpointing (and potentially passivation).  If
          this is "false", then all SFSB checkpointing is disabled for
          either the given j2ee app or the given ejb module.  If it is
          "true" (and providing that all the availability-enabled
          attributes above in precedence are also "true", then the
          j2ee app or stand-alone ejb modules may be ha enabled.
          Finer-grained control exists at lower level inside each
          bean.  If this attribute is missing, it defaults to "false".
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="directory-deployed" a:defaultValue="false">
        <x:div class="dtd">
          This attribute indicates whether the application has been
          deployed to a directory or not
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="java-web-start-enabled" a:defaultValue="true">
        <x:div class="dtd">
          This attribute indicates whether Java Web Start access is permitted 
          to eligible application client(s) in this module
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="ejb-module">
    <element name="ejb-module">
      <ref name="ejb-module-attlist"/>
      <optional>
        <ref name="description"/>
      </optional>
      <zeroOrMore>
        <ref name="web-service-endpoint"/>
      </zeroOrMore>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="ejb-module-attlist" combine="interleave">
    <attribute name="name" ias:type="key" ias:belongs-to="applications">
      <ref name="name-type"/>      
    </attribute>
    <attribute name="location">
      <ref name="file-type"/>
    </attribute>
    <optional>
      <attribute name="object-type" a:defaultValue="user">
        <ref name="object-type"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="enabled" a:defaultValue="true">
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="libraries">
        <x:div class="dtd">
           System dependent path separator [: for Unix/Solaris/Linux and
            ; for Windows] separated list of jar paths. These paths could be
            either relative [relative to {com.sun.aas.instanceRoot}/lib/applibs]
            or absolute paths. These dependencies appears *after* the libraries
            defined in classpath-prefix in the java-config and *before* the
            application server provided over-rideable jar set. The libraries
            would be made available to the application in the order in which
            they were specified.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="availability-enabled" a:defaultValue="false">
        <x:div class="dtd">
          This boolean flag controls whether availability is enabled
          for SFSB checkpointing (and potentially passivation).  If
          this is "false", then all SFSB checkpointing is disabled for
          either the given j2ee app or the given ejb module.  If it is
          "true" (and providing that all the availability-enabled
          attributes above in precedence are also "true", then the
          j2ee app or stand-alone ejb modules may be ha enabled.
          Finer-grained control exists at lower level inside each
          bean.  If this attribute is missing, it defaults to "false".
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="directory-deployed" a:defaultValue="false">
        <x:div class="dtd">
          This attribute indicates whether the application has been
          deployed to a directory or not
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="web-module">
    <element name="web-module">
      <ref name="web-module-attlist"/>
      <optional>
        <ref name="description"/>
      </optional>
      <zeroOrMore>
        <ref name="web-service-endpoint"/>
      </zeroOrMore>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="web-module-attlist" combine="interleave">
    <attribute name="name" ias:type="key" ias:belongs-to="applications">
      <ref name="name-type"/>      
    </attribute>
    <attribute name="context-root">
	<x:div class="dtd">
	  context-root must match the pattern for the hpath production
	  in RFC 1738 which can be found at:
	  http://www.w3.org/Addressing/rfc1738.txt. This is flattened
	  to the following regular expression in XML Schema's pattern
	  language:
          The validation process however, does not impose any restrictions
          on the choice of context-root.
	</x:div>
      <data type="string">
      </data>
    </attribute>
    <attribute name="location">
      <ref name="file-type"/>
    </attribute>
    <optional>
      <attribute name="object-type" a:defaultValue="user">
        <ref name="object-type"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="enabled" a:defaultValue="true">
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="libraries">
        <x:div class="dtd">
           System dependent path separator [: for Unix/Solaris/Linux and
            ; for Windows] separated list of jar paths. These paths could be
            either relative [relative to {com.sun.aas.instanceRoot}/lib/applibs]
            or absolute paths. These dependencies appears *after* the libraries
            defined in classpath-prefix in the java-config and *before* the
            application server provided over-rideable jar set. The libraries
            would be made available to the application in the order in which
            they were specified.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="availability-enabled" a:defaultValue="false">
        <x:div class="dtd">
          This boolean flag controls whether availability is enabled
          for HTTP Session Persistence. If this is "false", then all
          session persistence is disabled for the given web module.
          If it is "true" (and providing that all the
          availability-enabled attributes above in precedence are also
          "true", then the web module may be ha enabled.
          Finer-grained control exists at lower level (see
          sun-web.xml).  If this attribute is missing, it defaults to
          "false".
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="directory-deployed" a:defaultValue="false">
        <x:div class="dtd">
          This attribute indicates whether the application has been
          deployed to a directory or not
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="connector-module">
    <element name="connector-module">
      <ref name="connector-module-attlist"/>
      <optional>
        <ref name="description"/>
      </optional>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="connector-module-attlist" combine="interleave">
    <attribute name="name" ias:type="key" ias:belongs-to="applications">
      <ref name="name-type"/>      
    </attribute>
    <attribute name="location">
      <ref name="file-type"/>
    </attribute>
    <optional>
      <attribute name="object-type" a:defaultValue="user">
        <ref name="object-type"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="enabled" a:defaultValue="true">
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="directory-deployed" a:defaultValue="false">
        <ref name="boolean"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="appclient-module">
    <element name="appclient-module">
      <ref name="appclient-module-attlist"/>
      <optional>
        <ref name="description"/>
      </optional>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="appclient-module-attlist" combine="interleave">
    <attribute name="name" ias:type="key" ias:belongs-to="applications">
      <ref name="name-type"/>      
    </attribute>
    <attribute name="location">
      <ref name="file-type"/>
    </attribute>
    <optional>
      <attribute name="directory-deployed" a:defaultValue="false">
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="java-web-start-enabled" a:defaultValue="true">
        <x:div class="dtd">
          This attribute indicates whether Java Web Start access is permitted 
          to eligible application client(s) in this module
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="resources">
    <element name="resources">
      <x:div class="dtd">
        J2EE Applications look up resources registered with the
        Application server, using portable JNDI names.

      </x:div>
      <ref name="resources-attlist"/>
      <zeroOrMore>
        <choice>
          <ref name="custom-resource"/>
          <ref name="external-jndi-resource"/>
          <ref name="jdbc-resource"/>
          <ref name="mail-resource"/>
          <ref name="persistence-manager-factory-resource"/>
          <ref name="admin-object-resource"/>
          <ref name="connector-resource"/>
          <ref name="resource-adapter-config"/>
          <ref name="jdbc-connection-pool"/>
          <ref name="connector-connection-pool"/>
        </choice>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="resources-attlist" combine="interleave">
    <empty/>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="description">
    <element name="description">
      <x:div class="dtd">
        Textual description of a configured entity
      </x:div>
      <ref name="description-attlist"/>
      <text/>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="description-attlist" combine="interleave">
    <empty/>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="custom-resource">
    <element name="custom-resource">
      <x:div class="dtd">
        custom (or generic) resource managed by a user-written factory class.         
      </x:div>
      <ref name="custom-resource-attlist"/>
      <optional>
        <ref name="description"/>
      </optional>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="custom-resource-attlist" combine="interleave">
    <attribute name="jndi-name" ias:type="key" ias:belongs-to="jndi-names">
      <x:div class="dtd">
        JNDI name for generic resource, the fully qualified type of
        the resource and whether it is enabled at runtime
      </x:div>
      <ref name="jndi-unique-type"/>
    </attribute>
    <attribute name="res-type">
      <ref name="classname-type"/>
    </attribute>
    <attribute name="factory-class">
      <ref name="classname-type"/>
    </attribute>
    <optional>
      <attribute name="object-type" a:defaultValue="user">
        <ref name="object-type"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="enabled" a:defaultValue="true">
        <ref name="boolean"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="external-jndi-resource">
    <element name="external-jndi-resource">
      <x:div class="dtd">
        resource residing in an external JNDI repository
      </x:div>
      <ref name="external-jndi-resource-attlist"/>
      <optional>
        <ref name="description"/>
      </optional>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="external-jndi-resource-attlist" combine="interleave">
    <attribute name="jndi-name" ias:type="key" ias:belongs-to="jndi-names">
      <ref name="jndi-unique-type"/>
    </attribute>
    <attribute name="jndi-lookup-name"/>
    <attribute name="res-type">
      <ref name="classname-type"/>
    </attribute>
    <attribute name="factory-class">
      <ref name="classname-type"/>
    </attribute>
    <optional>
      <attribute name="object-type" a:defaultValue="user">
        <ref name="object-type"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="enabled" a:defaultValue="true">
        <ref name="boolean"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="jdbc-resource">
    <element name="jdbc-resource">
      <x:div class="dtd">
        JDBC javax.sql.(XA)DataSource resource definition
      </x:div>
      <ref name="jdbc-resource-attlist"/>
      <optional>
        <ref name="description"/>
      </optional>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="jdbc-resource-attlist" combine="interleave">
    <attribute name="jndi-name" ias:type="key" ias:belongs-to="jndi-names,jdbc-resources">
      <ref name="jndi-unique-type"/>
    </attribute>
    <attribute name="pool-name" ias:references-to="jdbc-connection-pools"/>
    <optional>
      <attribute name="object-type" a:defaultValue="user">
        <ref name="object-type"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="enabled" a:defaultValue="true">
        <ref name="boolean"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="mail-resource">
    <element name="mail-resource">
      <x:div class="dtd">
        The mail-resource element describes a javax.mail.Session
        resource
      </x:div>
      <ref name="mail-resource-attlist"/>
      <optional>
        <ref name="description"/>
      </optional>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="mail-resource-attlist" combine="interleave">
    <attribute name="jndi-name" ias:type="key" ias:belongs-to="jndi-names">
      <ref name="jndi-unique-type"/>
    </attribute>
    <optional>
      <attribute name="store-protocol" a:defaultValue="imap"/>
    </optional>
    <optional>
      <attribute name="store-protocol-class" a:defaultValue="com.sun.mail.imap.IMAPStore">
      <ref name="classname-type"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="transport-protocol" a:defaultValue="smtp"/>
    </optional>
    <optional>
      <attribute name="transport-protocol-class" a:defaultValue="com.sun.mail.smtp.SMTPTransport">
	<ref name="classname-type"/>
      </attribute>
    </optional>
    <attribute name="host">
      <x:div class="dtd">
	ip V6 or V4 address or hostname.
      </x:div>
      <ref name="IPAddress-type"/>
    </attribute>
    <attribute name="user"/>
    <attribute name="from"/>
    <optional>
      <attribute name="debug" a:defaultValue="false">
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="object-type" a:defaultValue="user">
        <ref name="object-type"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="enabled" a:defaultValue="true">
        <ref name="boolean"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="persistence-manager-factory-resource">
    <element name="persistence-manager-factory-resource">
      <x:div class="dtd">
        Persistence Manager runtime configuration.
      </x:div>
     <ref name="persistence-manager-factory-resource-attlist"/>
      <optional>
        <ref name="description"/>
      </optional>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="persistence-manager-factory-resource-attlist" combine="interleave">
    <attribute name="jndi-name" ias:type="key" ias:belongs-to="jndi-names">
      <x:div class="dtd">
        JNDI name for this resource
      </x:div>
      <ref name="jndi-unique-type"/>
    </attribute>
    <optional>
      <attribute name="factory-class" a:defaultValue="com.sun.jdo.spi.persistence.support.sqlstore.impl.PersistenceManagerFactoryImpl">
        <x:div class="dtd">
          Class that creates persistence manager instance.
        </x:div>
	<ref name="classname-type"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="jdbc-resource-jndi-name" ias:references-to="jdbc-resources">
        <x:div class="dtd">
          jdbc resource with which database connections are obtained.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="object-type" a:defaultValue="user">
        <ref name="object-type"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="enabled" a:defaultValue="true">
        <ref name="boolean"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="admin-object-resource">
    <element name="admin-object-resource">
      <x:div class="dtd">
        The admin-object-resource element describes a administered
        object for a inbound resource adapter.
      </x:div>
      <ref name="admin-object-resource-attlist"/>
      <optional>
        <ref name="description"/>
      </optional>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="admin-object-resource-attlist" combine="interleave">
    <attribute name="jndi-name" ias:type="key" ias:belongs-to="jndi-names">
      <x:div class="dtd">
        JNDI name for this resource
      </x:div>
      <ref name="jndi-unique-type"/>
    </attribute>
    <attribute name="res-type">
      <x:div class="dtd">
        Interface definition for the administered object
      </x:div>
    </attribute>
    <attribute name="res-adapter">
      <x:div class="dtd">
        Name of the inbound resource adapter.
      </x:div>
    </attribute>
    <optional>
      <attribute name="object-type" a:defaultValue="user">
        <ref name="object-type"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="enabled" a:defaultValue="true">
        <ref name="boolean"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="connector-resource">
    <element name="connector-resource">
      <ref name="connector-resource-attlist"/>
      <optional>
        <ref name="description"/>
      </optional>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="connector-resource-attlist" combine="interleave">
    <attribute name="jndi-name" ias:type="key" ias:belongs-to="jndi-names">
      <ref name="jndi-unique-type"/>
    </attribute>
    <attribute name="pool-name" ias:references-to="connector-connection-pools"/>
    <optional>
      <attribute name="object-type" a:defaultValue="user">
        <ref name="object-type"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="enabled" a:defaultValue="true">
        <ref name="boolean"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="resource-adapter-config">
    <element name="resource-adapter-config">
      <x:div class="dtd">
        This element is for configuring the resource adapter. These
        values (properties) over-rides the default values present in
        ra.xml.  The name attribute has to be unique . It is optional
        for PE. It is used mainly for EE.
      </x:div>
      <ref name="resource-adapter-config-attlist"/>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="resource-adapter-config-attlist" combine="interleave">
    <optional>
      <attribute name="name">
	<ref name="name-type"/>	
      </attribute>
    </optional>
    <optional>
      <attribute name="thread-pool-ids"/>
    </optional>
    <optional>
      <attribute name="object-type" a:defaultValue="user">
        <ref name="object-type"/>
      </attribute>
    </optional>
    <!-- <attribute name="resource-adapter-name"  ias:type="key"  ias:belongs-to="resource-adapters"> -->
    <attribute name="resource-adapter-name" ias:type="key">
      <ref name="jmx-safe-key-type"/>
    </attribute>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="config">
    <element name="config">
      <x:div class="dtd">
        The configuration defines the configuration of a server
        instance that can be shared by other server instances. The
        availability-service and are SE/EE only.
      </x:div>
      <ref name="config-attlist"/>
      <ref name="http-service"/>
      <ref name="iiop-service"/>
      <ref name="admin-service"/>
      <optional>
        <ref name="connector-service"/>
      </optional>
      <ref name="web-container"/>
      <ref name="ejb-container"/>
      <ref name="mdb-container"/>
      <optional>
        <ref name="jms-service"/>
      </optional>
      <ref name="log-service"/>
      <ref name="security-service"/>
      <ref name="transaction-service"/>
      <ref name="monitoring-service"/>
      <optional>
        <ref name="diagnostic-service"/>
      </optional>
      <ref name="java-config"/>
      <optional>
        <ref name="availability-service"/>
      </optional>
      <ref name="thread-pools"/>
      <optional>
        <ref name="alert-service"/>
      </optional>
      <optional>
        <ref name="group-management-service"/>
      </optional>
      <optional>
        <ref name="management-rules"/>
      </optional>
      <zeroOrMore>
        <ref name="system-property"/>
      </zeroOrMore>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="config-attlist" combine="interleave">
    <attribute name="name" ias:type="key" ias:belongs-to="global-names,configs">
      <ref name="name-type"/>
    </attribute>
    <optional>
      <attribute name="dynamic-reconfiguration-enabled" a:defaultValue="true">
        <ref name="boolean"/>
        <x:div class="dtd">
          When set to "true" then any changes to the system
          (e.g. applications deployed, resources created) will be
          automatically applied to the affected servers without a
          restart being required. When set to "false" such changes
          will only be picked up by the affected servers when each
          server restarts.
        </x:div>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="alert-service">
    <element name="alert-service">
      <ref name="alert-service-attlist"/>
      <x:div class="dtd">
        The Alert service provides a mechanism for users to register
        for and receive alerts. The alert service collects together a
        set of alert subscriptions
      </x:div>
      <zeroOrMore>
        <ref name="alert-subscription"/>
      </zeroOrMore>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="alert-service-attlist" combine="interleave">
    <empty/>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="alert-subscription">
    <element name="alert-subscription">
      <x:div class="dtd">
        alert subscription details a specific subscription. The
        subscription comprises the configuration of a specific
        listener, and a filter to be applied.
      </x:div>
      <ref name="alert-subscription-attlist"/>
      <ref name="listener-config"/>
      <optional>
        <ref name="filter-config"/>
      </optional>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="alert-subscription-attlist" combine="interleave">
    <attribute name="name" ias:type="key">
      <x:div class="dtd">
        The unique name identifying a particular alert service.
      </x:div>
    </attribute>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="listener-config">
    <element name="listener-config">
      <x:div class="dtd">
        connects a specific listener class with specific managed
        objects
      </x:div>
      <ref name="listener-config-attlist"/>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="listener-config-attlist" combine="interleave">
    <attribute name="listener-class-name">
      <x:div class="dtd">
        The name of a class that can act as a listener for
        alerts. Non-empty string containing a Java class name.
      </x:div>
    </attribute>
    <attribute name="subscribe-listener-with">
      <x:div class="dtd">
        A list of managed object names that the listener should be
        subscribed to. A non-empty, comma separated list.
      </x:div>
    </attribute>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="filter-config">
    <element name="filter-config">
      <x:div class="dtd">
        filter-config provides the means of specifying a filter to be
        applied to alerts
      </x:div>
      <ref name="filter-config-attlist"/>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="filter-config-attlist" combine="interleave">
    <attribute name="filter-class-name">
      <x:div class="dtd">
        The name of a class that can act as a filter. Non-empty string
        containing a Java class name.
      </x:div>
    </attribute>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="http-service">
    <element name="http-service">
      <ref name="http-service-attlist"/>
      <optional>
        <ref name="access-log"/>
      </optional>
      <oneOrMore>
	<ref name="http-listener"/>
      </oneOrMore>
      <oneOrMore>
	<ref name="virtual-server"/>
      </oneOrMore>
      <optional>
        <ref name="request-processing"/>
      </optional>
      <optional>
        <ref name="keep-alive"/>
      </optional>
      <optional>
        <ref name="connection-pool"/>
      </optional>
      <optional>
        <ref name="http-protocol"/>
      </optional>
      <optional>
        <ref name="http-file-cache"/>
      </optional>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="http-service-attlist" combine="interleave">
    <empty/>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="access-log">
    <element name="access-log">
      <ref name="access-log-attlist"/>
      <empty/>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="access-log-attlist" combine="interleave">
    <optional>
      <attribute name="format" a:defaultValue="%client.name% %auth-user-name% %datetime% %request% %status% %response.length%">
        <x:div class="dtd">
          The global format for the access log rotation-policy The
          policy based on which the log rotation would be done . At
          this time only time based rotation is enabled.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="rotation-policy" a:defaultValue="time">
        <choice>
          <value>time</value>
        </choice>
      </attribute>
    </optional>
    <optional>
      <attribute name="rotation-interval-in-minutes" a:defaultValue="1440">
        <x:div class="dtd">
          The time interval in minutes between two successive
          rotations of the access logs.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="rotation-suffix" a:defaultValue="yyyyMMdd-HH'h'mm'm'ss's'">
        <x:div class="dtd">
          The suffix to be added to the access-log name after
          rotation. 
          Acceptable values include those supported by
          java.text.SimpleDateFormat and "%YYYY;%MM;%DD;-%hh;h%mm;m%ss;s".
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="rotation-enabled" a:defaultValue="true">
        <ref name="boolean"/>
        <x:div class="dtd">
          The flag for enabling the access-log rotation
        </x:div>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="http-listener">
    <element name="http-listener">
      <ref name="http-listener-attlist"/>
      <optional>
        <ref name="ssl"/>
      </optional>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="http-listener-attlist" combine="interleave">
    <attribute name="id" ias:type="key" ias:belongs-to="http-listeners">
      <x:div class="dtd">
        Unique identifier for http listener.
      </x:div>
      <ref name="name-type"/>
    </attribute>
    <attribute name="address">
      <x:div class="dtd">
        IP address of the listen socket. Can be in dotted-pair or IPv6
        notation.  Can also be any for INADDR-ANY. Configuring a
        listen socket to listen on any is required if more than one
        http-listener is configured to it.
      </x:div>
      <ref name="IPAddress-type"/>
    </attribute>
    <attribute name="port">
      <x:div class="dtd">
        Port number to create the listen socket on. Legal values are 1
        - 65535.  On Unix, creating sockets that listen on ports 1 -
        1024 requires superuser privileges. Configuring an SSL listen
        socket to listen on port 443 is recommended.
      </x:div>
      <ref name="port-type"/>
    </attribute>
    <optional>
      <attribute name="external-port">
        <x:div class="dtd">
          The port at which the user makes a request , typically a
          proxy server port.
        </x:div>
	<ref name="port-type"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="family" a:defaultValue="inet">
        <x:div class="dtd">
          Specified the family of addresses either inet or ncsa
        </x:div>
	<choice>
	  <value>inet</value>
	  <value>ncsa</value>
	</choice>
      </attribute>
    </optional>
    <optional>
      <attribute name="blocking-enabled" a:defaultValue="false">
        <x:div class="dtd">
          Enables blocking for the listen and external ports.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="acceptor-threads" a:defaultValue="1">
        <x:div class="dtd">
          Number of acceptor threads for the listen socket.  The
          recommended value is the number of processors in the
          machine.
        </x:div>
	<data type="positiveInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="security-enabled" a:defaultValue="false">
        <x:div class="dtd">
          Determines whether the http listener runs SSL. You can turn
          SSL2 or SSL3 on or off and set ciphers using an ssl
          element. The enable-ssl in the protocol element should be
          set to true for this setting to work.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <attribute name="default-virtual-server" ias:references-to="virtual-servers">
      <x:div class="dtd">
        The id attribute of the default virtual server for this
        particular connection group.
      </x:div>
    </attribute>
    <attribute name="server-name">
      <x:div class="dtd">
        Tells the server what to put in the host name section of any
        URLs it sends to the client. This affects URLs the server
        automatically generates; it doesnt affect the URLs for
        directories and files stored in the server.  This name should
        be the alias name if your server uses an alias.  If you append
        a colon and port number, that port will be used in URLs the
        server sends to the client.
      </x:div>
    </attribute>
    <optional>
      <attribute name="redirect-port">
        <x:div class="dtd">
          if the connector is supporting non-SSL requests and a
          request is received for which a matching security-constraint
          requires SSL transport catalina will automatically redirect
          the request to the port number specified here
        </x:div>
	<ref name="port-type"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="xpowered-by" a:defaultValue="true">
        <x:div class="dtd">
          The Servlet 2.4 spec defines a special X-Powered-By:
          Servlet/2.4 header, which containers may add to
          servlet-generated responses. This is complemented by the JSP
          2.0 spec, which defines a X-Powered-By: JSP/2.0 header to be
          added (on an optional basis) to responses utilizing JSP
          technology.  The goal of these headers is to aid in
          gathering statistical data about the use of Servlet and JSP
          technology. If true, these headers will be added.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="enabled" a:defaultValue="true">
        <ref name="boolean"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="ssl">
    <element name="ssl">
      <x:div class="dtd">
        Define SSL processing parameters
      </x:div>
      <ref name="ssl-attlist"/>
      <empty/>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="ssl-attlist" combine="interleave">
    <attribute name="cert-nickname">
      <x:div class="dtd">
        nickname of the server certificate in the certificate database
        or the PKCS#11 token. In the certificate, the name format is
        tokenname:nickname. Including the tokenname: part of the name
        in this attribute is optional.
      </x:div>
    </attribute>
    <optional>
      <attribute name="ssl2-enabled" a:defaultValue="false">
        <x:div class="dtd">
          Determines whether SSL2 is enabled. NOT Used in PE. SSL2 is
	  not supported by either iiop or web-services. When this
	  element is used as a child of the iiop-listener element then
	  the only allowed value for this attribute is "false".
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="ssl2-ciphers">
        <x:div class="dtd">
          A comma-separated list of the SSL2 ciphers used, with the
          prefix + to enable or - to disable, for example
          +rc4. Allowed values are rc4, rc4export, rc2, rc2export,
          idea, des, desede3.  If no value is specified, all supported
          ciphers are assumed to be enabled. NOT Used in PE
        </x:div>
	<data type="string">
	  <param name="pattern">((\+|\-)(rc2|rc2export|rc4|rc4export|idea|des|desede3)(\s*,\s*(\+|\-)(rc2|rc2export|rc4|rc4export|idea|des|desede3))*)*</param>
	</data>
      </attribute>
    </optional>
    <optional>
      <attribute name="ssl3-enabled" a:defaultValue="true">
        <x:div class="dtd">
          Determines whether SSL3 is enabled.
          <x:p>
            If both SSL2 and SSL3 are enabled for a virtual server,
            the server tries SSL3 encryption first. If that fails, the
            server tries SSL2 encryption.
          </x:p>
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="ssl3-tls-ciphers">
        <x:div class="dtd">
          A comma-separated list of the SSL3 ciphers used, with the     
          prefix + to enable or - to disable, for example 
          +SSL_RSA_WITH_RC4_128_MD5.
          Allowed SSL3/TLS values are those that are supported by the
          JVM for the given security provider and security service configuration.
          If no value is specified, all supported ciphers are assumed to be   
          enabled.                                                      
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="tls-enabled" a:defaultValue="true">
        <x:div class="dtd">
          Determines whether TLS is enabled.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="tls-rollback-enabled" a:defaultValue="true">
        <x:div class="dtd">
          Determines whether TLS rollback is enabled. TLS rollback
          should be enabled for Microsoft Internet Explorer 5.0 and
          5.5. NOT Used in PE
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="client-auth-enabled" a:defaultValue="false">
        <x:div class="dtd">
          Determines whether SSL3 client authentication is performed
          on every request, independent of ACL-based access control.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="virtual-server">
    <element name="virtual-server">
      <x:div class="dtd">
        Configuration of Virtual Server
        <x:p>
          Virtualization in Application Server allows multiple URL
          domains to be served by the same HTTP server process, which
          is listening on multiple host addresses If an application is
          available at two virtual servers, they still share same
          physical resource pools, such as JDBC connection pools.
        </x:p>
        <x:p>
          Sun ONE Application Server allows a list of virtual servers,
          to be specified along with web-module and j2ee-application
          elements. This establishes an association between URL
          domains, represented by the virtual server and the web
          modules (standalone web modules or web modules inside the
          ear file)
        </x:p>
      </x:div>
      <ref name="virtual-server-attlist"/>
      <optional>
        <ref name="http-access-log"/>
      </optional>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="virtual-server-attlist" combine="interleave">
    <attribute name="id" ias:type="key" ias:belongs-to="virtual-servers">
      <x:div class="dtd">
        Virtual server ID. This is a unique ID that allows lookup of a
        specific virtual server. A virtual server ID cannot begin with
        a number.
      </x:div>
      <ref name="name-type"/>
    </attribute>
    <optional>
      <attribute name="http-listeners" ias:references-to="http-listeners">
        <x:div class="dtd">
          A comma-separated list of http-listener id(s), Required only
          for a Virtual Server that is not the default virtual server.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="default-web-module">
        <x:div class="dtd">
          stand alone web module associated with this virtual server
          by default.
        </x:div>
      </attribute>
    </optional>
    <attribute name="hosts">
      <x:div class="dtd">
        A comma-separated list of values allowed in the Host request
        header to select the current virtual server. Each Virtual
        Server that is configured to the same Connection Group must
        have a unique hosts value for that group.
      </x:div>
    </attribute>
    <optional>
      <attribute name="state" a:defaultValue="on">
        <x:div class="dtd">
          Determines whether a Virtual Server is active (on) or
          inactive (off, disable). The default is on (active).  When
          inactive, a Virtual Server does not service requests.
        </x:div>
        <choice>
          <value>on</value>
          <value x:desc="returns a 404: Status code (404) indicating           that the requested resource is not available">off</value>
          <value x:desc=" returns a 403: Status code (403) indicating           the server understood the request but refused to fulfill           it.">disabled</value>
        </choice>
      </attribute>
    </optional>
    <optional>
      <attribute name="docroot">
        <x:div class="dtd">
          The location on the filesystem where the files related to
          the content to be served by this virtual server is stored.
        </x:div>
	<ref name="file-type"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="log-file" a:defaultValue="${com.sun.aas.instanceRoot}/logs/server.log">
        <x:div class="dtd">
          Specifies a log file for virtual-server-specific log
          messages. Default value is
	  ${com.sun.aas.instanceRoot}/logs/server.log
        </x:div>
	<ref name="file-type"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="http-access-log">
    <element name="http-access-log">
      <ref name="http-access-log-attlist"/>
      <empty/>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="http-access-log-attlist" combine="interleave">
    <optional>
      <attribute name="log-directory" a:defaultValue="${com.sun.aas.instanceRoot}/logs/access">
        <x:div class="dtd">
          location of the access logs specified as a directory.This
          defaults to the domain.log-root, which by default is
          ${INSTANCE_ROOT}/logs. Hence the default value for this
          attribute is ${INSTANCE_ROOT}/logs/access
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="iponly" a:defaultValue="true">
        <x:div class="dtd">
          if the IP address of the user agent should be specified or a
          DNS lookup should be done
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="request-processing">
    <element name="request-processing">
      <x:div class="dtd">
	This element provides attributes to configure the request
	processing subsystem in the HTTP service.
      </x:div>
      <ref name="request-processing-attlist"/>
      <empty/>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="request-processing-attlist" combine="interleave">
    <optional>
      <attribute name="thread-count" a:defaultValue="128">
        <x:div class="dtd">
          Max no of request processing threads.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="initial-thread-count" a:defaultValue="48" ias:le-than="@thread-count">
        <x:div class="dtd">
          The no of request processing threads when the http service
          is initialized
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="thread-increment" a:defaultValue="10">
        <x:div class="dtd">
          The increment in the no of request processing threads when
          the no.  of requests reaches the number specified by
          request-threads-init
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="request-timeout-in-seconds" a:defaultValue="30">
        <x:div class="dtd">
          Time after which the request times out
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="header-buffer-length-in-bytes" a:defaultValue="4096">
        <x:div class="dtd">
          The size of the buffer used by the request processing
          threads for reading the request data
        </x:div>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="keep-alive">
    <element name="keep-alive">
      <x:div class="dtd">
        Keep-alive subsystem configuration
      </x:div>
      <ref name="keep-alive-attlist"/>
      <empty/>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="keep-alive-attlist" combine="interleave">
    <optional>
      <attribute name="thread-count" a:defaultValue="1">
        <x:div class="dtd">
          no of Keep Alive threads in the system
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="max-connections" a:defaultValue="256">
        <x:div class="dtd">
          Max no of connection in the Keep Alive mode
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="timeout-in-seconds" a:defaultValue="30">
        <x:div class="dtd">
          Keep Alive timeout , max time a connection can be deemed as
          idle and kept in the keep-alive state
        </x:div>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="connection-pool">
    <element name="connection-pool">
      <ref name="connection-pool-attlist"/>
      <empty/>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="connection-pool-attlist" combine="interleave">
    <optional>
      <attribute name="queue-size-in-bytes" a:defaultValue="4096">
        <x:div class="dtd">
          Size in bytes of the Connection queue
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="max-pending-count" a:defaultValue="4096">
        <x:div class="dtd">
          Max no of pending connections on the listen socket
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="receive-buffer-size-in-bytes" a:defaultValue="4096">
        <x:div class="dtd">
          The buffer size of the receive buffer used by sockets.          
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="send-buffer-size-in-bytes" a:defaultValue="8192">
        <x:div class="dtd">
          The buffer size of the send buffer used by sockets.          
        </x:div>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="http-protocol">
    <element name="http-protocol">
      <x:div class="dtd">
        HTTP Protocol related settings
      </x:div>
      <ref name="http-protocol-attlist"/>
      <empty/>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="http-protocol-attlist" combine="interleave">
    <optional>
      <attribute name="version" a:defaultValue="HTTP/1.1">
        <x:div class="dtd">
          The version of the HTTP protocol used by the HTTP Service
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="dns-lookup-enabled" a:defaultValue="false">
        <x:div class="dtd">
          If the DNS name for a particular ip address from which the
          request originates needs to be looked up.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="forced-type" a:defaultValue="text/html; charset=iso-8859-1">
        <x:div class="dtd">
          The response type to be forced if the content served cannot
          be matched by any of the MIME mappings for
          extensions. Specified as a semi-colon delimited string
          consisting of content-type, encoding, language, charset
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="default-type" a:defaultValue="text/html; charset=iso-8859-1">
        <x:div class="dtd">
          Setting the default response-type. Specified as a semi-colon
          delimited string consisting of content-type, encoding,
          language, charset
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="forced-response-type" a:defaultValue="AttributeDeprecated">
        <x:div class="dtd">
	  This attribute is deprecated. Use forced-type instead.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="default-response-type" a:defaultValue="AttributeDeprecated">
        <x:div class="dtd">
	  This attribute is deprecated. Use default-type instead.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="ssl-enabled" a:defaultValue="true">
        <x:div class="dtd">
          Globally enables SSL across the server
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="http-file-cache">
    <element name="http-file-cache">
      <ref name="http-file-cache-attlist"/>
      <empty/>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="http-file-cache-attlist" combine="interleave">
    <optional>
      <attribute name="globally-enabled" a:defaultValue="true">
        <x:div class="dtd">
          globally enables the file cache
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="file-caching-enabled" a:defaultValue="on">
        <x:div class="dtd">
          Enables the caching of file content if the file size is less
          than the one specified ny med-file-size-limit
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="max-age-in-seconds" a:defaultValue="30">
        <x:div class="dtd">
          Maximum age of a valid cache entry
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="medium-file-size-limit-in-bytes" a:defaultValue="537600">
        <x:div class="dtd">
          Maximum size of a cached file that can be stored as a memory
          mapped file.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="medium-file-space-in-bytes" a:defaultValue="10485760" ias:le-than="@medium-file-size-limit-in-bytes">
        <x:div class="dtd">
          Total size of all files that are cached as memory mapped
          files.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="small-file-size-limit-in-bytes" a:defaultValue="2048">
        <x:div class="dtd">
          Maximum size of a file that can be read into memory.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="small-file-space-in-bytes" a:defaultValue="1048576" ias:le-than="@small-file-size-limit-in-bytes">
        <x:div class="dtd">
          Total size of the files that are read into memory.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="file-transmission-enabled" a:defaultValue="false">
        <x:div class="dtd">
          This is valid on Windows only. Enables the
          TransmitFileSystem call.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="max-files-count" a:defaultValue="1024">
        <x:div class="dtd">
          Maximum no. of files in the file cache.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="hash-init-size" a:defaultValue="0">
        <x:div class="dtd">
          Initial no. of hash buckets.
        </x:div>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="iiop-service">
    <element name="iiop-service">
      <ref name="iiop-service-attlist"/>
      <ref name="orb"/>
      <optional>
        <ref name="ssl-client-config"/>
      </optional>
      <zeroOrMore>
        <ref name="iiop-listener"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="iiop-service-attlist" combine="interleave">
    <optional>
      <attribute name="client-authentication-required" a:defaultValue="false">
        <ref name="boolean"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="orb">
    <element name="orb">
      <x:div class="dtd">
        Orb Configuration properties
      </x:div>
      <ref name="orb-attlist"/>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="orb-attlist" combine="interleave">
    <attribute name="use-thread-pool-ids" ias:references-to="thread-pools">
      <x:div class="dtd">
        This would refer to the thread-pool-id(s) defined in the
        thread-pool sub-element of thread-pool-config element in
        server.xml. These would be the threadpool(s) used by the
        ORB. More than one thread-pool-id(s) could be specified by
        using commas to separate the names e.g. orb-thread-pool-1,
        orb-thread-pool-2
      </x:div>
    </attribute>
    <optional>
      <attribute name="message-fragment-size" a:defaultValue="1024">
        <x:div class="dtd">
          GIOPv1.2 messages larger than this will get fragmented. Minimum value is 128.
        </x:div>
	<data type="positiveInteger">
	  <param name="minInclusive">128</param>
	</data>
      </attribute>
    </optional>
    <optional>
      <attribute name="max-connections" a:defaultValue="1024">
        <x:div class="dtd">
          maximum number of incoming connections, on all listeners
        </x:div>
	<data type="nonNegativeInteger"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="ssl-client-config">
    <element name="ssl-client-config">
      <x:div class="dtd">
        ssl-client-config element specifies the SSL configuration when
        the Application Server is making outbound IIOP/SSL
        connections.
      </x:div>
      <ref name="ssl-client-config-attlist"/>
      <ref name="ssl"/>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="ssl-client-config-attlist" combine="interleave">
    <empty/>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="iiop-listener">
    <element name="iiop-listener">
      <ref name="iiop-listener-attlist"/>
      <optional>
        <ref name="ssl">
          <x:div class="dtd">
            element specifies optional SSL configuration. Note that
	    the ssl2 ciphers are not supported for iiop, and therefore
	    must be disabled.
          </x:div>
        </ref>
      </optional>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="iiop-listener-attlist" combine="interleave">
    <attribute name="id" ias:type="key">
      <x:div class="dtd">
        unique identifier for this listener.
      </x:div>
      <ref name="name-type"/>
    </attribute>
    <attribute name="address">
      <x:div class="dtd">
        ip V6 or V4 address or hostname.
      </x:div>
      <ref name="IPAddress-type"/>
    </attribute>
    <optional>
      <attribute name="port" a:defaultValue="1072">
        <x:div class="dtd">
          port number
        </x:div>
	<ref name="port-type"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="security-enabled" a:defaultValue="false">
        <x:div class="dtd">
          Determines whether the iiop listener runs SSL. You can turn
          SSL2 or SSL3 on or off and set ciphers using an ssl element
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="enabled" a:defaultValue="true">
        <x:div class="dtd">
          if false, a configured listener, is disabled
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="admin-service">
    <element name="admin-service">
      <x:div class="dtd">
         Admin Service exists in every instance. It is the
         configuration for either a normal server, DAS or PE instance.
      </x:div>
      <ref name="admin-service-attlist"/>
      <zeroOrMore>
        <ref name="jmx-connector"/>
      </zeroOrMore>
      <optional>
        <ref name="das-config"/>
      </optional>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="admin-service-attlist" combine="interleave">
    <optional>
      <attribute name="type" a:defaultValue="server">
        <x:div class="dtd">
          an instance can either be of type
        </x:div>
        <choice>
          <value x:desc="Domain Administration Server in SE/EE or the PE instance">
            das
          </value>
          <value x:desc="same as das">
          das-and-server
          </value>
          <value x:desc="Any non-DAS instance in SE/EE. Not valid for PE.">
            server
          </value>
        </choice>
      </attribute>
    </optional>
    <optional>
      <attribute name="system-jmx-connector-name"/>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="connector-service">
    <element name="connector-service">
      <x:div class="dtd">
        Configuration of the Connector Container. The attributes
        specified in the connector container would apply to all
        resource adapters deployed in this cluster/server-instance
      </x:div>
      <ref name="connector-service-attlist"/>
      <empty/>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="connector-service-attlist" combine="interleave">
    <optional>
      <attribute name="shutdown-timeout-in-seconds" a:defaultValue="30">
        <x:div class="dtd">
          integer value (default 30 seconds). Represents the time-out,
          in seconds, that would be allowed by the application server,
          during shutdown, to call the ResourceAdapter.stop() method
          of this connector module's instance to complete.
          <x:p>
          Resource
          Adapters that take longer than the specified
          shutdown-timeout-in-seconds time interval would be ignored
          and the application server shutdown procedure would
          continue.
          </x:p>
        </x:div>
	<data type="positiveInteger"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="jmx-connector">
    <element name="jmx-connector">
      <x:div class="dtd">
        The jmx-connector element defines the configuration of a JSR
        160 compliant remote JMX Connector.
      </x:div>
      <ref name="jmx-connector-attlist"/>
      <optional>
        <ref name="ssl"/>
      </optional>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="jmx-connector-attlist" combine="interleave">
    <attribute name="name" ias:type="key">
      <x:div class="dtd">
        name of jmx connector used for identification
      </x:div>
      <ref name="name-type"/>
    </attribute>
    <optional>
      <attribute name="enabled" a:defaultValue="true">
	<x:div class="dtd">
	  Defines if this connector is enabled. For EE this must be enabled.
	</x:div>
	<ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="protocol" a:defaultValue="rmi_jrmp">
        <x:div class="dtd">
          Defines the protocol that this jmx-connector should support.
          Supported protocols are defined by Entity rjmx-protocol. SJS
          AS 8.1 PE/SE/EE supports "rmi_jrmp" protocol only. Other
          protocols can be used by user applications independently. For
          other protocols supported refer to documentation.
        </x:div>
        <ref name="rjmx-protocol"/>
      </attribute>
    </optional>
    <attribute name="address">
      <x:div class="dtd">
        Specifies the IP address or host-name. Ignored for SJS AS 8.1.
      </x:div>
      <ref name="IPAddress-type"/>
    </attribute>
    <attribute name="port">
      <x:div class="dtd">
        Specifies the port of the jmx-connector-server.  Note that
        jmx-service-uRL is a function of protocol, port and address as
        defined by the JSR 160 1.0 Specification.
      </x:div>
      <ref name="port-type"/>
    </attribute>
    <optional>
      <attribute name="accept-all" a:defaultValue="false">
        <x:div class="dtd">
          Determines whether the connection can be made on all the
          network interfaces. A value of false implies that the
          connections only for this specific address will be
          selected. This attribute is ignored for SJS AS 8.1.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <attribute name="auth-realm-name" ias:references-to="auth-realms">
      <x:div class="dtd">
        The name of the auth-realm in this config element that
        represents the special administrative realm. All
        authentication (from administraive GUI and CLI) will be
        handled by this realm.
      </x:div>
    </attribute>
    <optional>
      <attribute name="security-enabled" a:defaultValue="true">
        <x:div class="dtd">
          Decides whether the transport layer security be used in
          jmx-connector. If true, configure the ssl element.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="das-config">
    <element name="das-config">
      <ref name="das-config-attlist"/>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="das-config-attlist" combine="interleave">
    <optional>
      <attribute name="dynamic-reload-enabled" a:defaultValue="false">
        <x:div class="dtd">
          when true, server checks timestamp on a .reload file at
          every module and application directory level to trigger
          reload. polling frequency is controlled by
          reload-poll-interval-in-seconds
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="dynamic-reload-poll-interval-in-seconds" a:defaultValue="2">
	<data type="positiveInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="autodeploy-enabled" a:defaultValue="false">
        <x:div class="dtd">
          This will enable the autodeployment service. If true, the
          service will automatically starts with the admin-server.
          Auto Deployment is a feature that enables developers to
          quickly deploy applications and modules to a running
          application server withoutrequiring the developer to perform
          an explicit application server restart or separate
          deployment operation.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="autodeploy-polling-interval-in-seconds" a:defaultValue="2">
        <x:div class="dtd">
          The polling interval (in seconds), at the end of which
          autodeployment service will scan the source directory
          (specified by "autodeploy-dir" tag) for any new deployable
          component.
        </x:div>
	<data type="positiveInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="autodeploy-dir" a:defaultValue="autodeploy">
        <x:div class="dtd">
          The source directory (relative to instance root) from which
          autodeploy service will pick deployable components. You can
          also specify an absolute directory.
        </x:div>
	<ref name="file-type"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="autodeploy-verifier-enabled" a:defaultValue="false">
        <x:div class="dtd">
          To enable/disable verifier, during auto-deployment. If true,
          verification will be done before any deployment activity.
          In the event of any verifier test failure, deployment is not
          performed.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="autodeploy-jsp-precompilation-enabled" a:defaultValue="false">
        <x:div class="dtd">
          If true, JSPs will be pre compiled during deployment of the
          war module(s).
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="deploy-xml-validation" a:defaultValue="full">
        <x:div class="dtd">
          specifies if descriptor validation is required or not.
          <x:dl>
            <x:dt>full</x:dt>
            <x:dd>
              xml will be validated and in case of xml validation
              errors, deployment will fail.
            </x:dd>
            <x:dt>parsing</x:dt>
            <x:dd>
              xml errors will be reported but deployment process will
              continue.
            </x:dd>
            <x:dt>none</x:dt>
            <x:dd>
              no xml validation will be perfomed on the standard or
              runtime deployment descriptors.
            </x:dd>
          </x:dl>
        </x:div>
        <ref name="validation-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="admin-session-timeout-in-minutes" a:defaultValue="60">
        <x:div class="dtd">
          timeout in minutes indicating the administration gui session
          timeout.
        </x:div>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="web-container">
    <element name="web-container">
      <ref name="web-container-attlist"/>
      <optional>
        <ref name="session-config"/>
      </optional>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="web-container-attlist" combine="interleave">
    <empty/>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="session-config">
    <element name="session-config">
      <ref name="session-config-attlist"/>
      <optional>
        <ref name="session-manager"/>
      </optional>
      <optional>
        <ref name="session-properties"/>
      </optional>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="session-config-attlist" combine="interleave">
    <empty/>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="session-manager">
    <element name="session-manager">
      <ref name="session-manager-attlist"/>
      <optional>
        <ref name="manager-properties"/>
      </optional>
      <optional>
        <ref name="store-properties"/>
      </optional>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="session-manager-attlist" combine="interleave">
    <empty/>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="manager-properties">
    <element name="manager-properties">
      <ref name="manager-properties-attlist"/>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="manager-properties-attlist" combine="interleave">
    <optional>
      <attribute name="session-file-name">
	<ref name="file-type"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="reap-interval-in-seconds"/>
    </optional>
    <optional>
      <attribute name="max-sessions"/>
    </optional>
    <optional>
      <attribute name="session-id-generator-classname"/>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="store-properties">
    <element name="store-properties">
      <ref name="store-properties-attlist"/>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="store-properties-attlist" combine="interleave">
    <optional>
      <attribute name="directory"/>
    </optional>
    <optional>
      <attribute name="reap-interval-in-seconds"/>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="session-properties">
    <element name="session-properties">
      <ref name="session-properties-attlist"/>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="session-properties-attlist" combine="interleave">
    <optional>
      <attribute name="timeout-in-seconds"/>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="ejb-container">
    <element name="ejb-container">
      <x:div class="dtd">
        Configuration of EJB Container. 
      </x:div>
      <ref name="ejb-container-attlist"/>
      <optional>
        <ref name="ejb-timer-service">
          <x:div class="dtd">
            The ejb-timer-service element contains the configuration
            for the ejb timer service.  There is at most one ejb timer
            service per server instance.
          </x:div>
        </ref>
      </optional>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="ejb-container-attlist" combine="interleave">
    <x:div class="dtd">
      Properties apply to all beans in all deployed applications,
      unless different parameters are specified in Sun ONE Application
      Server specific deployment descriptors. Applicability is
      indicated in parentheses, using the following acronyms:
      <x:dl>
        <x:dt>slsb</x:dt>
<x:dd>stateless session bean</x:dd>
        <x:dt>sfsb</x:dt>
<x:dd>stateful session bean</x:dd>
        <x:dt>eb</x:dt>
<x:dd>entity bean (incl. read-only)</x:dd>
      </x:dl>
      <x:p>

      </x:p>
    </x:div>
    <optional>
      <attribute name="steady-pool-size" a:defaultValue="32" ias:le-than="@max-pool-size">
        <x:div class="dtd">
          (slsb,eb) number of bean instances normally maintained in
          pool. When a pool is first created, it will be populated
          with size equal to steady-pool-size. When an instance is
          removed from the pool, it is replenished asynchronously, so
          that the pool size is at or above the steady-pool-size. This
          additions will be in multiples of pool-resize-quantity. When
          a bean is disassociated from a method invocation, it is put
          back in the pool, subject to max-pool-size limit. If the max
          pool size is exceeded the bean id destroyed immediately. A
          pool cleaning thread, executes at an interval defined by
          pool-idle-timeout-in-seconds. This thread reduces the pool
          size to steady-pool-size, in steps defined by
          pool-resize-quantity. If the pool is empty, the required
          object will be created and returned immediately. This
          prevents threads from blocking till the pool is replenished
          by the background thread. steady-pool-size must be greater
          than 1 and at most equal to the max-pool-size.
        </x:div>
	<data type="nonNegativeInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="pool-resize-quantity" a:defaultValue="16" ias:le-than="@max-pool-size">
        <x:div class="dtd">
          (slsb,eb) size of bean pool grows (shrinks) in steps
          specified by pool-resize-quantity, subject to max-pool-size
          (steady-pool-size) limit.
        </x:div>
	<data type="nonNegativeInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="max-pool-size" a:defaultValue="64" ias:ge-than="@steady-pool-size">
        <x:div class="dtd">
          (slsb,eb) maximum size, a pool can grow to. A value of 0
          implies an unbounded pool. Unbounded pools eventually shrink
          to the steady-pool-size, in steps defined by
          pool-resize-quantity.
        </x:div>
	<data type="nonNegativeInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="cache-resize-quantity" a:defaultValue="32" ias:le-than="@max-cache-size">
        <x:div class="dtd">
          (eb,sfsb) Cache elements have identity, hence growth is in
          unit steps and created on demand. Shrinking of cache happens
          <x:p>
            when cache-idle-timeout-in-seconds timer expires and a
            cleaner thread passivates beans which have been idle for
            longer than cache-idle-timeout-in-seconds. All idle
            instances are passivated at once.  cache-resize-quantity
            does not apply in this case.
          </x:p>
          <x:p>
            when max cache size is reached, an asynchronous task is
            created to bring the size back under the max-cache-size
            limit. This task removes cache-resize-quantity elements,
            consulting the victim-selection-policy.
          </x:p>
          <x:p>
            Must be greater than 1 and less than max-cache-size.          
          </x:p>
        </x:div>
	<data type="nonNegativeInteger">
	  <param name="minInclusive">1</param>
	</data>
      </attribute>
    </optional>
    <optional>
      <attribute name="max-cache-size" a:defaultValue="512">
        <x:div class="dtd">
          (sfsb,eb) specifies the maximum number of instances that can
          be cached.  For entity beans, internally two caches are
          maintained for higher concurrency: (i) Ready (R$) (ii)
          Active in an Incomplete Transaction (TX$). The TX$ is
          populated with instances from R$ or from the Pool
          directly. When an instance in TX$ completes the transaction,
          it is placed back in the R$ (or in pool, in case an instance
          with same identity already is in R$). max-cache-size only
          specifies the upper limit for R$. The container computes an
          appropriate size for TX$. For SFSBs, after the 
          max-cache-size is reached, beans (as determined by
          the victim-selection-policy) get passivated.
        </x:div>
	<data type="nonNegativeInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="pool-idle-timeout-in-seconds" a:defaultValue="600">
        <x:div class="dtd">
          (slsb,eb) defines the rate at which the pool cleaning thread
          is executed.  this thread checks if current size is greater
          than steady pool size, it removes pool-resize-quantity
          elements. If the current size is less than steady-pool-size
          it is increased by pool-resize-quantity, with a ceiling of
          min (current-pool-size + pool-resize-quantity,
          max-pool-size) Only objects that have not been accessed for
          more than pool-idle-timeout-in-seconds are candidates for
          removal.
        </x:div>
	<data type="nonNegativeInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="cache-idle-timeout-in-seconds" a:defaultValue="600">
        <x:div class="dtd">
          (eb, sfsb) specifies the rate at which the cache cleaner thread is
          scheduled.  All idle instances are passivated at once.
        </x:div>
	<data type="nonNegativeInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="removal-timeout-in-seconds" a:defaultValue="5400">
        <x:div class="dtd">
          (sfsb) Instance is removed from cache or passivation store, if
          it is not accesed within this time. All instances that can
          be removed, will be removed.
        </x:div>
	<data type="nonNegativeInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="victim-selection-policy" a:defaultValue="nru">
        <x:div class="dtd">
          (sfsb) Victim selection policy when cache needs to
          shrink. Victims are passivated. Entity Bean Victims are
          selected always using fifo discipline. Does not apply to
          slsb because it does not matter, which particular instances
          are removed.
        </x:div>
        <choice>
          <value x:desc="method picks victims, oldest instance first.">fifo</value>
          <value x:desc="algorithm picks least recently accessed instances. ">lru</value>
          <value x:desc="policy tries to pick 'not recently used' instances and is a pseudo-random selection process.">nru</value>
        </choice>
      </attribute>
    </optional>
    <optional>
      <attribute name="commit-option" a:defaultValue="B">
        <x:div class="dtd">
          (eb) Entity Beans caching is controlled by this
          setting. Commit Option C implies that no caching is
          performed in the container.
        </x:div>
        <choice>
          <value>B</value>
          <value>C</value>
        </choice>
      </attribute>
    </optional>
    <optional>
      <attribute name="session-store">
        <x:div class="dtd">
          specifies the directory where passivated beans and persisted
          HTTP sessions are stored on the file system.  Defaults to
          $INSTANCE-ROOT/session-store
        </x:div>
	<ref name="file-type"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="ejb-timer-service">
    <element name="ejb-timer-service">
      <x:div class="dtd">
        Configuration for ejb timer service.
      </x:div>
     <ref name="ejb-timer-service-attlist"/>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="ejb-timer-service-attlist" combine="interleave">
    <optional>
      <attribute name="minimum-delivery-interval-in-millis" a:defaultValue="7000">
        <x:div class="dtd">
          is the minimum number of milliseconds allowed before the
          next timer expiration for a particular timer can occur.  It
          guards against extremely small timer increments that can
          overload the server.
        </x:div>
	<data type="positiveInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="max-redeliveries" a:defaultValue="1">
        <x:div class="dtd">
          is the maximum number of times the ejb timer service will
          attempt to redeliver a timer expiration due to exception or
          rollback.  The minimum value is 1, per the ejb
          specification.
        </x:div>
	<data type="positiveInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="timer-datasource" ias:references-to="jdbc-resources">
        <x:div class="dtd">
          overrides the cmp-resource (jdbc/__TimerPool) specified in
          sun-ejb-jar.xml of (__ejb_container_timer_app) of the timer
          service system application. By default this is set to
          jdbc/__TimerPool, but can be overridden for the cluster or
          server instance, if they choose to.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="redelivery-interval-internal-in-millis" a:defaultValue="5000">
        <x:div class="dtd">
          is the number of milliseconds the ejb timer service will
          wait after a failed ejbTimeout delivery before attempting a
          redelivery.
        </x:div>
	<data type="positiveInteger"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="mdb-container">
    <element name="mdb-container">
      <ref name="mdb-container-attlist"/>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="mdb-container-attlist" combine="interleave">
    <optional>
      <attribute name="steady-pool-size" a:defaultValue="10" ias:le-than="@max-pool-size">
        <x:div class="dtd">
          minimum and initial number of message driven beans in
	  pool. An integer in the range [0, max-pool-size].
        </x:div>
	<data type="nonNegativeInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="pool-resize-quantity" a:defaultValue="2" ias:le-than="@max-pool-size">
        <x:div class="dtd">
          quantum of increase/decrease, when the size of pool
          grows/shrinks. An integer in the range [0, max-pool-size].
        </x:div>
	<data type="nonNegativeInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="max-pool-size" a:defaultValue="60" ias:ge-than="@steady-pool-size">
        <x:div class="dtd">
          maximum size, pool can grow to. A non-negative integer.
        </x:div>
	<data type="nonNegativeInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="idle-timeout-in-seconds" a:defaultValue="600">
        <x:div class="dtd">
          idle bean instance in pool becomes a candidate for deletion,
          when this timeout expires.
        </x:div>
	<data type="nonNegativeInteger"/>
      </attribute>
    </optional>
    <x:div class="dtd">
      The above pool defaults, apply if they are not specified in the
      Sun ONE Application Server specific Deployment Descriptors.
    </x:div>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="jms-service">
    <element name="jms-service">
      <x:div class="dtd">
        The jms-service element specifies information about the
        bundled/built-in JMS service that is managed by Application
        Server.
      </x:div>
      <ref name="jms-service-attlist"/>
      <zeroOrMore>
        <ref name="jms-host"/>
      </zeroOrMore>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="jms-service-attlist" combine="interleave">
    <optional>
      <attribute name="init-timeout-in-seconds" a:defaultValue="60">
        <x:div class="dtd">
          specifies the time server instance will wait at start up,
          for its corresponding JMS service instance to respond. If
          there is no response within the specifies timeout period,
          application server startup is aborted. Default value of 60
          seconds.
        </x:div>
	<data type="positiveInteger"/>
      </attribute>
    </optional>
    <attribute name="type">
        <x:div class="dtd">
          Type of JMS service.
        </x:div>
        <choice>
          <value>LOCAL</value>
          <value>EMBEDDED</value>
          <value>REMOTE</value>
        </choice>
    </attribute>
    <optional>
      <attribute name="start-args">
        <x:div class="dtd">
          specifies the arguments that will be supplied to start up
          the corresponding JMS service instance.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="default-jms-host">
        <x:div class="dtd">
          reference to a jms-host that to be started when type of
          jms-service is LOCAL.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="reconnect-interval-in-seconds" a:defaultValue="5">
        <x:div class="dtd">
          Interval between reconnect attempts, in seconds. An integer.
        </x:div>
	<data type="positiveInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="reconnect-attempts" a:defaultValue="3">
        <x:div class="dtd">
          Total number of attempts to reconnect. An integer.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="reconnect-enabled" a:defaultValue="true">
        <x:div class="dtd">
          Causes reconnect feature to be enabled (true) or disabled
          (false). A boolean.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="addresslist-behavior" a:defaultValue="random">
        <x:div class="dtd">
          Determines broker selection from imqAddressList.
        </x:div>
        <choice>
          <value x:desc="causes selection to be performed randomly">random</value>
          <value x:desc="causes selection to be performed sequentially">priority</value>
        </choice>
      </attribute>
    </optional>
    <optional>
      <attribute name="addresslist-iterations" a:defaultValue="3">
        <x:div class="dtd">
          Number of times reconnect logic should iterate
          imqAddressList. This property will not be used if the
          addresslist-behavior is "random". An integer.
        </x:div>
	<data type="positiveInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="mq-scheme">
	<x:div class="dtd">
	  Scheme for establishing connection with broker. For example,
	  scheme can be specified as "http" for connecting to MQ
	  broker over http. Default is "mq".
	</x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="mq-service">
	<x:div class="dtd">
	  Type of broker service. If a broker supports ssl, then the
	  type of service can be "ssljms". If nothing is specified, MQ
	  will assume 4that service is "jms".
	</x:div>
      </attribute>
    </optional>
    <x:div class="dtd">
      <x:h2>Correctness criteria</x:h2>
      <x:p>
        default-jms-host refers to an existing jms-host element.
      </x:p>
      <x:p>
        connection-pool-with-hadb-information refers to an existing
        connection-pool element.
      </x:p>
    </x:div>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="jms-host">
    <element name="jms-host">
      <ref name="jms-host-attlist"/>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="jms-host-attlist" combine="interleave">
    <attribute name="name" ias:type="key">
      <ref name="name-type"/>
    </attribute>
    <optional>
      <attribute name="host">
	<x:div class="dtd">
	  ip V6 or V4 address or hostname.
	</x:div>
	<ref name="IPAddress-type"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="port" a:defaultValue="7676">
        <x:div class="dtd">
          the port number used by the JMS service.
        </x:div>
	<ref name="port-type"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="admin-user-name" a:defaultValue="admin">
        <x:div class="dtd">
          specifies the admin username.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="admin-password" a:defaultValue="admin">
        <x:div class="dtd">
          attribute specifies the admin password.
        </x:div>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="log-service">
    <element name="log-service">
      <x:div class="dtd">
        By default, logs would be kept in $INSTANCE-ROOT/logs. The
        following log files will be stored under the logs directory.
        <x:dl>
          <x:dt>access.log</x:dt>
          <x:dd>keeps default virtual server HTTP access messages.</x:dd>
          <x:dt>server.log</x:dt>
          <x:dd>keeps log messages from default virtual server.
          Messages from other configured virtual servers also go here,
          unless log-file is explicitly specified in the virtual-server
          element.</x:dd>
        </x:dl>
      </x:div>
      <ref name="log-service-attlist"/>
      <optional>
        <ref name="module-log-levels"/>
      </optional>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="log-service-attlist" combine="interleave">
    <optional>
      <attribute name="file">
        <x:div class="dtd">
          can be used to rename or relocate server.log using absolute
          path.
        </x:div>
	<ref name="file-type"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="use-system-logging" a:defaultValue="false">
        <x:div class="dtd">
          if true, will utilize Unix syslog service or Windows Event
          Logging to produce and manage logs.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="log-handler">
        <x:div class="dtd">
          Can plug in a custom log handler to add it to the chain of
          handlers to log into a different log destination than the
          default ones given by the system (which are Console, File
          and Syslog). It is a requirement that customers use the log
          formatter provided by the the system to maintain uniformity
          in log messages. The custom log handler will be added at the
          end of the handler chain after File + Syslog Handler,
          Console Handler and JMX Handler. User cannot replace the
          handler provided by the system, because of loosing precious
          log statements. The Server Initialization will take care of
          installing the custom handler with the system formatter
          initialized. The user need to use JSR 047 Log Handler
          Interface to implement the custom handler.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="log-filter">
        <x:div class="dtd">
          Can plug in a log filter to do custom filtering of log
          records .  By default there is no log filter other than the
          log level filtering provided by JSR 047 log API.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="log-to-console" a:defaultValue="false">
        <x:div class="dtd">
          logs will be sent to stderr when asadmin start-domain
          verbose is used
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="log-rotation-limit-in-bytes" a:defaultValue="500000">
        <x:div class="dtd">
          Log Files will be rotated when the file size reaches the
          limit.
        </x:div>
        <data type="positiveInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="log-rotation-timelimit-in-minutes" a:defaultValue="0">
        <x:div class="dtd">
          This is a new attribute to enable time based log
          rotation. The Log File will be rotated only if this value is
          non-zero and the valid range is 60 minutes (1 hour) to
          10*24*60 minutes (10 days).  If the value is zero then the
          files will be rotated based on size specified in
          log-rotation-limit-in-bytes.
        </x:div>
	<data type="nonNegativeInteger">
          <param name="maxInclusive">14400</param>
        </data>	
      </attribute>
    </optional>
    <optional>
      <attribute name="alarms" a:defaultValue="false">
        <x:div class="dtd">
          if true, will turn on alarms for the logger. The SEVERE and
          WARNING messages can be routed through the JMX framework to
          raise SEVERE and WARNING alerts. Alarms are turned off by
          default.
        </x:div>
       <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="retain-error-statistics-for-hours" a:defaultValue="5">
        <x:div class="dtd">
          The number of hours since server start, for which error 
          statistics should be retained in memory. The default and 
          minimum value is 5 hours. The maximum value allowed is 
          500 hours. Note that larger values will incur additional 
          memory overhead.
        </x:div>
        <data type="positiveInteger">
          <param name="minInclusive">5</param>
          <param name="maxInclusive">500</param>
        </data>	
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="log-level">
    <x:div class="dtd">
      Configure the Log Levels for Various Loggers in the SUN ONE
      Modules.  The Default level is set to INFO, The log levels can
      be changed using one of the seven levels. Please refer JSR 047
      to understand the Log Levels.
      <x:p>
        The Logs can be completely turned off by using 'OFF'
        value. The names of the module loggers are self-explanatory
      </x:p>
    </x:div>
    <choice>
      <value>FINEST</value>
      <value>FINER</value>
      <value>FINE</value>
      <value>CONFIG</value>
      <value>INFO</value>
      <value>WARNING</value>
      <value>SEVERE</value>
      <value>OFF</value>
    </choice>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="module-log-levels">
    <element name="module-log-levels">
      <ref name="module-log-levels-attlist"/>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="module-log-levels-attlist" combine="interleave">
    <optional>
      <attribute name="root" a:defaultValue="INFO">
        <ref name="log-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="server" a:defaultValue="INFO">
        <ref name="log-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="ejb-container" a:defaultValue="INFO">
        <ref name="log-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="cmp-container" a:defaultValue="INFO">
        <ref name="log-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="mdb-container" a:defaultValue="INFO">
        <ref name="log-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="web-container" a:defaultValue="INFO">
        <ref name="log-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="classloader" a:defaultValue="INFO">
        <ref name="log-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="configuration" a:defaultValue="INFO">
        <ref name="log-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="naming" a:defaultValue="INFO">
        <ref name="log-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="security" a:defaultValue="INFO">
        <ref name="log-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="jts" a:defaultValue="INFO">
        <ref name="log-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="jta" a:defaultValue="INFO">
        <ref name="log-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="admin" a:defaultValue="INFO">
        <ref name="log-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="deployment" a:defaultValue="INFO">
        <ref name="log-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="verifier" a:defaultValue="INFO">
        <ref name="log-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="jaxr" a:defaultValue="INFO">
        <ref name="log-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="jaxrpc" a:defaultValue="INFO">
        <ref name="log-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="saaj" a:defaultValue="INFO">
        <ref name="log-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="corba" a:defaultValue="INFO">
        <ref name="log-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="javamail" a:defaultValue="INFO">
        <ref name="log-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="jms" a:defaultValue="INFO">
        <ref name="log-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="connector" a:defaultValue="INFO">
        <ref name="log-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="jdo" a:defaultValue="INFO">
        <ref name="log-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="cmp" a:defaultValue="INFO">
        <ref name="log-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="util" a:defaultValue="INFO">
        <ref name="log-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="resource-adapter" a:defaultValue="INFO">
        <ref name="log-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="synchronization" a:defaultValue="INFO">
        <ref name="log-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="node-agent" a:defaultValue="INFO">
        <ref name="log-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="self-management" a:defaultValue="INFO">
        <ref name="log-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="group-management-service" a:defaultValue="INFO">
        <ref name="log-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="management-event" a:defaultValue="INFO">
        <ref name="log-level"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="security-service">
    <element name="security-service">
      <x:div class="dtd">
        The security service element defines parameters and
        configuration information needed by the core J2EE security
        service. Some container-specific security configuration
        elements are in the various container configuration elements
        and not here. SSL configuration is also elsewhere. At this
        time the security service configuration consists of a set of
        authentication realms. A number of top-level attributes are
        defined as well.
      </x:div>
      <ref name="security-service-attlist"/>
      <oneOrMore>
        <ref name="auth-realm"/>
      </oneOrMore>
      <oneOrMore>
        <ref name="jacc-provider"/>
      </oneOrMore>
      <zeroOrMore>
        <ref name="audit-module"/>
      </zeroOrMore>
      <zeroOrMore>
	<ref name="message-security-config">
	  <x:div class="dtd">
	    Optional list of layer specific lists of configured
	    message security providers.
	  </x:div>
	</ref>
      </zeroOrMore>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="security-service-attlist" combine="interleave">
    <optional>
      <attribute name="default-realm" a:defaultValue="file" ias:references-to="auth-realms">
        <x:div class="dtd">
          Specifies which realm (by name) is used by default when no
          realm is specifically requested. The file realm is the
          common default.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="default-principal">
        <x:div class="dtd">
          Used as the identity of default security contexts when
          necessary and no principal is provided.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="default-principal-password">
        <x:div class="dtd">
          Password of default principal.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="anonymous-role" a:defaultValue="AttributeDeprecated">
        <x:div class="dtd">
          This attribute is deprecated.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="audit-enabled" a:defaultValue="false">
        <x:div class="dtd">
          If true, additional access logging is performed to provide
          audit information.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="jacc" a:defaultValue="default" ias:references-to="jacc-providers">
        <x:div class="dtd">
          Specifies the name of the jacc-provider element to use for
          setting up the JACC infrastructure. The default value
          "default" does not need to be changed unless adding a custom
          JACC provider.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="audit-modules" a:defaultValue="default" ias:references-to="audit-modules">
        <x:div class="dtd">
          Optional list of audit provider modules which will be used
          by the audit subsystem. The default value refers to the
          internal log-based audit module.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="activate-default-principal-to-role-mapping" a:defaultValue="false">
        <x:div class="dtd">
           Causes the appserver to apply a default principal to role mapping, 
           to any application that does not have an application specific mapping
           defined. Every role is mapped to a same-named (as the role) instance
           of a java.security.Principal implementation class 
           (see mapped-principal-class). This behavior is similar to that of 
           Tomcat servlet container. It is off by default.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="mapped-principal-class">
        <x:div class="dtd">
            This attribute is used to customize the java.security.Principal 
            implementation class used in the default principal to role mapping.
            This attribute is optional. When it is not specified,
            com.sun.enterprise.deployment.Group implementation of 
            java.security.Principal is used. The value of this attribute is 
            only relevant when the activate-default principal-to-role-mapping
            attribute is set to true.
        </x:div>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="audit-module">
    <element name="audit-module">
      <x:div class="dtd">
        An audit-module specifies an optional plug-in module which
        implements audit capabilities.
      </x:div>
      <ref name="audit-module-attlist"/>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="audit-module-attlist" combine="interleave">
    <attribute name="name" ias:type="key" ias:belongs-to="audit-modules">
      <x:div class="dtd">
        defines the name of this realm
      </x:div>
      <ref name="name-type"/>
    </attribute>
    <attribute name="classname">
      <x:div class="dtd">
        defines the java class which implements this audit module
      </x:div>
      <ref name="classname-type"/>
    </attribute>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="auth-realm">
    <element name="auth-realm">
      <x:div class="dtd">
        The auth-realm element defines and configures one
        authentication realm.  There must be at least one realm
        available for a server instance; any number can be configured,
        as desired.
        <x:p>
        Authentication realms need provider-specific parameters which
        vary depending on what a particular implementation needs;
        these are defined as properties since they vary by provider
        and cannot be predicted for any custom or add-on providers.
        </x:p>
        <x:p>
        For the default file provider, the param used is: file
        </x:p>
      </x:div>
      <ref name="auth-realm-attlist"/>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="auth-realm-attlist" combine="interleave">
    <attribute name="name" ias:type="key" ias:belongs-to="auth-realms">
      <x:div class="dtd">
        defines the name of this realm
      </x:div>
      <ref name="name-type"/>
    </attribute>
    <attribute name="classname">
      <x:div class="dtd">
        defines the java class which implements this realm
      </x:div>
      <ref name="classname-type"/>
    </attribute>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="jacc-provider">
    <element name="jacc-provider">
      <x:div class="dtd">
        The jacc-provider element defines the standard JACC properties
        used for setting up the JACC provider. It also allows optional
        properties which can be used by the provider implementation
        for its configuration.
      </x:div>
      <ref name="jacc-provider-attlist"/>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="jacc-provider-attlist" combine="interleave">
    <attribute name="name" ias:type="key" ias:belongs-to="jacc-providers">
      <x:div class="dtd">
        A name for this jacc-provider. Is always "default" for the
        default provider.
      </x:div>
      <ref name="name-type"/>
    </attribute>
    <attribute name="policy-provider">
      <x:div class="dtd">
        Corresponds to (and can be overridden by) the system property
        javax.security.jacc.policy.provider
      </x:div>
      <ref name="classname-type"/>
    </attribute>
    <attribute name="policy-configuration-factory-provider">
      <x:div class="dtd">
        Corresponds to (and can be overridden by) the system property
        javax.security.jacc.PolicyConfigurationFactory.provider
      </x:div>
      <ref name="classname-type"/>
    </attribute>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="transaction-service">
    <element name="transaction-service">
      <x:div class="dtd">
        Configuration for Transaction Manager.
      </x:div>
      <ref name="transaction-service-attlist"/>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="transaction-service-attlist" combine="interleave">
    <optional>
      <attribute name="automatic-recovery" a:defaultValue="false">
        <x:div class="dtd">
          if true, server instance attempts recovery at restart.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="timeout-in-seconds" a:defaultValue="0">
        <x:div class="dtd">
          amount of time the transaction manager waits for response
          from a datasource participating in transaction.  A value of
          0 implies infinite timeout.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="tx-log-dir">
        <x:div class="dtd">
          Transaction service creates a sub directory 'tx' under
          tx-log-dir to store the transaction logs. The default value
          of the tx-log-dir is $INSTANCE-ROOT/logs. If this attribute
          is not explicitly specified in the &lt;transaction-service&gt;
          element, 'tx' sub directory will be created under the path
          specified in log-root attribute of &lt;domain&gt; element.
        </x:div>
	<ref name="file-type"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="heuristic-decision" a:defaultValue="rollback">
        <x:div class="dtd">
          During recovery, if outcome of a transaction cannot be
          determined from the logs, then this property is used to fix
          the outcome.
        </x:div>
        <choice>
          <value>rollback</value>
          <value>commit</value>
        </choice>
      </attribute>
    </optional>
    <optional>
      <attribute name="retry-timeout-in-seconds" a:defaultValue="600">
        <x:div class="dtd">
          used to determine the retry time in the following scenarios.
          <x:ol>
            <x:li>Time to wait at the transaction recovery time, when
            resources are unreachable.</x:li>
            <x:li>If there are any transient
            exceptions in the second phase of the 2 PC protocol.</x:li>
          </x:ol>
          A negative value indicates infinite retry.  '0' indicates no
          retry.  A positive value indicates the number of seconds for
          which retry will be attempted. Default is 10 minutes which
          may be appropriate for a database being restarted.
        </x:div>
	<data type="nonNegativeInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="keypoint-interval" a:defaultValue="2048">
        <x:div class="dtd">
          property used to specify the number of transactions between
          keypoint operations on the log.  A Keypoint operations could
          reduce the size of the transaction log files.  A larger
          value for this property (for example, 1000) will result in
          larger transaction log files, between log compactions, but
          less keypoint operations, and potentially better
          performance.  A smaller value (e.g. 20) results in smaller
          log files but slightly reduced performance due to the
          greater frequency of keypoint operations.
        </x:div>
	<data type="positiveInteger"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="monitoring-service">
    <element name="monitoring-service">
      <ref name="monitoring-service-attlist"/>
      <optional>
        <ref name="module-monitoring-levels"/>
      </optional>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="monitoring-service-attlist" combine="interleave">
    <empty/>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="module-monitoring-levels">
    <element name="module-monitoring-levels">
      <ref name="module-monitoring-levels-attlist"/>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="module-monitoring-levels-attlist" combine="interleave">
    <x:div class="dtd">
      The attributes of module-monitoring-levels define various
      monitoring levels for various components:
    </x:div>
    <optional>
      <attribute name="thread-pool" a:defaultValue="OFF">
        <x:div class="dtd">
          all the thread-pools used by the run time.
        </x:div>
       <ref name="monitoring-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="orb" a:defaultValue="OFF">
        <x:div class="dtd">
          specifies the level for connection managers of the orb,
          which apply to connections to the orb
        </x:div>
        <ref name="monitoring-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="ejb-container" a:defaultValue="OFF">
        <x:div class="dtd">
          various ejbs deployed to the server, ejb-pools, ejb-caches
          and ejb-methods.
        </x:div>
        <ref name="monitoring-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="web-container" a:defaultValue="OFF">
        <ref name="monitoring-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="transaction-service" a:defaultValue="OFF">
        <x:div class="dtd">
          transaction subsystem.
        </x:div>
        <ref name="monitoring-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="http-service" a:defaultValue="OFF">
        <x:div class="dtd">
          http engine and the http listeners therein.
        </x:div>
        <ref name="monitoring-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="jdbc-connection-pool" a:defaultValue="OFF">
        <x:div class="dtd">
          monitoring level for all the jdbc-connection-pools used by
          the runtime.
        </x:div>
        <ref name="monitoring-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="connector-connection-pool" a:defaultValue="OFF">
        <x:div class="dtd">
          monitoring level for all the connector-connection-pools used
          by the runtime.
        </x:div>
        <ref name="monitoring-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="connector-service" a:defaultValue="OFF">
	<ref name="monitoring-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="jms-service" a:defaultValue="OFF">
	<ref name="monitoring-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="jvm" a:defaultValue="OFF">
	<ref name="monitoring-level"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="diagnostic-service">
    <element name="diagnostic-service">
      <x:div class="dtd">
      </x:div>
      <ref name="diagnostic-service-attlist"/>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="diagnostic-service-attlist" combine="interleave">
    <optional>
      <attribute name="compute-checksum" a:defaultValue="true">
        <x:div class="dtd">
            boolean attribute. Indicates whether checksum of binaries is
            computed.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>  
      <attribute name="verify-config" a:defaultValue="true">
        <x:div class="dtd">
            A boolean attribute which indicates whether output of
            verify-config asadmin command is included in the diagnostic
            report.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="capture-install-log" a:defaultValue="true">
        <x:div class="dtd">
            boolean attribute which indicated whether the log generated
            during installation of the application server is captured.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="capture-system-info" a:defaultValue="true">
        <x:div class="dtd">
            boolean attribute which specifies whether OS level information
            is collected as part of diagnostic report.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="capture-hadb-info" a:defaultValue="true">
        <x:div class="dtd">
            boolean attribute to indicate whether HADB related information
            is collected.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="capture-app-dd" a:defaultValue="true">
        <x:div class="dtd">
            boolean attribute. If "true", application deployment descriptors
            in plain text are captured as part of diagnostic report. If 		
            Deployment descriptors contain any confidential information,
            it's recommended to set it to false.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="min-log-level" a:defaultValue="INFO">
        <x:div class="dtd">
            The log levels can be changed using one of the seven levels. 		
            Please refer JSR 047 to understand the Log Levels.
            The default level is INFO, meaning that messages at that level 	
            or higher (WARNING, SEVERE) are captured as part of the
            diagnostic report.If set to OFF, log contents will not be
            captured as part of diagnostic report.

        </x:div>
        <ref name="log-level"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="max-log-entries" a:defaultValue="500">
        <x:div class="dtd">
            Max no. of log entries being captured as part of diagnostic
            report. A non negative value.
        </x:div>
        <data type="nonNegativeInteger"/>
      </attribute>
    </optional>

  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="group-management-service">
    <element name="group-management-service">
      <x:div class="dtd">
        group-management-service(GMS) is an in-process service that       
            provides cluster monitoring and group communication services. GMS 
            notifies registered modules in an application server instance     
            when one or more members in the cluster fail (become              
            unreachable). GMS also provides the ability to send and receive   
            messages between a group of processes. GMS is a abstraction layer 
            that plugs-in group communication technologies which rely on 
            a configurable stack of protocols. Each of these protocols has 
            properties that can be changed for a given network and deployment 
            topology.  
            These relevant configurable protocols are: 
            fd-protocol enables its members to periodically monitor other group 
            members to determine their availability in the group. 
            merge-protocol is used to reunite subgroups that formed as a result 
            of a network partition after such a partition has healed. 
            ping-protocol is used for discovery of the group and its members. 
            vs-protocol verifies suspect instances by adding a verification 
            layer to mark a failure suspicion as a confirmed failure.      
      </x:div>
      <ref name="group-management-service-attlist"/>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="group-management-service-attlist" combine="interleave">
    <optional>
      <attribute name="fd-protocol-max-tries" a:defaultValue="3">
        <x:div class="dtd">
            Maximum number of attempts to try before
            GMS confirms that a failure is suspected in the group.
            Must be a positive integer.
        </x:div>
        <data type="positiveInteger"/>
      </attribute>
    </optional>

    <optional>
      <attribute name="fd-protocol-timeout-in-millis" a:defaultValue="2000">
        <x:div class="dtd">
            Period of time between monitoring attempts to detect failure.
            Must be a positive integer.
        </x:div>
        <data type="positiveInteger">
          <param name="minInclusive">1000</param>
          <param name="maxInclusive">120000</param>
        </data>	
      </attribute>
    </optional>

    <optional>
      <attribute name="merge-protocol-max-interval-in-millis" a:defaultValue="10000">
        <x:div class="dtd">
            Specifies the maximum amount of time to wait to collect
            sub-group information before performing a merge.
            Must be a positive integer.
        </x:div>
        <data type="positiveInteger">
          <param name="minInclusive">10000</param>
          <param name="maxInclusive">15000</param>
        </data>	
      </attribute>
    </optional>

    <optional>
      <attribute name="merge-protocol-min-interval-in-millis" a:defaultValue="5000">
        <x:div class="dtd">
            specifies the minimum amount of time to wait to collect
            sub-group information before performing a merge.
            Must be a positive integer.
        </x:div>
        <data type="positiveInteger">
          <param name="minInclusive">1000</param>
          <param name="maxInclusive">10000</param>
        </data>	
      </attribute>
    </optional>

    <optional>
      <attribute name="ping-protocol-timeout-in-millis" a:defaultValue="2000">
        <x:div class="dtd">
            Amount of time in milliseconds that GMS waits for discovery
            of other members in this group.
            Must be a positive integer.
        </x:div>
        <data type="positiveInteger">
          <param name="minInclusive">1000</param>
          <param name="maxInclusive">120000</param>
        </data>	
      </attribute>
    </optional>

    <optional>
      <attribute name="vs-protocol-timeout-in-millis" a:defaultValue="1500">
        <x:div class="dtd">
            After this timeout a suspected failure is marked as verified.
            Must be a positive integer.
        </x:div>
        <data type="positiveInteger">
          <param name="minInclusive">1500</param>
          <param name="maxInclusive">120000</param>
        </data>	
      </attribute>
    </optional>

  

</define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="java-config">
    <element name="java-config">
      <x:div class="dtd">
        Java Runtime environment configuration
      </x:div>
      <ref name="java-config-attlist"/>
      <optional>
        <ref name="profiler"/>
      </optional>
      <zeroOrMore>
        <choice>
          <ref name="jvm-options"/>
          <ref name="property"/>
        </choice>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="java-config-attlist" combine="interleave">
    <optional>
      <attribute name="java-home" a:defaultValue="${com.sun.aas.javaRoot}">
	<x:div class="dtd">
        Specifies the installation directory for Java runtime.  JDK
        1.4 or higher is supported.
      </x:div>
    </attribute>
    </optional>
    <optional>
      <attribute name="debug-enabled" a:defaultValue="false">
        <x:div class="dtd">
          If set to true, the server starts up in debug mode ready for
          attaching with a JPDA based debugger.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="debug-options" a:defaultValue="-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n">
        <x:div class="dtd">
          JPDA based debugging options string.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="rmic-options" a:defaultValue="-iiop -poa -alwaysgenerate -keepgenerated -g">
        <x:div class="dtd">
          Options string passed to RMI compiler, at application
          deployment time.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="javac-options" a:defaultValue="-g">
        <x:div class="dtd">
          Options string passed to Java compiler, at application
          deployment time.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="classpath-prefix">
        <x:div class="dtd">
          A java classpath string that is prefixed to server-classpath
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="classpath-suffix">
        <x:div class="dtd">
          A java classpath string that is appended to server-classpath
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="server-classpath">
        <x:div class="dtd">
          A java classpath string that specifies the classes needed by
          the Application server. Do not expect users to change this
          under normal conditions.
          The shared application server classloader forms the final classpath 
          by concatenating classpath-prefix, ${INSTALL_DIR}/lib, 
          server-classpath, and classpath-suffix.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="system-classpath">
        <x:div class="dtd">
          This classpath string supplied to the jvm at server startup.
          Contains appserv-launch.jar by default. Users may add to this
          classpath.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="native-library-path-prefix">
        <x:div class="dtd">
          is prepended to the native library path, which is constructed internally.
          <x:p>
          Internally, the native library path is automatically
          constructed to be a concatenation of Application Server
          installation relative path for its native shared libraries,
          standard JRE native library path, the shell environment
          setting (LD-LIBRARY-PATH on Unix) and any path that may be
          specified in the profile element.
          </x:p>
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="native-library-path-suffix">
        <x:div class="dtd">
          is appended to the native library path, which is constructed as described above.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="bytecode-preprocessors">
        <x:div class="dtd">
          A comma separated list of classnames, each of which must
          implement the com.sun.appserv.BytecodePreprocessor
          interface.  Each of the specified preprocessor class will be
          called in the order specified. At the moment the comelling
          use is for a 3rd party Performance Profiling tool.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="env-classpath-ignored" a:defaultValue="true">
        <x:div class="dtd">
          If set to false, the CLASSPATH environment variable will be
          read and appended to the Application Server classpath, which
          is constructed as described above. The CLASSPATH environment
          variable will be added after the classpath-suffix, at the
          very end.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="jvm-options">
    <element name="jvm-options">
      <x:div class="dtd">
        String value for options that will be passed to the JVM
      </x:div>
      <ref name="jvm-options-attlist"/>
      <text/>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="jvm-options-attlist" combine="interleave">
    <empty/>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="profiler">
    <element name="profiler">
      <x:div class="dtd">
        Profilers could be one of jprobe, optimizeit, hprof, wily and
        so on jvm-options and property elements are used to record the
        settings needed to get a particular profiler going. A server
        instance is tied to a particular profiler, by the profiler
        element in java-config.  Changing the profiler will require a
        server restart.
        <x:p>
          The adminstrative graphical interfaces, could list multiple
          supported profilers (incomplete at this point) and will
          populate server.xml appropriately.
        </x:p>
      </x:div>
     <ref name="profiler-attlist"/>
      <zeroOrMore>
        <choice>
          <ref name="jvm-options"/>
          <ref name="property"/>
        </choice>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="profiler-attlist" combine="interleave">
    <attribute name="name" ias:type="key">
      <ref name="name-type"/>      
    </attribute>
    <optional>
      <attribute name="classpath"/>
    </optional>
    <optional>
      <attribute name="native-library-path"/>
    </optional>
    <optional>
      <attribute name="enabled" a:defaultValue="true">
        <ref name="boolean"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="availability-service">
    <element name="availability-service">
      <x:div class="dtd">
        SE/EE only: TBD Needs explanation
      </x:div>
      <ref name="availability-service-attlist"/>
      <optional>
        <ref name="web-container-availability"/>
      </optional>
      <optional>
        <ref name="ejb-container-availability"/>
      </optional>
      <optional>
        <ref name="jms-availability"/>
      </optional>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="availability-service-attlist" combine="interleave">
    <optional>
      <attribute name="availability-enabled" a:defaultValue="true">
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="ha-agent-hosts">
        <x:div class="dtd">
            comma-delimited list of server host names or IP addresses where 
            high availability store management agents are running.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="ha-agent-port">
        <x:div class="dtd">
            port number where highly available store management agents 
            can be contacted
        </x:div>
        <ref name="port-type"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="ha-agent-password">
        <x:div class="dtd">
            password needed to contact highly available store management 
            agents
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="ha-store-name">
        <x:div class="dtd">
            Name of the session store
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="auto-manage-ha-store" a:defaultValue="false">
        <x:div class="dtd">
            If set to true, the lifecycle of the highly available store is 
            matched with the lifecycle of the highly available cluster.
            The store is started or stopped with the cluster. It is removed 
            when the cluster is deleted. When set to false, the store lifecycle 
            would have to manually managed by the administrator.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="store-pool-name">
        <x:div class="dtd">
          This is the jndi-name for the JDBC Connection Pool used
          potentially by both the Web Container and the EJB Stateful
          Session Bean Container for use in checkpointing/passivation
          when persistence-type = "ha".  See sfsb-ha-persistence-type
          and sfsb-persistence-type for more details.  It will default
          to "jdbc/hastore". This attribute can be over-ridden in
          either web-container-availability (with
          http-session-store-pool-name) and/or in
          ejb-container-availability (with sfsb-store-pool-name).  If
          store-pool-name is not over-ridden then both containers will
          share the same connection pool.  If either container
          over-rides then it may have its own dedicated pool.  In this
          case there must also be a new corresponding JDBC Resource
          and JDBC Connection Pool defined for this new pool name.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="ha-store-healthcheck-enabled" a:defaultValue="false">
        <x:div class="dtd">
            Application server stops saving session state when the store service
            does not function properly or is is not accessible for any reason. 
            When this attribute is set to true, periodic checking is done to 
            detect if the store service has become available again. 
            If healthcheck succeeds the session state saving is resumed.
            Defaults to false.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="ha-store-healthcheck-interval-in-seconds" a:defaultValue="5">
        <x:div class="dtd">
            The periodicity at which store health is checked.
        </x:div>
        <data type="positiveInteger"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="web-container-availability">
    <element name="web-container-availability">
      <x:div class="dtd">
        web-container-availability SE/EE only:
      </x:div>
      <ref name="web-container-availability-attlist"/>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="web-container-availability-attlist" combine="interleave">
    <optional>
      <attribute name="availability-enabled">
        <x:div class="dtd">
          This boolean flag controls whether availability is enabled
          for HTTP session persistence.  If this is "false", then
          session persistence is disabled for all web modules in j2ee
          apps and stand-alone web modules.  If it is "true" (and
          providing that the global availability-enabled in
          availability-service is also "true", then j2ee apps and
          stand-alone web modules may be ha enabled.  Finer-grained
          control exists at lower levels. If this attribute is
          missing, it "inherits" the value of the global
          availability-enabled under availability-service.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="persistence-type" a:defaultValue="memory">
        <x:div class="dtd">
          Specifies the session persistence mechanism for web applications
          that have availability enabled. Default is "memory".
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="persistence-frequency">
        <x:div class="dtd">
          The persistence frequency used by the session persistence
          framework, when persistence-type = "ha".  Values may be
          "time-based" or "web-event".  If it is missing, then the
          persistence-type will revert to "memory".
        </x:div>
        <ref name="session-save-frequency"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="persistence-scope">
        <x:div class="dtd">
          The persistence scope used by the session persistence
          framework, when persistence-type = "ha".  Values may be
          "session", "modified-session", "modified-attribute".  If it
          is missing, then the persistence-type will revert to
          "memory".
        </x:div>
        <ref name="session-save-scope"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="persistence-store-health-check-enabled" a:defaultValue="false">
        <x:div class="dtd">
            Deprecated.  This attribute has no effect.  If you wish to control
            enabling/disabling HADB health check, refer to 
            store-healthcheck-enabled attribute in the availability-service 
            element.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="sso-failover-enabled" a:defaultValue="false">
        <x:div class="dtd">
          This controls whether Single-Sign-On state will be made
          available for failover.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="http-session-store-pool-name">
        <x:div class="dtd">
          This is the jndi-name for the JDBC Connection Pool used by
          the HTTP Session Persistence Framework.  If missing,
          internal code will default it to value of store-pool-name
          under availability-service (ultimately "jdbc/hastore").
        </x:div>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="ejb-container-availability">
    <x:div class="dtd">
      SE/EE only
    </x:div>
    <element name="ejb-container-availability">
      <ref name="ejb-container-availability-attlist"/>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="ejb-container-availability-attlist" combine="interleave">
    <optional>
      <attribute name="availability-enabled">
        <x:div class="dtd">
          This boolean flag controls whether availability is enabled
          for SFSB checkpointing (and potentially passivation). If
          this is "false", then all SFSB checkpointing is disabled for
          all j2ee apps and ejb modules.  If it is "true" (and
          providing that the global availability-enabled in
          availability-service is also "true", then j2ee apps and
          stand-alone ejb modules may be ha enabled.  Finer-grained
          control exists at lower levels. If this attribute is
          missing, it inherits the value of the global
          availability-enabled under availability-service.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="sfsb-ha-persistence-type" a:defaultValue="ha">
        <x:div class="dtd">
          The persistence type used by the EJB Stateful Session Bean
          Container for checkpointing and passivating
          availability-enabled beans' state. Default is "ha".
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="sfsb-persistence-type" a:defaultValue="file">
        <x:div class="dtd">
          Specifies the passivation mechanism for stateful session beans
          that do not have availability enabled.
          Default is "file".
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="sfsb-checkpoint-enabled">
        <x:div class="dtd">
          This attribute is deprecated, replaced by
          availability-enabled and will be ignored if present.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="sfsb-quick-checkpoint-enabled">
        <x:div class="dtd">
          This attribute is deprecated and will be ignored if present.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="sfsb-store-pool-name">
        <x:div class="dtd">
          This is the jndi-name for the JDBC Connection Pool used by
          the EJB Stateful Session Bean Container for use in
          checkpointing/passivation when persistence-type = "ha".  See
          sfsb-ha-persistence-type and sfsb-persistence-type for more
          details.  It will default to value of store-pool-name under
          availability-service (ultimately "jdbc/hastore").
        </x:div>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="jdbc-connection-pool">
    <element name="jdbc-connection-pool">
      <x:div class="dtd">
        jdbc-connection-pool defines configuration used to create and
        manage a pool physical database connections. Pool definition
        is named, and can be referred to by multiple jdbc-resource
        elements (See &lt;jdbc-resource&gt;).
        <x:p>
          Each named pool definition results in a pool instantiated at
          server start-up. Pool is populated when accessed for the
          first time. If two or more jdbc-resource elements point to
          the same jdbc-connection-pool element, they are using the
          same pool of connections, at run time.
        </x:p>
      </x:div>
      <ref name="jdbc-connection-pool-attlist"/>
      <optional>
        <ref name="description"/>
      </optional>
      <zeroOrMore>
        <ref name="property">
          <x:div class="dtd">
            Most JDBC 2.0 drivers permit use of standard property
            lists, to specify User, Password and other resource
            configuration. While these are optional properties,
            according to the specification, several of these
            properties may be necessary for most databases. See
            Section 5.3 of JDBC 2.0 Standard Extension API.
            <x:p>
              The following are the names and corresponding values for
              these properties
            </x:p>
            <x:dl>
              <x:dt>databaseName</x:dt>
              <x:dd>Name of the Database</x:dd>
              <x:dt>serverName</x:dt>
              <x:dd>Database Server name.</x:dd>
              <x:dt>port</x:dt>
              <x:dd>Port where a Database server is listening for
              requests.</x:dd>
              <x:dt>networkProtocol</x:dt>
              <x:dd>Communication Protocol used.</x:dd>
              <x:dt>user</x:dt>
              <x:dd>default name of the database user with which
              connections will be stablished. Programmatic database
              authentication or default-resource-principal specified
              in vendor specific web and ejb deployment descriptors
              will take precedence, over this default. The details and
              caveats are described in detail in the Administrator's
              guide.</x:dd>
              <x:dt>password</x:dt>
              <x:dd>password for default database user</x:dd>
              <x:dt>roleName</x:dt>
              <x:dd>The initial SQL role name.</x:dd>
              <x:dt>datasourceName</x:dt>
              <x:dd>used to name an underlying XADataSource, or
              ConnectionPoolDataSource when pooling of connections is
              done</x:dd>
              <x:dt>description</x:dt>
              <x:dd>Textual Description</x:dd>
            </x:dl>
            <x:p>
              When one or more of these properties are specified, they
              are passed as is using set&lt;Name&gt;(&lt;Value&gt;)
              methods to the vendors Datasource class (specified in
              datasource-classname). User and Password properties are
              used as default principal, if Container Managed
              authentication is specified and a
              default-resource-principal is not found in application
              deployment descriptors.
            </x:p>
          </x:div>
        </ref>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="jdbc-connection-pool-attlist" combine="interleave">
    <attribute name="name" ias:type="key" ias:belongs-to="jdbc-connection-pools">
      <x:div class="dtd">
        unique name of the pool definition.
      </x:div>
      <ref name="name-type"/>
    </attribute>
    <attribute name="datasource-classname">
      <x:div class="dtd">
        Name of the vendor supplied JDBC datasource resource
        manager. An XA or global transactions capable datasource class
        will implement javax.sql.XADatasource interface. Non XA or
        Local transactions only datasources will implement
        javax.sql.Datasource interface.
      </x:div>
      <ref name="classname-type"/>
    </attribute>
    <optional>
      <attribute name="res-type">
        <x:div class="dtd">
          DataSource implementation class could implement one of of
          javax.sql.DataSource, javax.sql.XADataSource or
          javax.sql.ConnectionPoolDataSource interfaces. This optional
          attribute must be specified to disambiguate when a
          Datasource class implements two or more of these
          interfaces. An error is produced when this attribute has a
          legal value and the indicated interface is not implemented
          by the datasource class. This attribute has no default
          value.
        </x:div>
	<choice>
	  <value>javax.sql.DataSource</value>
	  <value>javax.sql.XADataSource</value>
	  <value>javax.sql.ConnectionPoolDataSource</value>
	</choice>
      </attribute>
    </optional>
    <optional>
      <attribute name="steady-pool-size" a:defaultValue="8" ias:le-than="@max-pool-size">
        <x:div class="dtd">
          minimum and initial number of connections maintained in the
          pool.
        </x:div>
	<data type="nonNegativeInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="max-pool-size" a:defaultValue="32" ias:ge-than="@steady-pool-size">
        <x:div class="dtd">
          maximum number of conections that can be created
        </x:div>
	<data type="positiveInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="max-wait-time-in-millis" a:defaultValue="60000">
        <x:div class="dtd">
          amount of time the caller will wait before getting a
          connection timeout. The default is 60 seconds.  A value of 0
          will force caller to wait indefinitely.
        </x:div>
	<data type="nonNegativeInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="pool-resize-quantity" a:defaultValue="2" ias:le-than="@max-pool-size">
        <x:div class="dtd">
          number of connections to be removed when
          idle-timeout-in-seconds timer expires. Connections that have
          idled for longer than the timeout are candidates for
          removal. When the pool size reaches steady-pool-size, the
          connection removal stops.
        </x:div>
	<data type="positiveInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="idle-timeout-in-seconds" a:defaultValue="300">
        <x:div class="dtd">
          maximum time in seconds, that a connection can remain idle
          in the pool. After this time, the pool implementation can
          close this connection.  Note that this does not control
          connection timeouts enforced at the database server
          side. Adminsitrators are advised to keep this timeout
          shorter than the database server side timeout (if such
          timeouts are configured on the specific vendor's database),
          to prevent accumulation of unusable connection in
          Application Server.
        </x:div>
	<data type="positiveInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="transaction-isolation-level">
        <x:div class="dtd">
          Specifies the Transaction Isolation Level on the pooled
          database connections. Optional. Has no default. If left
          unspecified the pool operates with default isolation level
          provided by the JDBC Driver. A desired isolation level can
          be set using one of the standard transaction isolation
          levels, which see.
          <x:p>
            Applications that change the Isolation level on a pooled
            connection programmatically, risk polluting the pool and
            this could lead to program errors.  Also see:
            is-isolation-level-guaranteed
          </x:p>
        </x:div>
        <ref name="isolation"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="is-isolation-level-guaranteed" a:defaultValue="true">
        <x:div class="dtd">
          Applicable only when a particular isolation level is
          specified for transaction-isolation-level. The default value
          is true.  This assures that every time a connection is
          obtained from the pool, it is guaranteed to have the
          isolation set to the desired value. This could have some
          performance impact on some JDBC drivers. Can be set to false
          by that administrator when they are certain that the
          application does not change the isolation level before
          returning the connection.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="is-connection-validation-required" a:defaultValue="false">
        <x:div class="dtd">
          if true, connections are validated (checked to find out if
          they are usable) before giving out to the application. The
          default is false.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="connection-validation-method" a:defaultValue="auto-commit">
        <x:div class="dtd">
          specifies the type of validation to be performed when
          is-connection-validation-required is true. The following
          types of validation are supported:
        </x:div>
        <choice>
          <value x:desc="using connection.autoCommit()">auto-commit</value>
          <value x:desc="using connection.getMetaData()">meta-data</value>
          <value x:desc="performing a query on a user specified table (see validation-table-name).">table</value>
        </choice>
      </attribute>
    </optional>
    <optional>
      <attribute name="validation-table-name">
        <x:div class="dtd">
          specifies the table name to be used to perform a query to
          validate a connection. This parameter is mandatory, if
          connection-validation-type set to table. Verification by
          accessing a user specified table may become necessary for
          connection validation, particularly if database driver
          caches calls to setAutoCommit() and getMetaData().
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="fail-all-connections" a:defaultValue="false">
        <x:div class="dtd">
          indicates if all connections in the pool must be closed
          should a single validation check fail. The default is
          false. One attempt will be made to re-establish failed
          connections.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="non-transactional-connections" a:defaultValue="false">
        <x:div class="dtd">
            A pool with this property set to true returns non-transactional  
            connections. This connection does not get automatically enlisted 
            with the transaction manager.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="allow-non-component-callers" a:defaultValue="false">
        <x:div class="dtd">
            A pool with this property set to true, can be used by non-J2EE 
            components (i.e components other than EJBs or Servlets). 
            The  returned connection is enlisted automatically with the 
            transaction context obtained from the transaction manager. 
            This property is to enable the pool to be used by non-component 
            callers such as ServletFilters, Lifecycle modules, and 3rd party 
            persistence managers. 
            Standard J2EE components can continue to use such pools. 
            Connections obtained by non-component callers are not automatically
            cleaned at the end of a transaction by the container. 
            They need to be explicitly closed by the  the caller.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="validate-atmost-once-period-in-seconds" a:defaultValue="0">
        <x:div class="dtd">
            Used to set the time-interval within which a connection is validated atmost once.
            Default is 0 which implies that it is not enabled. TBD: Documentation is to be
            corrected.
        </x:div>
        <data type="nonNegativeInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="connection-leak-timeout-in-seconds" a:defaultValue="0">
        <x:div class="dtd">
            To aid user in detecting potential connection leaks by the application.
            When a connection is not returned back to the pool by the application
            within the specified period, it is assumed to be a potential leak and
            stack trace of the caller will be logged. Default is 0, which implies 
            there is no leak detection, by default. 
            A positive non-zero value turns on leak detection. Note however that,
            this attribute only detects if there is a connection leak. The connection
            can be reclaimed only if connection-leak-reclaim is set to true.
        </x:div>
        <data type="nonNegativeInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="connection-leak-reclaim" a:defaultValue="false">
        <x:div class="dtd">
            If enabled, connection will be reusable (put back into pool) after 
            connection-leak-timeout-in-seconds occurs. Default value is false.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="connection-creation-retry-attempts" a:defaultValue="0">
        <x:div class="dtd">
            The number of attempts to create a new connection. Default is 0, which
            implies no retries.
        </x:div>
        <data type="nonNegativeInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="connection-creation-retry-interval-in-seconds" a:defaultValue="10">
        <x:div class="dtd">
            The time interval between retries while attempting to create a connection.
            Default is 10 seconds.  Effective when  connection-creation-retry-attempts
            is greater than 0.
        </x:div>
        <data type="positiveInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="statement-timeout-in-seconds" a:defaultValue="-1">
        <x:div class="dtd">
            Sets the timeout property of a connection to enable termination of abnormally
            long running queries. Default value of -1 implies that it is not enabled.
        </x:div>
        <data type="integer">
            <param name="minInclusive">-1</param>
        </data>
      </attribute>
    </optional>
    <optional>
      <attribute name="lazy-connection-enlistment" a:defaultValue="false">
        <x:div class="dtd">
            Enlist a resource to the transaction only when it is actually used in
            a method, which avoids enlistment of connections that are not used
            in a transaction. This also prevents unnecessary enlistment of connections
            cached in the calling components. Default value is false.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="lazy-connection-association" a:defaultValue="false">
        <x:div class="dtd">
            Connections are lazily associated when an operation  is performed on
            them. Also, they are disassociated when the transaction is completed
            and a component method ends, which helps reuse of the physical
            connections. Default value is false.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="associate-with-thread" a:defaultValue="false">
        <x:div class="dtd">
            Associate a connection with the thread such that when the
            same thread is in need of a connection, it can reuse the connection
            already associated with that thread, thereby not incurring the overhead
            of getting a connection from the pool. Default value is false.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="match-connections" a:defaultValue="false">
        <x:div class="dtd">
            To switch on/off connection matching for the pool. It can be set to false if the
            administrator knows that the connections in the pool
            will always be homogeneous and hence a connection picked from the pool
            need not be matched by the resource adapter. Default value is false.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="max-connection-usage-count" a:defaultValue="0">
        <x:div class="dtd">
            When specified, connections will be re-used by the pool for the specified number
            of times after which it will be closed. This is useful for instance, to avoid statement-leaks.
            Default value is 0, which implies the feature is not enabled.
        </x:div>
        <data type="nonNegativeInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="wrap-jdbc-objects" a:defaultValue="false">
        <x:div class="dtd">
            When set to true, application will get wrapped jdbc objects for Statement,
            PreparedStatement, CallableStatement, ResultSet, DatabaseMetaData. Defaults to false.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="connector-connection-pool">
    <element name="connector-connection-pool">
      <x:div class="dtd">
        connector-connection-pool defines configuration used to create
        and manage a pool of connections to a EIS. Pool definition is
        named, and can be referred to by multiple connector-resource
        elements (See connector-resource).
        <x:p>
          Each named pool definition results in a pool instantiated at
          server start-up. Pool is populated when accessed for the
          first time. If two or more connector-resource elements point
          to the same connector-connection-pool element, they are
          using the same pool of connections, at run time.
        </x:p>
        <x:p>
          There can be more than one pool for one
          connection-definition in one resource-adapter.
        </x:p>
      </x:div>
      <ref name="connector-connection-pool-attlist"/>
      <optional>
        <ref name="description"/>
      </optional>
      <zeroOrMore>
        <ref name="security-map"/>
      </zeroOrMore>
      <zeroOrMore>
        <ref name="property">
          <x:div class="dtd">
            Properties are used to override the
            ManagedConnectionFactory javabean configuration settings.
            <x:p>
              When one or more of these properties are specified, they
              are passed as is using set&lt;Name&gt;(&lt;Value&gt;) methods to the
              Resource Adapter's ManagedConnectionfactory class
              (specified in ra.xml).
            </x:p>
          </x:div>
        </ref>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="connector-connection-pool-attlist" combine="interleave">
    <attribute name="name" ias:type="key" ias:belongs-to="connector-connection-pools">
      <x:div class="dtd">
        unique name of the pool definition.
      </x:div>
      <ref name="name-type"/>
    </attribute>
    <!-- <attribute name="resource-adapter-name" ias:belongs-to="resource-adapters"> -->
    <attribute name="resource-adapter-name">
      <x:div class="dtd">
        This is the name of resource adapter. Name of .rar file is
        taken as the unique name for the resource adapter.
      </x:div>
    </attribute>
    <attribute name="connection-definition-name">
      <x:div class="dtd">
        unique name, identifying one connection-definition in a
        Resource Adapter. Currently this is ConnectionFactory type.
      </x:div>
    </attribute>
    <optional>
      <attribute name="steady-pool-size" a:defaultValue="8">
        <x:div class="dtd">
          minimum and initial number of connections maintained in the
          pool.
        </x:div>
	<data type="nonNegativeInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="max-pool-size" a:defaultValue="32">
        <x:div class="dtd">
          maximum number of conections that can be created
        </x:div>
	<data type="positiveInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="max-wait-time-in-millis" a:defaultValue="60000">
        <x:div class="dtd">
          amount of time the caller will wait before getting a
          connection timeout. The default is 60 seconds. A value of 0
          will force caller to wait indefinitely.
        </x:div>
	<data type="nonNegativeInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="pool-resize-quantity" a:defaultValue="2" ias:le-than="@max-pool-size">
        <x:div class="dtd">
          number of connections to be removed when
          idle-timeout-in-seconds timer expires. Connections that have
          idled for longer than the timeout are candidates for
          removal. When the pool size reaches steady-pool-size, the
          connection removal stops.
        </x:div>
	<data type="positiveInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="idle-timeout-in-seconds" a:defaultValue="300">
        <x:div class="dtd">
          maximum time in seconds, that a connection can remain idle
          in the pool. After this time, the pool implementation can
          close this connection.  Note that this does not control
          connection timeouts enforced at the database server
          side. Adminsitrators are advised to keep this timeout
          shorter than the EIS connection timeout (if such timeouts
          are configured on the specific EIS), to prevent accumulation
          of unusable connection in Application Server.
        </x:div>
	<data type="positiveInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="fail-all-connections" a:defaultValue="false">
        <x:div class="dtd">
          indicates if all connections in the pool must be closed
          should a single connection fail validation. The default is
          false. One attempt will be made to re-establish failed
          connections.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="transaction-support">
        <x:div class="dtd">
          Indicates the level of transaction support that this pool
          will have. Possible values are "XATransaction",
          "LocalTransaction" and "NoTransaction". This attribute will
          override that transaction support attribute in the Resource
          Adapter in a downward compatible way, i.e it can support a
          lower/equal transaction level than specified in the RA, but
          not a higher level.
        </x:div>
	<choice>
	  <value>XATransaction</value>
	  <value>LocalTransaction</value>
	  <value>NoTransaction</value>
	</choice>
      </attribute>
    </optional>
    <optional>
      <attribute name="is-connection-validation-required" a:defaultValue="false">
        <x:div class="dtd">
            This attribute specifies if the connection that is about to be 
            returned is to be validated by the container,
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="validate-atmost-once-period-in-seconds" a:defaultValue="0">
        <x:div class="dtd">
            Used to set the time-interval within which a connection is validated atmost once.
            Default is 0 which implies that it is not enabled. TBD: Documentation is to be
            corrected.
        </x:div>
        <data type="nonNegativeInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="connection-leak-timeout-in-seconds" a:defaultValue="0">
        <x:div class="dtd">
            To aid user in detecting potential connection leaks by the application.
            When a connection is not returned back to the pool by the application
            within the specified period, it is assumed to be a potential leak and
            stack trace of the caller will be logged. Default is 0, which implies 
            there is no leak detection, by default. 
            A positive non-zero value turns on leak detection. Note however that,
            this attribute only detects if there is a connection leak. The connection
            can be reclaimed only if connection-leak-reclaim is set to true.
        </x:div>
        <data type="positiveInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="connection-leak-reclaim" a:defaultValue="false">
        <x:div class="dtd">
            If enabled, connection will be reusable (put back into pool) after 
            connection-leak-timeout-in-seconds occurs. Default value is false.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="connection-creation-retry-attempts" a:defaultValue="0">
        <x:div class="dtd">
            The number of attempts to create a new connection. Default is 0, which
            implies no retries.
        </x:div>
        <data type="nonNegativeNumber"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="connection-creation-retry-interval-in-seconds" a:defaultValue="10">
        <x:div class="dtd">
            The time interval between retries while attempting to create a connection.
            Default is 10 seconds.  Effective when  connection-creation-retry-attempts
            is greater than 0.
        </x:div>
        <data type="positiveInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="lazy-connection-enlistment" a:defaultValue="false">
        <x:div class="dtd">
            Enlist a resource to the transaction only when it is actually used in
            a method, which avoids enlistment of connections that are not used
            in a transaction. This also prevents unnecessary enlistment of connections
            cached in the calling components. Default value is false.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="lazy-connection-association" a:defaultValue="false">
        <x:div class="dtd">
            Connections are lazily associated when an operation  is performed on
            them. Also, they are disassociated when the transaction is completed
            and a component method ends, which helps reuse of the physical
            connections. Default value is false.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="associate-with-thread" a:defaultValue="false">
        <x:div class="dtd">
            Associate a connection with the thread such that when the
            same thread is in need of a connection, it can reuse the connection
            already associated with that thread, thereby not incurring the overhead
            of getting a connection from the pool. Default value is false.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="match-connections" a:defaultValue="true">
        <x:div class="dtd">
            To switch on/off connection matching for the pool. It can be set to false if the
            administrator knows that the connections in the pool
            will always be homogeneous and hence a connection picked from the pool
            need not be matched by the resource adapter. Default value is true.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="max-connection-usage-count" a:defaultValue="0">
        <x:div class="dtd">
            When specified, connections will be re-used by the pool for the specified number
            of times after which it will be closed. This is useful for instance, to avoid statement-leaks.
            Default value is 0, which implies the feature is not enabled.
        </x:div>
        <data type="nonNegativeNumber"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="security-map">
    <element name="security-map">
      <x:div class="dtd">
        Perform mapping from principal received during Servlet/EJB
        authentication, to credentials accepted by the EIS. This
        mapping is optional.It is possible to map multiple (server)
        principal to the same backend principal.

      </x:div>
      <ref name="security-map-attlist"/>
      <oneOrMore>
        <choice>
          <ref name="principal"/>
          <ref name="user-group"/>
        </choice>
      </oneOrMore>
      <ref name="backend-principal"/>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="security-map-attlist" combine="interleave">
    <attribute name="name" ias:type="key">
      <ref name="name-type"/>      
    </attribute>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="principal">
    <element name="principal">
      <x:div class="dtd">
        Principal of the Servlet and EJB client
      </x:div>
      <ref name="principal-attlist"/>
      <text/>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="principal-attlist" combine="interleave">
    <empty/>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="user-group">
    <element name="user-group">
      <ref name="user-group-attlist"/>
      <text/>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="user-group-attlist" combine="interleave">
    <empty/>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="backend-principal">
    <element name="backend-principal">
      <ref name="backend-principal-attlist"/>
      <empty/>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="backend-principal-attlist" combine="interleave">
    <attribute name="user-name"/>
    <optional>
      <attribute name="password"/>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="thread-pools">
    <element name="thread-pools">
      <ref name="thread-pools-attlist"/>
      <oneOrMore>
        <ref name="thread-pool"/>
      </oneOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="thread-pools-attlist" combine="interleave">
    <empty/>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="thread-pool">
    <element name="thread-pool">
      <ref name="thread-pool-attlist"/>
      <empty/>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="thread-pool-attlist" combine="interleave">
    <attribute name="thread-pool-id" ias:type="key" ias:belongs-to="thread-pools">
      <x:div class="dtd">
        This is an id for the work-queue e.g.  "thread-pool-1",
        "thread-pool-2" etc
      </x:div>
      <ref name="name-type"/>
    </attribute>
    <optional>
      <attribute name="min-thread-pool-size" a:defaultValue="0" ias:le-than="@max-thread-pool-size">
        <x:div class="dtd">
          Minimum number of threads in the threadpool servicing
          requests in this queue.  These are created up front when
          this threadpool is instantiated
        </x:div>
	<data type="nonNegativeInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="max-thread-pool-size" a:defaultValue="200">
        <x:div class="dtd">
          Maximum number of threads in the threadpool servicing
          requests in this queue. This is the upper bound on the
          no. of threads that exist in the threadpool.
        </x:div>
	<data type="positiveInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="idle-thread-timeout-in-seconds" a:defaultValue="120">
        <x:div class="dtd">
          idle threads are removed from pool, after this time
        </x:div>
	<data type="positiveInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="num-work-queues" a:defaultValue="1">
        <x:div class="dtd">
          This denotes the total number of work queues that are
          serviced by this threadpool.
        </x:div>
	<data type="positiveInteger"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="property">
    <element name="property">
      <x:div class="dtd">
        Syntax for supplying properties as name value pairs
      </x:div>
      <ref name="property-attlist"/>
      <optional>
        <ref name="description"/>
      </optional>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="property-attlist" combine="interleave">
    <attribute name="name" ias:type="key">
      <ref name="name-type"/>
    </attribute>
    <attribute name="value"/>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="system-property">
    <element name="system-property">
      <x:div class="dtd">
        Syntax for supplying system properties as name value pairs
      </x:div>
      <ref name="system-property-attlist"/>
      <optional>
        <ref name="description"/>
      </optional>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="system-property-attlist" combine="interleave">
    <attribute name="name" ias:type="key">
      <ref name="jmx-safe-key-type"/>
    </attribute>
    <attribute name="value"/>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="server">
    <element name="server">
      <x:div class="dtd">
        J2EE Application Server Configuration
        <x:p>
          Each Application Server instance is a J2EEv1.4 compliant
          container.  One server instance is specially designated as
          the Administration Server in SE/EE.  User applications
          cannot be deployed to an Adminsitration Server instance.
        </x:p>
      </x:div>
      <ref name="server-attlist"/>
      <zeroOrMore>
        <ref name="application-ref">
          <x:div class="dtd">
            References to applications deployed to the server instance
          </x:div>
        </ref>
      </zeroOrMore>
      <zeroOrMore>
        <ref name="resource-ref">
          <x:div class="dtd">
            References to resources deployed to the server instance
          </x:div>
        </ref>
      </zeroOrMore>
      <zeroOrMore>
        <ref name="system-property"/>
      </zeroOrMore>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="server-attlist" combine="interleave">
    <attribute name="name" ias:type="key" ias:belongs-to="global-names,servers">
      <x:div class="dtd">
        name of the server instance.
      </x:div>
      <ref name="unix-fs-safe-name-type"/>
    </attribute>
    <optional>
      <attribute name="config-ref" ias:references-to="configs">
        <x:div class="dtd">
          points to a named config. needed for stand-alone servers.
          If the server instance is part of a cluster, then it must
          not be present, and will be ignored.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="node-agent-ref" ias:references-to="node-agents">
        <x:div class="dtd">
          SE/EE only. Specifies the name of the node agent where the
            server instance is hosted.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="lb-weight" a:defaultValue="100">
        <x:div class="dtd">
          Each server instance in a cluster has a weight, which may be used 
          to represent the relative processing capacity of that instance. 
          Default weight is 100 for every instance. Weighted load balancing 
          policies will use this weight while load balancing requests 
          within the cluster. 
          It is the responsibility of the administrator to set the relative 
          weights correctly, keeping in mind deployed hardware capacity.
        </x:div>
        <data type="positiveInteger"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="application-ref">
    <element name="application-ref">
      <ref name="application-ref-attlist"/>
      <empty/>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="application-ref-attlist" combine="interleave">
    <optional>
      <attribute name="enabled" a:defaultValue="true">
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="virtual-servers"/>
    </optional>
    <optional>
      <attribute name="lb-enabled" a:defaultValue="false">
        <x:div class="dtd">
          A boolean flag that causes any and all load-balancers using
          this application to consider this application unavailable to
          them. Defaults to unavailable (false).
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="disable-timeout-in-minutes" a:defaultValue="30">
        <x:div class="dtd">
          The time, in minutes, that it takes this application to
          reach a quiescent state after having been disabled
        </x:div>
      </attribute>
    </optional>
    <attribute name="ref" ias:type="key" ias:references-to="applications">
      <ref name="name-type"/>
    </attribute>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="resource-ref">
    <element name="resource-ref">
      <ref name="resource-ref-attlist"/>
      <empty/>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="resource-ref-attlist" combine="interleave">
    <optional>
      <attribute name="enabled" a:defaultValue="true">
        <ref name="boolean"/>
      </attribute>
    </optional>
    <attribute name="ref" ias:type="key" ias:references-to="jndi-names">
      <!-- this type used because the ref can refer to both name-types and jndi-name-types -->
      <ref name="jmx-safe-key-type"/>
    </attribute>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="cluster">
    <element name="cluster">
      <x:div class="dtd">
        SE/EE Cluster configuration. A cluster defines a homogenous
        set of server instances that share the same applications,
        resources, and configuration.
      </x:div>
      <ref name="cluster-attlist"/>
      <zeroOrMore>
        <ref name="server-ref">
          <x:div class="dtd">
            list of servers in the cluster
          </x:div>
        </ref>
      </zeroOrMore>
      <zeroOrMore>
        <ref name="resource-ref"/>
      </zeroOrMore>
      <zeroOrMore>
        <ref name="application-ref"/>
      </zeroOrMore>
      <zeroOrMore>
        <ref name="system-property"/>
      </zeroOrMore>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="cluster-attlist" combine="interleave">
    <attribute name="name" ias:type="key" ias:belongs-to="global-names,clusters">
      <x:div class="dtd">
        cluster name
      </x:div>
      <ref name="name-type"/>
    </attribute>
    <attribute name="config-ref" ias:references-to="configs">
      <x:div class="dtd">
        points to a named config. All server instances in the cluster
        will share this config.
      </x:div>
    </attribute>    

    <optional>
      <attribute name="heartbeat-enabled" a:defaultValue="true">
        <x:div class="dtd">
            When "heartbeat-enabled" is set to "true", the GMS services will
            be started as a lifecycle module in each the application
            server in the cluster.When "heartbeat-enabled" is set to "false", 
            GMS will not be started and its services will be unavailable. 
            Clusters should function albeit with reduced functionality.
        </x:div>
        <ref name="boolean"/>
      </attribute>
      <attribute name="heartbeat-port">
        <x:div class="dtd">
          This is the communication port GMS uses to listen
          for group events . This should be a valid port number.
        </x:div>
        <data type="positiveInteger">
          <param name="minInclusive">1024</param>
          <param name="maxInclusive">49151</param>
        </data>	
      </attribute>
  
      <attribute name="heartbeat-address">
          <x:div class="dtd">
              This is the address (only multicast supported)
              at which GMS will listen for group events.
          </x:div>
          <ref name="IPAddress-type"/>
      </attribute>
    </optional>

</define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="server-ref">
    <element name="server-ref">
      <ref name="server-ref-attlist"/>
      <optional>
        <ref name="health-checker"/>
      </optional>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="server-ref-attlist" combine="interleave">
    <attribute name="ref" ias:type="key" ias:references-to="servers">
      <x:div class="dtd">
        A reference to the name of a server defined elsewhere
      </x:div>
      <ref name="unix-fs-safe-name-type"/>
    </attribute>
    <optional>
      <attribute name="disable-timeout-in-minutes" a:defaultValue="30">
        <x:div class="dtd">
          The time, in minutes, that it takes this server to reach a
          quiescent state after having been disabled
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="lb-enabled" a:defaultValue="false">
        <x:div class="dtd">
          A boolean flag that causes any and all load-balancers using
          this server to consider this server unavailable to
          them. Defaults to unavailable (false)
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="enabled" a:defaultValue="true">
        <x:div class="dtd">
          A boolean flag that causes the server to be enabled to serve
          end-users, or not. Default is to be enabled (true)
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="node-agent">
    <element name="node-agent">
      <x:div class="dtd">
        SE/EE Node Controller. The node agent is an agent that manages
        server instances on a host machine.
      </x:div>
      <ref name="node-agent-attlist"/>
      <optional>
        <ref name="jmx-connector"/>
      </optional>
      <optional>
        <ref name="auth-realm"/>
      </optional>
      <ref name="log-service"/>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="node-agent-attlist" combine="interleave">
    <attribute name="name" ias:type="key" ias:belongs-to="global-names,node-agents">
      <x:div class="dtd">
        Node Controller name
      </x:div>
      <ref name="unix-fs-safe-name-type"/>      
    </attribute>
    <optional>
      <attribute name="system-jmx-connector-name">
	<x:div class="dtd">
	  The name of the internal jmx connector
	</x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="start-servers-in-startup" a:defaultValue="true">
        <x:div class="dtd">
          If true starts all managed server instances when the Node
          Controller is started.
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="lb-config">
    <element name="lb-config" ias:exclusive-children-list="cluster-ref,server-ref"> <!-- should be auto generated by xslt -->
      <ref name="lb-config-attlist"/>
      <choice>
        <zeroOrMore>
          <ref name="cluster-ref"/>
        </zeroOrMore>
        <zeroOrMore>
          <ref name="server-ref"/>
        </zeroOrMore>
      </choice>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="lb-config-attlist" combine="interleave">
    <attribute name="name" ias:type="key" ias:belongs-to="lb-configs">
      <x:div class="dtd">
        Name of the load balancer configuration
      </x:div>
      <ref name="name-type"/>
    </attribute>
    <optional>
      <attribute name="response-timeout-in-seconds" a:defaultValue="60">
        <x:div class="dtd">
          Period within which a server must return a response or
          otherwise it will be considered unhealthy. Default value is
          60 seconds. Must be greater than or equal to 0. A value of 0
	  effectively turns off this check functionality, meaning the
	  server will always be considered healthy.
        </x:div>
	<data type="nonNegativeInteger"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="https-routing" a:defaultValue="false">
        <x:div class="dtd">
          Boolean flag indicating how load-balancer will route https
          requests. If true then an https request to the load-balancer
          will result in an https request to the server; if false then
          https requests to the load-balancer result in http requests
          to the server. Default is to use http (i.e. value of false);
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="reload-poll-interval-in-seconds" a:defaultValue="60">
        <x:div class="dtd">
          Maximum period, in seconds, that a change to the load
          balancer configuration file takes before it is detected by
          the load balancer and the file reloaded. A value of 0
          indicates that reloading is disabled. Default period is 1
          minute (60)
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="monitoring-enabled" a:defaultValue="false">
        <x:div class="dtd">
          Boolean flag that determines whether monitoring is switched
          on or not.  Default is that monitoring is switched off
          (false)
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="route-cookie-enabled" a:defaultValue="true">
        <x:div class="dtd">
          Boolean flag that determines whether a route cookie is or is
          not enabled. Default is enabled (true).
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>

    <x:div class="dtd">
      <x:h2>correctness criteria</x:h2>
      <x:p>
        It is an error if any two children refer to the same object.
      </x:p>
      <x:p>
        It is an error if all the server-refs don't have the same set of
        applications
      </x:p>
      <x:p>
        It is probably a mistake if there are no cluster-ref children,
        and every server-ref child is lb-disabled.
      </x:p>
    </x:div>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="health-checker">
    <element name="health-checker">
      <x:div class="dtd">
        Each cluster would be configured for a ping based health check
        mechanism.
      </x:div>
      <ref name="health-checker-attlist"/>
      <empty/>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="health-checker-attlist" combine="interleave">
    <optional>
      <attribute name="url" a:defaultValue="/">
        <x:div class="dtd">
          URL to ping so as to determine the health state of a
          listener. This must be a relative URL.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="interval-in-seconds" a:defaultValue="30">
        <x:div class="dtd">
          Interval, in seconds, between health checks. A value of "0"
          means that the health check is disabled. Default is 30
          seconds. Must be 0 or greater.
        </x:div>
	<data type="nonNegativeInteger"/>

      </attribute>
    </optional>
    <optional>
      <attribute name="timeout-in-seconds" a:defaultValue="10">
        <x:div class="dtd">
          Maximum time, in seconds, that a server must respond to a
          health check request to be considered healthy. Default is 10
          seconds. Must be greater than 0.
        </x:div>
	<data type="positiveInteger"/>
      </attribute>
    </optional>
    <x:div class="dtd">
      If health check is enabled the timeout must be no greater than
      the interval between checks. In other words the following must
      be true:
      <x:p>
        interval-in-seconds &lt;= 0 || timeout-in-seconds &lt;= interval-in-seconds
      </x:p>
    </x:div>
    
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="cluster-ref">
    <element name="cluster-ref">
      <x:div class="dtd">
        Element relating a reference to a cluster to be load balanced
        to an (optional) health-checker
      </x:div>
      <ref name="cluster-ref-attlist"/>
      <optional>
        <ref name="health-checker"/>
      </optional>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="cluster-ref-attlist" combine="interleave">
    <attribute name="ref" ias:type="key" ias:references-to="clusters">
      <x:div class="dtd">
        A reference to the name of a cluster defined elsewhere
      </x:div>
      <ref name="name-type"/>
    </attribute>
    <optional>
        <attribute name="lb-policy" a:defaultValue="round-robin">
          <x:div class="dtd">
            load balancing policy to be used for this cluster. Possible values 
            are round-robin , weighted-round-robin or user-defined. round-robin 
            is the default. For weighted-round-robin, the weights of the 
            instance are considered while load balancing. For user-defined, 
            the policy is implemented by a shared library which is loaded by 
            the load balancer and the instance selected is delegated to the 
            loaded module.
          </x:div>
          <ref name="lb-policy-type"/>
        </attribute>
    </optional>
    <optional>
        <attribute name="lb-policy-module">
          <x:div class="dtd">
            specifies the absolute path to the shared library implementing the 
            user-defined policy. This should be specified only when the 
            lb-policy is user-defined. The shared library should exist and be 
            readable in the machine where load balancer is running.
          </x:div>
        </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="message-security-config">
    <element name="message-security-config">
      <x:div class="dtd">
	The message-security-config element defines the message layer
	specific provider configurations of the application server.
	<x:p>
	  All of the providers within a message-security-config
	  element must be able to perform authentication processing at
	  the message layer defined by the value of the auth-layer
	  attribute.
	</x:p>
      </x:div>
      <oneOrMore>
	<ref name="provider-config"/>
      </oneOrMore>
      <ref name="message-security-config-attlist"/>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="message-security-config-attlist">
    <attribute name="auth-layer" ias:type="key">
      <ref name="message-layer"/>
    </attribute>
    <optional>
      <attribute name="default-provider">
	<x:div class="dtd">
	  used to identify the server provider to be invoked for any
	  application for which a specific server provider has not
	  been bound.
	<x:p>
	  When a default provider of a type is not defined for a message 
	  layer, the container will only invoke a provider of the type
	  (at the layer) for those applications for which a specific
	  provider has been bound.
	</x:p>
	</x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="default-client-provider">
	<x:div class="dtd">
	  used to identify the client provider to be invoked for any
	  application for which a specific client provider has not
	  been bound.
	</x:div>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="provider-config">
    <element name="provider-config">
      <x:div class="dtd">
	The provider-config element defines the configuration of an
	authentication provider.
	<x:p>
	  A provider-config with no contained request-policy or
	  response-policy sub-elements, is a null provider. The
	  container will not instantiate or invoke the methods of a
	  null provider, and as such the implementation class of a
	  null provider need not exist.
	</x:p>
      </x:div>
      <ref name="provider-config-attlist"/>
      <optional>
	<ref name="request-policy">
	  <x:div class="dtd">
	    defines the authentication policy requirements associated
	    with the request processing performed by the
	    authentication provider.
	  </x:div>
	</ref>
      </optional>
      <optional>
	<ref name="response-policy">
	  <x:div class="dtd">
	    defines the authentication policy requirements associated
	    with the response processing performed by the
	    authentication provider.
	  </x:div>
	</ref>
      </optional>
      <zeroOrMore>
	<ref name="property"/>
      </zeroOrMore>
      
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="provider-config-attlist">
    <attribute name="provider-id" ias:type="key">
      <x:div class="dtd">
	Identifier used to uniquely identify this <x:code>provider-config</x:code> element
      </x:div>
      <ref name="jmx-safe-key-type"/>
    </attribute>
    <attribute name="provider-type">
      <x:div class="dtd">
	defines whether the provider is a client authentication
	provider or a server authentication provider.
      </x:div>
      <choice>
	<value>client</value>
	<value>server</value>
	<value>client-server</value>
      </choice>
    </attribute>
    <attribute name="class-name">
      <x:div class="dtd">
	defines the java implementation class of the provider. Client
	authentication providers must implement the
	<x:code>com.sun.enterprise.security.jauth.ClientAuthModule</x:code>
	interface. Server-side providers must implement the
	<x:code>com.sun.enterprise.security.jauth.ServerAuthModule</x:code>
	interface. A provider may implement both interfaces, but it
	must implement the interface corresponding to its provider
	type.
      </x:div>
    </attribute>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="request-policy">
    <element name="request-policy">
      <x:div class="dtd">
	Used to define the authentication policy requirements
	associated with the request processing performed by an
	authentication provider (i.e. when a client provider's
	<x:code>ClientAuthModule.initiateRequest()</x:code> method is
	called or when a server provider's
	<x:code>ServerAuthModule.validateRequest()</x:code> method is
	called).
      </x:div>
      <empty/>
      <ref name="request-policy-attlist"/>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="request-policy-attlist">
    <optional>
      <attribute name="auth-source">
	<x:div class="dtd">
	  defines a requirement for message layer sender
	  authentication (e.g. username password) or content
	  authentication (e.g. digital signature).
	</x:div>
	<choice>
	  <value>sender</value>
	  <value>content</value>
	</choice>
      </attribute>
    </optional>
    <optional>
      <attribute name="auth-recipient">
	<x:div class="dtd">
	  defines a requirement for message layer authentication of
	  the reciever of a message to its sender (e.g. by XML
	  encryption).
	</x:div>
	<choice>
	  <value x:desc="indicates that recipient authentication    (e.g. encryption) is to occur before any content    authentication (e.g. encrypt then sign) with respect to the    target of the containing    auth-policy.">before-content</value>
	  <value x:desc="indicates that recipient authentication    (e.g. encryption) is to occur after any content    authentication (e.g. sign then encrypt) with respect to the    target of the containing auth-policy.">after-content</value>
	</choice>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="response-policy">
    <element name="response-policy">
      <x:div class="dtd">
	Used to define the authentication policy requirements
	associated with the response processing performed by an
	authentication provider (i.e. when a client provider's
	<x:code>ClientAuthModule.validateResponse()</x:code> method is
	called or when a server provider's
	<x:code>ServerAuthModule.secureResponse()</x:code> method is
	called).
      </x:div>
      <empty/>
      <ref name="response-policy-attlist"/>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="response-policy-attlist">
    <optional>
      <attribute name="auth-source">
	<x:div class="dtd">
	  defines a requirement for message layer sender
	  authentication (e.g. username password) or content
	  authentication (e.g. digital signature).
	</x:div>
	<choice>
	  <value>sender</value>
	  <value>content</value>
	</choice>
      </attribute>
    </optional>
    <optional>
      <attribute name="auth-recipient">
	<x:div class="dtd">
	  defines a requirement for message layer authentication of
	  the reciever of a message to its sender (e.g. by XML
	  encryption).
	</x:div>
	<choice>
	  <value x:desc="indicates that recipient authentication    (e.g. encryption) is to occur before any content    authentication (e.g. encrypt then sign) with respect to the    target of the containing    auth-policy.">before-content</value>
	  <value x:desc="indicates that recipient authentication    (e.g. encryption) is to occur after any content    authentication (e.g. sign then encrypt) with respect to the    target of the containing auth-policy.">after-content</value>
	</choice>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="web-service-endpoint">
    <element name="web-service-endpoint">
      <x:div class="dtd">
        This specifies configuration for a web service end point. This web
        service end point could be JAXRPC or JSR-109 web service. It contains
        configuration about Monitoring, Transformation rules and Monitoring Log.
      </x:div>
      <ref name="web-service-endpoint-attlist"/>
      <zeroOrMore>
        <ref name="registry-location"/>
      </zeroOrMore>
      <zeroOrMore>
        <ref name="transformation-rule"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="web-service-endpoint-attlist" combine="interleave">
    <attribute name="name" ias:type="key">
        <x:div class="dtd">
            fully qualified web service name.
            Format: |ModuleName|#|EndpointName|, if the web service endpoint 
            belongs to an application. (Parent of this element is j2ee-application).
            |EndpointName|, if the web service endpoint belongs to stand alone
            ejb-module or web-module. (Parent of this element is either ejb-module
            or web-module).
        </x:div>
        <!-- <ref name="web-service-name-type"/> -->
    </attribute>
    <optional>
      <attribute name="monitoring" a:defaultValue="OFF">
        <x:div class="dtd">
            monitoring level for this web service.
        </x:div>
        <ref name="monitoring-level"/>
      </attribute>
    </optional>

    <optional>
      <attribute name="max-history-size" a:defaultValue="25">
        <x:div class="dtd">
            maximum number of monitoring records
            stored in history for this end point       
        </x:div>
        <data type="positiveInteger"/>
      </attribute>
    </optional>

    <optional>
      <attribute name="jbi-enabled" a:defaultValue="false">
        <x:div class="dtd">
            when true, it enables the visibility of
            this endoint as a service in JBI.         
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>

</define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="registry-location">
    <element name="registry-location">
      <x:div class="dtd">
        Specifies the registry where web service end point artifacts
        are published.
      </x:div>
      <ref name="registry-location-attlist"/>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="registry-location-attlist" combine="interleave">
    <attribute name="connector-resource-jndi-name" ias:type="key" ias:reference-to="jndi-names">
        <ref name="name-type"/>
    </attribute>

  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="transformation-rule">
    <element name="transformation-rule">
      <x:div class="dtd">
        Specifies configuration for a XSLT transformation rule. 
      </x:div>
      <ref name="transformation-rule-attlist"/>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="transformation-rule-attlist" combine="interleave">
    <attribute name="name" ias:type="key">
        <x:div class="dtd">
            name of the transformation rule
        </x:div>
        <ref name="name-type"/>
    </attribute>
    <optional>
      <attribute name="enabled" a:defaultValue="true">
        <x:div class="dtd">
            if false, this transformation rule is disabled.        
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="apply-to" a:defaultValue="request">
        <x:div class="dtd">
            <x:p>
            - "request": transformations are applied to request in
            the order in which they are specified.
            </x:p>
            <x:p>
            - "response": transformation is applied to response in
            the order in which they are specified.
            </x:p>
            <x:p>
            - "both": transformation rule is applied to request and
            response. The order is reversed for response.         
            </x:p>
        </x:div>
        <ref name="apply-to-type"/>
      </attribute>
    </optional>
    <attribute name="rule-file-location">
        <x:div class="dtd">
            location of rule file to do the transformation. Only
            XSLT files are allowed. Default location is:
            ${com.sun.aas.instanceRoot}/generated/xml/*appOrModule*/*xslt-filename*/
            Absolute paths can also be specified.
        </x:div>
        <ref name="file-type"/>
    </attribute>

</define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="load-balancers">
    <element name="load-balancers">
      <ref name="load-balancers-attlist"/>
      <zeroOrMore>
        <ref name="load-balancer"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="load-balancers-attlist" combine="interleave">
    <empty/>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="load-balancer">
    <element name="load-balancer">
      <x:div class="dtd">
        known properties:
        <x:p> device-host - Host name or IP address for the device  </x:p>
        <x:p> device-admin-port - Device administration port number </x:p>
        <x:p> ssl-proxy-host - proxy host used for outbound HTTP    </x:p>
        <x:p> ssl-proxy-port - proxy port used for outbound HTTP    </x:p>
      </x:div>
      <ref name="load-balancer-attlist"/>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="load-balancer-attlist" combine="interleave">
    <attribute name="name" ias:type="key">
      <x:div class="dtd">
        name of the load balancer
      </x:div>
      <ref name="name-type"/>
    </attribute>
    <attribute name="lb-config-name" ias:references-to="lb-configs">
      <x:div class="dtd">
        name of the lb-config used by this load balancer
      </x:div>
    </attribute>
    <optional>
      <attribute name="auto-apply-enabled" a:defaultValue="false">
        <x:div class="dtd">
          when true, immediately push changes to lb config to the physical 
          load balancer
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="mbean">
    <element name="mbean">
      <ref name="mbean-attlist"/>
      <optional>
        <ref name="description"/>
      </optional>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="mbean-attlist" combine="interleave">
    <attribute name="name" ias:type="key" ias:belongs-to="applications">
      <x:div class="dtd">
        A String that represents the name of the MBean. It is required
        that the name is valid to represent a "value" of a property in
        the property-list of an MBean ObjectName.
        The name must be specified and is a primary key for an MBean.
        An invalid name implies failure of operation.
      </x:div>
      <ref name="name-type"/>
    </attribute>
    <optional>
      <attribute name="object-type" a:defaultValue="user">
          <x:div class="dtd">
            A String representing whether it is a user-defined MBean or a 
            System MBean.
          </x:div>
          <ref name="object-type"/>
      </attribute>
    </optional>
    <attribute name="impl-class-name">
      <x:div class="dtd">
        A String that represents fully qualified class name of MBean 
        implementation. This is read-only.
      </x:div>
    </attribute>
    <optional>
        <attribute name="object-name">
          <x:div class="dtd">
         A String that represents a system-generated Object Name for this MBean.
          </x:div>
        </attribute>
    </optional>
<!--
    <optional>
        <attribute name="location">
          <x:div class='dtd'>
          </x:div>
          <ref name="file-type"/>
        </attribute>
    </optional>
-->
    <optional>
      <attribute name="enabled" a:defaultValue="true">
          <x:div class="dtd">
          </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="extension-module">
    <element name="extension-module">
      <ref name="extension-module-attlist"/>
      <optional>
        <ref name="description"/>
      </optional>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="extension-module-attlist" combine="interleave">
    <attribute name="name" ias:type="key" ias:belongs-to="applications">
      <ref name="name-type"/>      
    </attribute>
    <attribute name="location">
      <ref name="file-type"/>
    </attribute>
    <attribute name="module-type">
      <x:div class="dtd">
           String representing the module type. This module type will be used
           by the runtime to find the appropriate extension container.
      </x:div>
    </attribute>
    <optional>
      <attribute name="object-type" a:defaultValue="user">
        <ref name="object-type"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="enabled" a:defaultValue="true">
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="libraries">
        <x:div class="dtd">
           System dependent path separator [: for Unix/Solaris/Linux and
            ; for Windows] separated list of jar paths. These paths could be
            either relative [relative to {com.sun.aas.instanceRoot}/lib/applibs]
            or absolute paths. These dependencies appears *after* the libraries
            defined in classpath-prefix in the java-config and *before* the
            application server provided over-rideable jar set. The libraries
            would be made available to the application in the order in which
            they were specified.
        </x:div>
      </attribute>
    </optional>
    <optional>
      <attribute name="availability-enabled" a:defaultValue="false">
        <x:div class="dtd">
          The exact semantics of availability being enabled for an
          extension module are undefined at this time.
          If this attribute is missing, it defaults to "false".
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="directory-deployed" a:defaultValue="false">
        <x:div class="dtd">
          This attribute indicates whether the application has been
          deployed to a directory or not
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="jms-availability">
    <element name="jms-availability">
      <ref name="jms-availability-attlist"/>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="jms-availability-attlist" combine="interleave">
    <optional>
      <attribute name="availability-enabled" a:defaultValue="false">
        <x:div class="dtd">
          This boolean flag controls whether the MQ cluster associated
          with the application server cluster is HA enabled or not. If this
          attribute is "false", then the MQ cluster pointed to by the
          jms-service element is considered non-HA. JMS Messages are not
          persisted to a highly available store. If this attribute is "true"
          the MQ cluster pointed to by the jms-service element is a HA cluster
          and the MQ cluster uses the database pointed to by mq-store-pool-name
          to save persistent JMS messages and other broker cluster configuration
          information. Individual applications will not be able to
          control or override MQ cluster availability levels. They inherit
          the availability attribute defined in this element.
          If this attribute is missing, availability is turned off by default 
          [i.e. the MQ cluster associated with the AS cluster would behave as
          a non-HA cluster] 
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
    <optional>
      <attribute name="mq-store-pool-name">
        <x:div class="dtd">
            This is the jndi-name for the JDBC Connection Pool used by
            the MQ broker cluster for use in saving persistent JMS
            messages and other broker cluster configuration information.
            It will default to value of store-pool-name under
            availability-service (ultimately "jdbc/hastore").
        </x:div>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="management-rules">
    <element name="management-rules">
      <x:div class="dtd">
        Container for self management rules
      </x:div>
      <ref name="management-rules-attlist"/>
      <zeroOrMore>
        <ref name="management-rule"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="management-rules-attlist" combine="interleave">
    <optional>
      <attribute name="enabled" a:defaultValue="true">
        <x:div class="dtd">
            Acts as high level switch for disabling all the 
            defined rules. If set to "false" all the configured 
            rules would disabled. If set to "true", enabled 
            state of a particular rule will be decided at 
            that rule level.      
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="management-rule">
    <element name="management-rule">
      <x:div class="dtd">
        Defines the configured self management rule
      </x:div>
      <ref name="management-rule-attlist"/>
      <ref name="event"/>
      <optional>
        <ref name="action"/>
      </optional>
      <optional>
        <ref name="description"/>
      </optional>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns:ias="http://www.sun.com/ias/validation" name="management-rule-attlist" combine="interleave">
    <attribute name="name" ias:type="key">
      <x:div class="dtd">
        Name of the management rule
      </x:div>
      <ref name="name-type"/>
    </attribute>
    <optional>
      <attribute name="enabled" a:defaultValue="true">
        <x:div class="dtd">
            Determines whether the rule is enabled or not.
            Default value is false.      
        </x:div>
        <ref name="boolean"/>
      </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="event">
    <element name="event">
      <x:div class="dtd">
        Defines the event associated with the configured rule.
        For each configured rule there exists one event
        associated with it.
      </x:div>
      <ref name="event-attlist"/>
      <optional>
        <ref name="description"/>
      </optional>
      <zeroOrMore>
        <ref name="property"/>
      </zeroOrMore>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="event-attlist" combine="interleave">
    <attribute name="type">
      <x:div class="dtd">
        Identifies the configured event as one of the predefined event types.
      </x:div>
      <ref name="event-type"/>
    </attribute>
    <optional>
        <attribute name="record-event" a:defaultValue="true">
          <x:div class="dtd">
            Specifies whether the occurance of the event is to be logged or not.
            By default this would be true. If no action is specified, the event
            would be recorded.
          </x:div>
          <ref name="boolean"/>
        </attribute>
    </optional>
    <optional>
        <attribute name="level" a:defaultValue="INFO">
          <x:div class="dtd">
           Specifies at what level to record the event occurance in server log file.
           Default value is INFO
          </x:div>
          <ref name="log-level"/>
        </attribute>
    </optional>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="action">
    <element name="action">
      <x:div class="dtd">
        Defines the action MBean associated with the event.
      </x:div>
      <ref name="action-attlist"/>
    </element>
  </define>
<define xmlns="http://relaxng.org/ns/structure/1.0" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:sch="http://www.ascc.net/xml/schematron" name="action-attlist" combine="interleave">
    <attribute name="action-mbean-name">
      <x:div class="dtd">
        identifies the name of the action MBean.
      </x:div>
      <ref name="name-type"/>
    </attribute>
  </define>
</rng:grammar>

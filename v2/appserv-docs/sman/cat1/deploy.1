User Commands                                           deploy(1)

NAME
     deploy - deploys the specified component

SYNOPSIS
     deploy [--terse=false]  [--echo=false]  [--interactive=true]
     [--host   localhost]  [--port  4848]  [--secure|-s]  [--user
     admin_user]   [--passwordfile   filename]    [--help]    [--
     virtualservers virtual_servers] [--contextroot context_root]
     [--force=true] [--precompilejsp=false] [--verify=false]  [--
     name     component_name]     [--upload=true]     [--retrieve
     local_dirpath]     [--dbvendorname     dbvendorname]     [--
     createtables=true|false  | --dropandcreatetables=true|false]
     [--uniquetablenames=true|false]            [--deploymentplan
     deployment_plan] [--enabled=true] [--generatermistubs=false]
     [--availabilityenabled=false]                   [--libraries
     jar_file[(path_separator)jar_file*]]    [--target    target]
     filepath

DESCRIPTION
     Deploys an  enterprise  application,  web  application,  EJB
     module,  connector  module, or application client module. If
     the component is already deployed or already exists,  it  is
     forcefully redeployed if the --force option is set to true.

     The --createtables  and  --dropandcreatetables  options  are
     booleans and therefore can take the values of true or false.
     These options are only used during deployment of  CMP  beans
     that  have  not been mapped to a database (i.e., no sun-cmp-
     mappings.xml descriptor is provided in the module's META-INF
     directory). They are ignored otherwise.

     The --createtables  and  --dropandcreatetables  options  are
     mutually  exclusive; only one should be used. If drop and/or
     create tables fails, the deployment does not fail; a warning
     message is provided in the log file.

     This command is supported in remote mode only.

OPTIONS
     -t --terse                      Indicates  that  any  output
                                     data  must  be very concise,
                                     typically  avoiding   human-
                                     friendly    sentences    and
                                     favoring well-formatted data
                                     for consumption by a script.
                                     Default is false.

     -e --echo                       Setting to  true  will  echo
                                     the  command  line statement
                                     on  the   standard   output.

                                     Default is false.

     -I --interactive                If set  to  true  (default),
                                     only  the  required password
                                     options are prompted.

     -H --host                       The machine name  where  the
                                     domain administration server
                                     is  running.   The   default
                                     value is localhost.

     -p --port                       The HTTP/S port for adminis-
                                     tration. This is the port to
                                     which you should point  your
                                     browser  in  order to manage
                                     the  domain.   For  example,
                                     http://localhost:4848.

                                     The default port  number  is
                                     4848.

     -s --secure                     If set to true, uses SSL/TLS
                                     to   communicate   with  the
                                     domain        administration
                                     server.

     -u --user                       The    authorized     domain
                                     administration server admin-
                                     istrative username.

                                     If you have authenticated to
                                     a  domain  using the asadmin
                                     login command, then you need
                                     not   specify   the   --user
                                     option on subsequent  opera-
                                     tions   to  this  particular
                                     domain.

     --passwordfile                  The  --passwordfile   option
                                     specifies the name of a file

                                     containing   the    password
                                     entries  in  a specific for-
                                     mat. The entry for the pass-
                                     word must have the AS_ADMIN_
                                     prefix followed by the pass-
                                     word   name   in   uppercase
                                     letters.

                                     For example, to specify  the
                                     domain administration server
                                     password, use an entry  with
                                     the     following    format:
                                     AS_ADMIN_PASSWORD=password,
                                     where password is the actual
                                     administrator      password.
                                     Other  passwords that can be
                                     specified            include
                                     AS_ADMIN_MAPPEDPASSWORD,
                                     AS_ADMIN_USERPASSWORD,   and
                                     AS_ADMIN_ALIASPASSWORD.

                                     All  remote  commands   must
                                     specify  the  admin password
                                     to   authenticate   to   the
                                     domain        administration
                                     server,  either  through  --
                                     passwordfile    or   asadmin
                                     login, or  interactively  on
                                     the   command   prompt.  The
                                     asadmin login command can be
                                     used  only  to  specify  the
                                     admin  password.  For  other
                                     passwords,   that   must  be
                                     specified  for  remote  com-
                                     mands,     use     the    --
                                     passwordfile or  enter  them
                                     at the command prompt.

                                     If you have authenticated to
                                     a  domain  using the asadmin
                                     login command, then you need
                                     not  specify the admin pass-
                                     word    through    the    --
                                     passwordfile  option on sub-
                                     sequent operations  to  this
                                     particular  domain. However,
                                     this is applicable  only  to
                                     AS_ADMIN_PASSWORD    option.
                                     You will still need to  pro-
                                     vide  the  other  passwords,
                                     for                 example,
                                     AS_ADMIN_USERPASSWORD,    as

                                     and when required by indivi-
                                     dual   commands,   such   as
                                     update-file-user.

                                     For security reasons,  pass-
                                     words    specified   as   an
                                     environment  variable   will
                                     not be read by asadmin.

                                     The   default   value    for
                                     AS_ADMIN_MASTERPASSWORD   is
                                     changeit.

     --help                          Displays the help  text  for
                                     the command.

     --virtualservers                One or more  virtual  server
                                     IDs.    Multiple   IDs   are
                                     separated by commas.

     --contextroot                   Valid only if the archive is
                                     a  web module. It is ignored
                                     for  other  archive   types;
                                     defaults to filename without
                                     extension.

     --force                         If set to true,  makes  sure
                                     the  component is redeployed
                                     even if the  specified  com-
                                     ponent   has   already  been
                                     deployed or already  exists.
                                     The default is true.

     --precompilejsp                 By default  this  option  is
                                     set to false, which does not
                                     allow the JSP to pre-compile
                                     during  deployment.  Instead
                                     JSPs  are  compiled   during
                                     runtime.

     --verify                        If set to true,  the  syntax
                                     and semantics of the deploy-
                                     ment descriptor is verified.

     --name                          Name of the deployable  com-
                                     ponent.

     --upload                        When set  to  true,  uploads
                                     the  deployable  file to the
                                     administration  server.   If
                                     the  filepath of the deploy-
                                     able file is mounted to  the
                                     server  machine,  or  if the
                                     administration   server   is
                                     running   locally,  set  the
                                     upload option to false.

     --retrieve                      Retrieves  the  client  stub
                                     JAR  file  from  the  server
                                     machine to the local  direc-
                                     tory.

     --dbvendorname                  Specifies the  name  of  the
                                     database  vendor  for  which
                                     tables  are  created.   Sup-
                                     ported  values  include db2,
                                     mssql,    oracle,     derby,
                                     javadb,          postgresql,
                                     pointbase,    and    sybase,
                                     case-insensitive.   If   not
                                     specified, the value of  the
                                     database-vendor-name  attri-
                                     bute in  sun-ejb-jar.xml  is
                                     used.  If no value is speci-
                                     fied, a connection  is  made
                                     to  the resource specifie by
                                     the jndi-name subelement  of
                                     the  cmp-resource element in
                                     the  sun-ejb-jar.xml   file,
                                     and the database vendor name
                                     is read. If the   connection
                                     cannot be established, or if
                                     the value is not recognized,
                                     SQL-92     compliance     is

                                     presumed.

     --createtables                  Creates tables at deployment
                                     of   an   application   with
                                     unmapped CMP beans.  Default
                                     is   the   create-tables-at-
                                     deploy  entry  in  the  cmp-
                                     resource   element   of  the
                                     sun-ejb-jar.xml file.

     --dropandcreatetables           If set  to  true,  when  the
                                     component is redeployed, the
                                     tables created by the previ-
                                     ous  deployment  are dropped
                                     before  creating   the   new
                                     tables.  Applies  to already
                                     deployed  applications  with
                                     unmapped  CMP  beans. If not
                                     set to true, the tables  are
                                     dropped  if the drop-tables-
                                     at-undeploy  entry  in   the
                                     cmp-resource  element of the
                                     sun-ejb-jar.xml file is  set
                                     to  true. The new tables are
                                     created   if   the   create-
                                     tables-at-deploy   entry  in
                                     the cmp-resource element  of
                                     the  sun-ejb-jar.xml file is
                                     set to true.

     --uniquetablenames              Guarantees   unique    table
                                     names  for all the beans and
                                     results in a hashcode  added
                                     to  the table names. This is
                                     useful if you have an appli-
                                     cation  with  case-sensitive
                                     bean names.

     --deploymentplan                Takes the  deployment  plan,
                                     which  is  a  JAR containing
                                     Sun-specific    descriptors,
                                     and  deploys it. This should
                                     be passed along when deploy-
                                     ing  a pure EAR file. A pure

                                     EAR file is an  EAR  without
                                     Sun-specific descriptors.

     --enabled                       If set  to  true  (default),
                                     allows  users  to access the
                                     application.   If   set   to
                                     false,  users  will  not  be
                                     able to access the  applica-
                                     tion.   For   Standard   and
                                     Enterprise   Edition,   this
                                     option  enables the applica-
                                     tion on the specified target
                                     instance  or cluster. If you
                                     deploy to the target domain,
                                     this   option   is  ignored,
                                     since   deploying   to   the
                                     domain  doesn't  deploy to a
                                     specific instance  or  clus-
                                     ter.

     --generatermistubs              If set to true, static  RMI-
                                     IIOP stubs are generated and
                                     put into the client.jar.  If
                                     set  to  false (default) the
                                     stubs are not generated.

     --availabilityenabled           This  option  is   available
                                     only  in the Sun Java System
                                     Application Server  Standard
                                     and   Enterprise   Editions.
                                     This option controls whether
                                     high-availability is enabled
                                     for SFSB  checkpointing  and
                                     potentially passivation.  If
                                     set to false  (default)  all
                                     SFSB  checkpointing  is dis-
                                     abled  for   the   specified
                                     application  or  EJB module.
                                     If set to true,  the  speci-
                                     fied  application  or module
                                     is   enabled    for    high-
                                     availability.    Set    this
                                     option to true only if  high
                                     availability  is  configured
                                     and enabled at  higher  lev-
                                     els,  such as the server and

                                     container levels.

     --libraries                     Specify  the   library   JAR
                                     files  by  their relative or
                                     absolute   paths.    Specify
                                     relative  paths  relative to
                                     instance-root/lib/applibs.
                                     The  JAR files are separated
                                     by a colon on Unix and Linux
                                     systems  and  by a semicolon
                                     on  Windows   systems.   The
                                     libraries are made available
                                     to the  application  in  the
                                     order  specified.  Place the
                                     dependent JAR files  in  the
                                     domain-dir/lib directory.

     --target                        This  option  is   available
                                     only  in the Sun Java System
                                     Application Server  Standard
                                     and               Enterprise
                                     Editions.Specifies the  tar-
                                     get to which you are deploy-
                                     ing.  Valid values are:

                                       o  server,  which  deploys
                                          the  component  to  the
                                          default server instance
                                          server   and   is   the
                                          default value.

                                       o  domain,  which  deploys
                                          the  component  to  the
                                          domain.  If  domain  is
                                          the  target for an ini-
                                          tial  deployment,   the
                                          application is deployed
                                          to the domain,  but  no
                                          server   instances   or
                                          clusters reference  the
                                          application.  If domain
                                          is  the  target  for  a
                                          redeployment   (the  --
                                          force option is set  to
                                          true),    and   dynamic
                                          reconfiguration      is
                                          enabled  for  the clus-
                                          ters     or      server

                                          instances  that  refer-
                                          ence  the  application,
                                          the  referencing  clus-
                                          ters     or      server
                                          instances automatically
                                          get the new version  of
                                          the   application.   If
                                          redeploying,        and
                                          dynamic   configuration
                                          is    disabled,     the
                                          referencing clusters or
                                          server instances do not
                                          get  the new version of
                                          the  application  until
                                          the  clustered or stan-
                                          dalone server instances
                                          are restarted.

                                       o  cluster_name,     which
                                          deploys  the  component
                                          to     every     server
                                          instance  in  the clus-
                                          ter.

                                       o  instance_name,    which
                                          deploys  the  component
                                          to a  particular  sever
                                          instance.

OPERANDS
     filepath                        Path to the deployable  file
                                     on  the local machine if the
                                     upload  option  is  set   to
                                     true; otherwise the absolute
                                     path  to  the  file  on  the
                                     server machine.

EXAMPLES
     Example 1: Deploying an Enterprise application

     This syntax deploys the Enterprise application  packaged  in
     the  Cart.ear  file  to  the default server instance server.
     For Sun Java System Application Server Standard  and  Enter-
     prise  Editions, use the --target option to deploy to a dif-
     ferent server instance or to a cluster.

     asadmin> deploy --user admin --passwordfile filename Cart.ear
     Command deploy executed successfully

     Example 2: Deploying a Web application with the default con-
     text root

     This syntax deploys the Web  application  in  the  hello.war
     file  to  the  default  server instance server. For Sun Java
     System Application Server Standard and Enterprise  Editions,
     use  the  --target  option  to  deploy to a different server
     instance or to a cluster.

     asadmin> deploy --user admin --passwordfile myfile hello.war
     Command deploy executed successfully

     Example 3: Deploying an enterprise bean (EJB component)

     Deploy an enterprise bean with container-managed persistence
     (CMP) and create the database tables used by the bean.

     This example uses the --target option,  available  with  Sun
     Java  System  Application Sever Standard and Enterprise Edi-
     tions only. To use this example for Platform  Edition,  omit
     that  option.   The  target  in  this example is an existing
     cluster, cluster1.

     asadmin> deploy --user admin --passwordfile filename --createtables=true
     --target cluster1 EmployeeEJB.jar
     Command deploy executed successfully

     Example 4: Deploying a connector module (resource adapter)

     Deploy a connector module packaged in a RAR file.

     This example uses the --target option,  available  with  Sun
     Java  System Application Server Standard and Enterprise Edi-
     tions only. To use this example for Platform  Edition,  omit
     that  option.   The  target  in  this example is an existing
     standalone server instance that does not belong to  a  clus-
     ter.

     asadmin> deploy --user admin --passwordfile filename --target myinstance jdbcra.rar
     Command deploy executed successfully

EXIT STATUS
     0                       command executed successfully

     1                       error in executing the command

SEE ALSO
     undeploy(1), list-components(1)

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html><!-- GenHTML@12751-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<!-- ident	"%Z%%M%	%I%	%E% SMI" -->

    <title>8.&nbsp;&nbsp;J2EE Containers
    </title>
</head>
<body>
<font style="color: red; font-family:arial,helvetica,sans-serif; font-size:12pt; font-weight:bold}">Not For Publication</font>&nbsp;&nbsp;&nbsp;<br>Glassfish Review Draft<br> </td>

<A href="toc.html">Sun Java System Application Server Platform Edition 9 Administration Guide</A>&nbsp;<br>
<A HREF="abllp.html">Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="ablnk.html">Next</A><br>
            <!--startindex--><A NAME="ablms"></A><b>Chapter&nbsp;8</b><h1>J2EE Containers</h1>
<p><A NAME="indexterm-165"></A>This chapter explains how to configure the J2EE containers included in
the server. This chapter contains following sections:</p>
<ul><li><p><A HREF="ablms.html#ablmt">About the J2EE Containers</A></p>
</li>
<li><p><A HREF="ablms.html#ablmx">Admin Console Tasks for the Java EE 5 Containers</A></p>
</li>
</ul>
<A NAME="ablmt"></A><h2>About the J2EE Containers</h2>
<p>This
section describes the J2EE containers included with the Application Server.</p>
<ul><li><p><A HREF="ablms.html#ablmu">Types of J2EE Containers</A></p>
</li>
<li><p><A HREF="ablms.html#ablmv">The Web Container</A></p>
</li>
<li><p><A HREF="ablms.html#ablmw">The EJB Container</A></p>
</li>
</ul>
<A NAME="ablmu"></A><h3>Types of J2EE Containers</h3>
<p>J2EE containers provide runtime support for J2EE application components. J2EE
application components use the protocols and methods of the container to access other
application components and services provided by the server. The Application Server provides
an <A NAME="indexterm-166"></A><A NAME="indexterm-167"></A>application client container, an <A NAME="indexterm-168"></A><A NAME="indexterm-169"></A>applet container, a <A NAME="indexterm-170"></A>Web container, and an <A NAME="indexterm-171"></A>EJB container. For a diagram that shows the containers, see the section <A HREF="ablaq.html#ablat">Application Server Architecture</A>.</p>
<A NAME="ablmv"></A><h3>The Web Container</h3>
<A NAME="indexterm-172"></A><A NAME="indexterm-173"></A><A NAME="indexterm-174"></A><p>The Web Container is a J2EE container that hosts web applications. The web container
extends the web server functionality by providing developers the environment to run <A NAME="indexterm-175"></A>servlets and <A NAME="indexterm-176"></A><A NAME="indexterm-177"></A>JavaServer Pages (JSP files).</p>
<p>See Also:</p>
<ul><li><p><A HREF="ablms.html#ablmy">Configuring the General Web Container Settings</A></p>
</li>
</ul>
<A NAME="ablmw"></A><h3>The EJB Container</h3>
<A NAME="indexterm-178"></A><p>Enterprise beans (EJB components) are Java programming language server components
that contain business logic. The EJB container provides local and remote access to
enterprise beans.</p>
<p>There are three types of enterprise beans: <A NAME="indexterm-179"></A>session beans, <A NAME="indexterm-180"></A>entity beans, and <A NAME="indexterm-181"></A>message-driven beans. Session beans represent transient objects and processes
and typically are used by a single client. Entity beans represent persistent data,
typically maintained in a database. Message-driven beans are used to pass messages
asynchronously to application modules and services.</p>
<p>The container is responsible for <A NAME="indexterm-182"></A>creating the enterprise bean, binding the enterprise bean to the <A NAME="indexterm-183"></A><A NAME="indexterm-184"></A>naming service so other application components can access the enterprise
bean, ensuring only <A NAME="indexterm-185"></A>authorized clients have access to the enterprise bean's methods,
saving the bean's state to <A NAME="indexterm-186"></A>persistent storage, <A NAME="indexterm-187"></A>caching the state of the bean, and <A NAME="indexterm-188"></A>activating or <A NAME="indexterm-189"></A>passivating the bean when necessary.</p>
<p>Sun Java
System Application Server 9 conforms to Java EE 5 and EJB 3.0 specifications Therefore
a JNDI name will be no longer be required for EJB 3.0 session beans that expose a
Remote view. If a deployed Remote EJB 3.0 bean does not provide a global JNDI name,
the container will assign it one at runtime.  The assigned JNDI name is the fully
qualified class name of the remote EJB's business interface. In addition, EJB clients
that use the new Remote EJB 3.0 client view will not be required to map their remote
@EJB references to a global JNDI name within sun-ejb-jar.xml. If a JNDI name has not
been associated with the ejb reference, the container will derive the default JNDI
name for the target EJB from its associated business interface.</p>
<p>Applications
using this EJB 3.0 feature will no longer need <tt>sun-ejb-jar.xml</tt> or <tt>sun-application-client.xml</tt> configuration files. The older method of providing
a JNDI name in <tt>sun-ejb-jar.xml</tt> will continue to work. It will
also be possible for the application to map an <tt>ejb-reference</tt> or <tt>@EJB</tt> reference to a specific global JNDI name. </p>
<p>See Also:</p>
<ul><li><p><A HREF="ablms.html#ablnc">Configuring the General EJB Settings</A></p>
</li>
</ul>
<A NAME="ablmx"></A><h2>Admin Console Tasks for the Java EE 5 Containers</h2>
<ul><li><p><A HREF="ablms.html#ablmy">Configuring the General Web Container Settings</A></p>
</li>
<li><p><A HREF="ablms.html#ablnc">Configuring the General EJB Settings</A></p>
</li>
<li><p><A HREF="ablms.html#ablng">Configuring the Message-Driven Bean Settings</A></p>
</li>
<li><p><A HREF="ablms.html#ablnh">Configuring the EJB Timer Service Settings</A></p>
</li>
</ul>
<A NAME="ablmy"></A><h3>Configuring the General Web Container Settings</h3>
<p>In this release, there are no container-wide settings for the Web container
in the Admin Console.</p>
<p>See Also:</p>
<ul><li><p><A HREF="ablms.html#ablmz">Configuring Web Container Sessions</A></p>
</li>
<li><p><A HREF="ablms.html#ablna">To configure the manager properties</A></p>
</li>
<li><p><A HREF="ablms.html#ablnb">To configure the store properties</A></p>
</li>
<li><p><A HREF="ablms.html#ablmv">The Web Container</A></p>
</li>
</ul>
<A NAME="ablmz"></A><h3>Configuring Web Container Sessions</h3>
<A NAME="indexterm-190"></A><p><A NAME="indexterm-191"></A><A NAME="indexterm-192"></A><A NAME="indexterm-193"></A>This section describes the HTTP session settings in the Web container.
HTTP sessions are unique web sessions that have their state data written to a persistent
store.</p>
<ul><li><p><A HREF="ablms.html#fxiyd">To set the session timeout value</A></p>
</li>
<li><p><A HREF="ablms.html#ablna">To configure the manager properties</A></p>
</li>
<li><p><A HREF="ablms.html#ablnb">To configure the store properties</A></p>
</li>
</ul>
<A NAME="fxiyd"></A><h4><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To set the session timeout value</h4>
<h5>Steps</h5><ol><li><p><b>In the tree component, select the Configuration node.
                  </b></p></li>
<li><p><b>Select the Web Container node.</b></p></li>
<li><p><b>Click the Session Properties tab.</b></p></li>
<li><p><b><A NAME="indexterm-194"></A>In the Session Timeout field, enter the number of seconds that a session
is valid.</b></p></li>
<li><p><b>Click Save.</b></p></li>
</ol><h5>See Also</h5><ul><li><p><A HREF="ablms.html#ablmy">Configuring the General Web Container Settings</A></p>
</li>
<li><p><A HREF="ablms.html#ablna">To configure the manager properties</A></p>
</li>
<li><p><A HREF="ablms.html#ablnb">To configure the store properties</A></p>
</li>
<li><p><A HREF="ablms.html#ablmv">The Web Container</A></p>
</li>
</ul>
<A NAME="ablna"></A><h4><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To configure the manager properties</h4>
<p><A NAME="indexterm-195"></A><A NAME="indexterm-196"></A>The session manager provides the means to configure how sessions are created
and destroyed, where session state is stored, and the maximum number of sessions.</p>
<p>To change the session manager settings:</p>
<h5>Steps</h5><ol><li><p><b>In the tree component select the Configuration node.</b></p></li>
<li><p><b>Select the Web Container node.</b></p></li>
<li><p><b>Click the Manager Properties tab.</b></p></li>
<li><p><b>Set the Reap Interval value.</b></p><p>The Reap Interval field is the
number of seconds before the <A NAME="indexterm-197"></A><A NAME="indexterm-198"></A><A NAME="indexterm-199"></A>inactive session data is deleted from the store.</p>
</li>
<li><p><b>Set the Max Sessions value.</b></p><p>The Max Sessions field is the
maximum number of sessions allowed.</p>
</li>
<li><p><b><A NAME="indexterm-200"></A><A NAME="indexterm-201"></A>Set the Session Filename value.</b></p><p>The Session Filename field
is the file that contains the session data.</p>
</li>
<li><p><b><A NAME="indexterm-202"></A><A NAME="indexterm-203"></A>Set the Session ID Generator Classname value.</b></p><p>The Session
ID Generator Classname field allows you to specify a custom class for generating unique
session IDs. Only one session ID generator class per server instance is permitted,
and all instances in a cluster must use the same session ID generator to prevent session
key collision.</p>
<p>Custom session ID generator classes must implement the <tt>com.sun.enterprise.util.uuid.UuidGenerator</tt> interface:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>package com.sun.enterprise.util.uuid;

public interface UuidGenerator {

    public String generateUuid();
    public String generateUuid(Object obj);  //obj is the session object
}</pre>
</td></table><br><p>The class must be in the Application Server classpath.</p>
</li>
<li><p><b>Click Save.</b></p></li>
</ol><h5>See Also</h5><ul><li><p><A HREF="ablms.html#ablmy">Configuring the General Web Container Settings</A></p>
</li>
<li><p><A HREF="ablms.html#ablmz">Configuring Web Container Sessions</A></p>
</li>
<li><p><A HREF="ablms.html#ablmv">The Web Container</A></p>
</li>
</ul>
<A NAME="ablnb"></A><h4><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To configure the store properties</h4>
<h5>Steps</h5><ol><li><p><b>In the tree component, select the Configuration node.</b></p></li>
<li><p><b>Select the Web Container node.</b></p></li>
<li><p><b>Click the Store Properties tab.</b></p></li>
<li><p><b><A NAME="indexterm-204"></A>Set the Reap Interval.</b></p><p>The Reap Interval field is the number
of seconds before the <A NAME="indexterm-205"></A><A NAME="indexterm-206"></A>inactive session data is deleted from the store.</p>
</li>
<li><p><b>Click Save.</b></p></li>
</ol><h5>See Also</h5><ul><li><p><A HREF="ablms.html#ablmy">Configuring the General Web Container Settings</A></p>
</li>
<li><p><A HREF="ablms.html#ablmv">The Web Container</A></p>
</li>
</ul>
<A NAME="ablnc"></A><h3>Configuring the General EJB Settings</h3>
<A NAME="indexterm-207"></A><A NAME="indexterm-208"></A><p>This section describes the following settings, which apply to all enterprise
bean containers on the server:</p>
<ul><li><p><A HREF="ablms.html#ablnd">Session Store Location</A></p>
</li>
<li><p><A HREF="ablms.html#ablne">To configure EJB pool settings</A></p>
</li>
<li><p><A HREF="ablms.html#ablnf">To configure EJB cache settings</A></p>
</li>
</ul>
<p>To override the defaults on a per-container basis,
adjust the values in the enterprise bean's <tt>sun-ejb-jar.xml</tt> file.
For details, see the <i>Application Server Developer's Guide</i>.</p>
<A NAME="ablnd"></A><h4>Session Store Location</h4>
<A NAME="indexterm-209"></A><A NAME="indexterm-210"></A><A NAME="indexterm-211"></A><p>The Session Store Location field specifies the directory where passivated beans
and persisted HTTP sessions are stored on the file system.</p>
<p>Passivated beans are enterprise beans that have had their state written to a
file on the file system. Passivated beans typically have been <A NAME="indexterm-212"></A>idle for a certain period of time, and are not currently being accessed
by clients.</p>
<p>Similar to passivated beans, persisted HTTP sessions are individual web sessions
that have had their state written to a file on the file system.</p>
<p>The Commit Option field specifies how the container <A NAME="indexterm-213"></A><A NAME="indexterm-214"></A><A NAME="indexterm-215"></A>caches passivated entity bean instances between transactions.</p>
<p>Option B caches entity bean instances between transactions, and is selected
by default. <A NAME="indexterm-216"></A>Option C disables caching.</p>
<A NAME="ablne"></A><h4><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To configure EJB pool settings</h4>
<A NAME="indexterm-217"></A><A NAME="indexterm-218"></A><p>The container maintains a pool of enterprise beans in order to respond to client
requests without the performance hit that results from creating the beans. These settings
only apply to <A NAME="indexterm-219"></A><A NAME="indexterm-220"></A>stateless session beans and <A NAME="indexterm-221"></A><A NAME="indexterm-222"></A>entity beans.</p>
<p>If you experience <A NAME="indexterm-223"></A>performance problems in an application that uses deployed enterprise beans,
creating a pool, or increasing the number of beans maintained by an existing pool,
can help increase the <A NAME="indexterm-224"></A><A NAME="indexterm-225"></A>application's performance.</p>
<p>By default, the container maintains a pool of enterprise beans.</p>
<h5>Steps</h5><ol><li><p><b>In the tree component, select the Configuration node.
                     </b></p></li>
<li><p><b>Select the EJB Container node.</b></p></li>
<li><p><b>Under Pool Settings in the Initial and Minimum Pool Size field enter the
minimum number of beans the container creates in the pool.</b></p></li>
<li><p><b>In the Maximum Pool Size field enter the maximum number of beans the container
maintains in the pool, at any time.</b></p></li>
<li><p><b>In the Pool Resize Quantity field enter the number of beans that will
be removed from the pool if they are idle for more than the time specified in <A NAME="indexterm-226"></A><A NAME="indexterm-227"></A>Pool Idle Timeout.</b></p></li>
<li><p><b>In the Pool Idle Timeout field enter the time, in seconds, that a bean
in the pool can remain idle before it will be removed from the pool.</b></p></li>
<li><p><b>Click Save.</b></p></li>
<li><p><b>Restart the Application Server.</b></p></li>
</ol><A NAME="ablnf"></A><h4><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To configure EJB cache settings</h4>
<A NAME="indexterm-228"></A><A NAME="indexterm-229"></A><A NAME="indexterm-230"></A><A NAME="indexterm-231"></A><p>The container maintains a cache of enterprise bean data for the most used enterprise
beans. This allows the container to respond more quickly to requests from other application
modules for data from the enterprise beans. This section applies only to stateful
session beans and entity beans.</p>
<p>Cached enterprise beans are in one of three states: <A NAME="indexterm-232"></A>active, <A NAME="indexterm-233"></A>idle, or <A NAME="indexterm-234"></A>passivated. An active enterprise bean is currently being accessed by clients.
An idle enterprise bean's data is currently in the cache, but no clients are
accessing the bean. A passivated bean's data is temporarily stored, and read
back into the cache if a client requests the bean.</p>
<h5>Steps</h5><ol><li><p><b>In the tree component, select the Configuration node.</b></p></li>
<li><p><b>Select the EJB Container node.</b></p></li>
<li><p><b>Adjust the maximum cache size in the Max Cache Size field.</b></p><p>Increase the maximum number of beans to cache to eliminate the overhead of bean creation
and destruction. However, if the cache is increased, the server consumes more memory
and resources. Be sure your operating environment is sufficient for your cache settings.</p>
</li>
<li><p><b>Adjust the cache resize quantity in the Cache Resize Quantity field.</b></p><p>When the maximum number of cached beans is reached, the container removes a
number of passivated beans from the backup store, set to 32 by default.</p>
</li>
<li><p><b>Adjust the rate, in seconds, at which the <A NAME="indexterm-235"></A>cache cleanup is scheduled for entity beans in the <A NAME="indexterm-236"></A><A NAME="indexterm-237"></A>Cache Idle Timeout field.</b></p><p>If a cached entity bean has been
idle a certain amount of time, it is passivated. That is, the bean's state is
written to a backup store.</p>
</li>
<li><p><b>Adjust the time, in seconds, after which stateful session beans are removed
from the cache or passivated store in the Removal Timeout field.</b></p></li>
<li><p><b><A NAME="indexterm-238"></A>Configure the policy the container uses to remove stateful session beans
in the Removal Selection Policy field.</b></p><p>The container decides which stateful
session beans to remove based on the policy set in the Removal Selection Policy field.
There are three possible policies the container uses to remove beans from the cache:</p>
<ul><li><p>Not recently used (NRU)</p>
</li>
<li><p>First in, first out (FIFO)</p>
</li>
<li><p>Least recently used (LRU)</p>
</li>
</ul>
<p>The NRU policy removes a bean that hasn't been used recently. The FIFO
policy removes the oldest bean in the cache. The LRU policy removes the least recently
accessed bean. By default, the NRU policy is used by the container.</p>
<p>Entity
beans are always removed using the FIFO policy.</p>
</li>
<li><p><b>Click Save.</b></p></li>
<li><p><b>Restart the Application Server.</b></p></li>
</ol><h5>See Also</h5><ul><li><p><A HREF="ablms.html#ablmw">The EJB Container</A></p>
</li>
</ul>
<A NAME="ablng"></A><h3>Configuring the Message-Driven Bean Settings</h3>
<A NAME="indexterm-239"></A><A NAME="indexterm-240"></A><A NAME="indexterm-241"></A><p>The pool for message-driven beans is similar to the pool for session beans described
in <A HREF="ablms.html#ablne">To configure EJB pool settings</A>. By default, the
container maintains a pool of message--driven beans.</p>
<p>To adjust the configuration of this pool:</p>
<A NAME="toc-150"></A><h4><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To configure MDB pool settings</h4>
<h5>Steps</h5><ol><li><p><b>In the tree component, select the Configuration node.</b></p></li>
<li><p><b>Select the EJB Container node.</b></p></li>
<li><p><b>Click the MDB Settings tab.</b></p></li>
<li><p><b>Under Pool Settings in the Initial and Minimum Pool Size field, enter
the minimum number of message beans the container creates in the pool.</b></p></li>
<li><p><b>In the Maximum Pool Size field, enter the maximum number of beans the
container maintains in the pool, at any time.</b></p></li>
<li><p><b>In the Pool Resize Quantity field, enter the number of beans that are
removed from the pool if they are <A NAME="indexterm-242"></A><A NAME="indexterm-243"></A>idle for more than the time specified in Pool Idle Timeout.</b></p></li>
<li><p><b>In the Pool Idle Timeout field, enter the time, in seconds, that a bean
in the pool can remain idle before it is removed from the pool.</b></p></li>
<li><p><b>Click Save.</b></p></li>
<li><p><b>Restart the Application Server.</b></p></li>
</ol><h5>See Also</h5><ul><li><p><A HREF="ablms.html#ablmw">The EJB Container</A></p>
</li>
<li><p><A HREF="ablms.html#ablmy">Configuring the General Web Container Settings</A></p>
</li>
</ul>
<A NAME="ablnh"></A><h3>Configuring the EJB Timer Service Settings</h3>
<A NAME="indexterm-244"></A><A NAME="indexterm-245"></A><A NAME="indexterm-246"></A><A NAME="indexterm-247"></A><p>The timer service is a persistent and transactional notification service provided
by the enterprise bean container used to schedule notifications or events used by
enterprise beans. All enterprise beans except <A NAME="indexterm-248"></A>stateful session beans can receive notifications from the timer service.
Timers set by the service are not destroyed when the <A NAME="indexterm-249"></A><A NAME="indexterm-250"></A>server is shut down or restarted.</p>
<A NAME="ablni"></A><h4><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To configure the Timer Service</h4>
<h5>Steps</h5><ol><li><p><b>In the tree component, select the Configuration node.
                     </b></p></li>
<li><p><b>Select the EJB Container node.</b></p></li>
<li><p><b>Click the EJB Timer Service tab.</b></p></li>
<li><p><b>Set the minimum delivery interval in milliseconds in the Minimum Delivery
Interval field. </b></p><p>Minimum Delivery Interval is the minimum number of milliseconds
allowed before the next timer expiration for a particular timer can occur. Setting
this interval too low can cause server overload.</p>
</li>
<li><p><b>Set the maximum number of attempts the timer service makes to deliver
the notification in the Maximum Redeliveries field.</b></p></li>
<li><p><b>Set the interval, in milliseconds, between redelivery attempts in the
Redelivery Interval field.</b></p></li>
<li><p><b>Click Save.</b></p></li>
<li><p><b>Restart the Application Server.</b></p></li>
</ol><A NAME="ablnj"></A><h4><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To use an external database with the Timer Service</h4>
<p>The timer service by default uses an embedded database to store timers.</p>
<h5>Steps</h5><ol><li><p><b><A NAME="indexterm-251"></A>Set up a JDBC resource for the database, as described in LINK REMOVED.</b></p></li>
<li><p><b><A NAME="indexterm-252"></A>Enter the JNDI name of the resource in the Timer DataSource field.</b></p></li>
<li><p><b>Click Save.</b></p></li>
<li><p><b>Restart the Application Server.</b></p><p>Sample timer database creation
files are provided for <A NAME="indexterm-253"></A><A NAME="indexterm-254"></A>PointBase and <A NAME="indexterm-255"></A><A NAME="indexterm-256"></A>Oracle at <i>install-dir</i><tt>/lib/install/databases/</tt>.</p>
</li>
</ol><h5>See Also</h5><ul><li><p>LINK REMOVED -- To create a JDBC resource. </p>
</li>
<li><p>LINK REMOVED JNDI Names and Resources</p>
</li>
<li><p><A HREF="ablms.html#ablmw">The EJB Container</A></p>
</li>
</ul>

            <!--stopindex-->
<br>
<A HREF="abllp.html">Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="ablnk.html">Next</A>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>

<!--

-->

<head>

  <meta http-equiv="Content-type" content="text/html; charset=utf-8">
  <!-- ident      "%Z%%M% %I%     %E% SMI" -->

  <title>JDBC 接続プールを作成する - Sun GlassFish Enterprise Server v3 Prelude  管理コンソールオンラインヘルプ
  </title>
  <script language="JavaScript1.2">
    linktag = window.parent.frames[0].document.getElementsByTagName('link');
    for (var i = 0; i < linktag.length; i++) {
        if (linktag[i].rel == "stylesheet") {
            var s = "<link rel=" + linktag[i].rel + " type='text/css' href=" + linktag[i].href + " />";
            document.write(s);
        }
    }
  </script>

</head>

<body class="HlpBdy">



<a name="task-jdbcconnectionpoolnew"></a><h4>JDBC 接続プールを作成する</h4><p>管理コンソールで接続プールを作成すると、特定のデータベースへの接続の項目を定義することになります。</p><h6>始める前に</h6><p>接続プールを作成するには、JDBC API をサポートするドライバ (JDBC ドライバ) を最初にインストールし、統合する必要があります。<a href="task-integratejdbcdriver.html">「JDBC ドライバを統合する」</a>を参照してください。</p><p>JDBC 接続プールの作成には次の情報が必要です。手順を進める前に、これらの情報を収集してください。</p>
<ul><li><p>データベースベンダー名</p></li>
<li><p>リソースの型。たとえば <tt>javax.sql.DataSource</tt> (ローカルトランザクションのみ)、<tt>java.sql.ConnectionPoolDataSource</tt> (ローカルトランザクション、パフォーマンス改善が可能)、<tt>javax.sql.XADataSource</tt> (グローバルトランザクション) など</p></li>
<li><p>データソースクラス名</p></li>
<li><p>データベース名 (URL)、ユーザー名、およびパスワードなどの必要なプロパティー</p></li></ul>
<ol>
<li><b>ナビゲーションツリーで、「共通操作」ノードを選択します。</b></li>
<li><b>「共通操作」ページで、「新しい JDBC 接続プールを作成します」ボタンをクリックします。</b><p>「新しい JDBC 接続プール (ステップ 1/2)」ページが開きます。</p>
<hr><p><b>注 &#8211; </b>「リソース」ノードおよび「JDBC」ノードを展開し、「接続プール」ノードを選択して、「JDBC 接続プール」ページにアクセスすることもできます。次に、「新しい接続プール」ページで、「新規」を選択して新しい接続プールを作成します。</p>
<hr>
</li>
<li><b>「名前」フィールドに、新しい接続フィールドの名前を入力します。</b><p>このフィールドは必須です。</p></li>
<li><b>「リソースタイプ」ドロップダウンリストから、リソースタイプを選択します。</b><p><tt>javax.sql.XADataSource</tt> (グローバルトランザクション)、<tt>java.sql.ConnectionPoolDataSource</tt> (ローカルトランザクション、パフォーマンス改善が可能)、<tt>javax.sql.DataSource</tt> (ローカルトランザクションのみ) から選択できます。</p></li>
<li><b>「データベースベンダー」ドロップダウンリストから、データベースベンダーを選択します。</b></li>
<li><b>「次へ」をクリックします。</b><p>「新しい JDBC 接続プール (ステップ 2/2)」ページが開きます。</p></li>
<li><b>「データソースクラス名」フィールドに、データソースまたは XADataSource API、あるいはその両方を実装するベンダー固有のクラスの名前を入力します。</b></li>
<li><b>「説明」フィールドに、接続プールの簡単な説明を入力します。</b></li>
<li><b>「初期および最小プールサイズ」フィールドに、このプールの最小接続数を入力します。</b><p>この値は、プールを最初に作成したり、アプリケーションサーバーを起動したりするときの、プールに含まれる接続の数も判定します。デフォルト値は 8 です。</p></li>
<li><b>「最大プールサイズ」フィールドに、このプールの最大接続数を入力します。</b><p>デフォルト値は 32 です。</p></li>
<li><b>「プールサイズ変更量」フィールドに、プールサイズの変更バッチごとの接続数を入力します。</b><p>プールのサイズを最大プールサイズおよび最小プールサイズに対して拡大および縮小すると、一括処理でプールサイズが変更されます。この値は一括処理での接続の数を指定します。この値を過大に設定すると接続の作成と再利用が遅れ、過小に設定すると効率が落ちます。デフォルト値は 2 です。</p></li>
<li><b>「アイドルタイムアウト」フィールドに、接続がプール内にアイドル状態で残ることができる最大時間を秒単位で入力します。</b><p>この時間を過ぎると、接続はプールから削除されます。デフォルト値は 30 です。</p></li>
<li><b>「最大待ち時間」フィールドに、接続を要求しているアプリケーションが接続タイムアウトを受け取るまでに待機する最長時間をミリ秒単位で入力します。</b><p>デフォルト値は 60,000 です。</p></li>
<li><b>「接続検証」の「必要」チェックボックスを選択して、接続検証を有効にします。</b><p>接続検証によって、サーバーは障害発生時に再接続できます。</p></li>
<li><b>「検証方法」ドロップダウンリストから、検証方法を選択します。</b><p>アプリケーションサーバーは、次の 3 つの方法でデータベース接続を検証できます。auto-commit、metadata、および  table。</p><dl><dt>auto-commit および metadata</dt>
<dd><p>アプリケーションサーバーは、<tt>con.getAutoCommit()</tt> メソッドと <tt>con.getMetaData</tt> メソッドを呼び出して接続を検証します。</p>
<hr><p><b>注 &#8211; </b>多数の JDBC ドライバが、これらの呼び出しの結果をキャッシュします。その結果、これらの呼び出しを使用すると、信頼できる検証が行われない場合もあります。呼び出しがキャッシュされるかどうかについて、ドライバベンダーに問い合わせる必要があります。</p>
<hr>
</dd>
<dt>table</dt>
<dd><p>アプリケーションは、指定したデータベース表に対してクエリーを実行します。表は実在し、アクセス可能である必要がありますが、行は必要ありません。多くの行を持つ既存の表や、すでに頻繁にアクセスされている表を使用しないでください。</p></dd>
</dl>
</li>
<li><b>「検証方法」ドロップダウンリストで「table」を選択した場合、「テーブル名」フィールドにデータベーステーブルの名前を入力します。</b><p>テーブル名に含めることができるのは、英数字、下線、ダッシュ、またはドットの各文字だけです。</p></li>
<li><b>「すべての障害で全ての接続を閉じる」チェックボックスを選択して、接続の障害発生時にサーバーがプール内のすべての接続を閉じて、それらを再度確立するようにします。</b><p>このチェックボックスが選択されていない場合、個々の接続はそれぞれの使用時のみ再度確立されます。</p></li>
<li><b>「コンポーネント以外の呼び出し元を許可」の「有効」チェックボックスを選択して、コンポーネント以外の呼び出し元がプールを使用できるようにします。</b><p>コンポーネント以外の呼び出し元の具体例には、サーブレットフィルタやライフサイクルモジュールなどがあります。</p></li>
<li><b>「非トランザクション接続」の「有効」チェックボックスを選択して、非トランザクション接続を返すようにします。</b></li>
<li><b>「トランザクション遮断」の「レベル」ドロップダウンリストから、この接続プールのトランザクション遮断レベルを選択します。</b><p>指定しない場合、接続には JDBC ドライバによって設定されるデフォルトの遮断レベルが適用されます。</p></li>
<li><b>「遮断レベル」の「保証」チェックボックスが適用されるのは、手順 20 でトランザクション遮断レベルが指定された場合のみです。</b><p>「保証」チェックボックスを選択すると、プールから取得されるすべての接続が同じ遮断レベルになります。たとえば、最後の使用時に <tt>con.setTransactionIsolation</tt> を使って接続の遮断レベルをプログラム的に変更した場合、このメカニズムによって状態が指定の遮断レベルに戻されます。</p></li>
<li>(省略可能) <b>「追加プロパティー」セクションで、追加プロパティーを指定します。</b><p>必須プロパティーの具体例は、データベース名 (URL)、ユーザー名、パスワードなどです。データベースベンダーによってプロパティーが異なるため、詳細については、ベンダーのマニュアルを参照してください。</p></li>
<li><b>「完了」をクリックします。</b></li></ol><h6>参照</h6>
<ul><li><p><a href="task-setdbaccess.html">「データベースアクセスを設定する」</a></p></li>
<li><p><a href="task-integratejdbcdriver.html">「JDBC ドライバを統合する」</a></p></li>
<li><p><a href="task-jdbcresourcenew.html">「JDBC リソースを作成する」</a></p></li>
<li><p><a href="task-jdbcresourcesedit.html">「JDBC リソースを編集する」</a></p></li>
<li><p><a href="task-jdbcresourcesdelete.html">「JDBC リソースを削除する」</a></p></li>
<li><p><a href="task-jdbcconnectionpooledit.html">「JDBC 接続プールの一般設定を編集する」</a></p></li>
<li><p><a href="task-jdbcconnectionpooladvance.html">「JDBC 接続プールの詳細属性を編集する」</a></p></li>
<li><p><a href="task-verifyconnpoolsettings.html">「接続プール設定を検証する」</a></p></li>
<li><p><a href="task-jdbcconnectionpoolproperty.html">「JDBC 接続プールのプロパティーを編集する」</a></p></li>
<li><p><a href="task-jdbcconnectionpooldelete.html">「JDBC 接続プールを削除する」</a></p></li></ul>

<br/>

</body>
</html>

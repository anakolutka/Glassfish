<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>TestNG Test Instructions</title>
</head>

<body>
<h2 align="center">Instructions to add test in TestNG framework for community tests.</h2>
<p><a href="#test_suite_write"><br />
  </a><font face="Arial, Helvetica, sans-serif"><strong><a href="index.html">&laquo; 
Back to the
<nop>testing GlassFish</nop>
Quality Page</a></strong></font></p>
<p><a href="#test_suite_write">Test Suite writing methodology for EJB 30/Java EE 5 based tests.</a><br />
  <a href="#netbeans_glassfish">Integrate latest build of GlassFish with Netbeans</a><br />
  <a href="#run_single_netbeans">To run individual test in Netbeans</a><br />
  <a href="#run_all_netbeans">Run all tests in Netbeans</a></p>
<p>&nbsp;</p>
<p>New to GlassFish? Check this screencast out.<a href="http://download.java.net/javaee5/screencasts/deployment/">http://download.java.net/javaee5/screencasts/deployment/ </a></p>
<p>Assuming you have developer role. checkout workspace glassfish/appserv-tests/community</p>
<p>Add functional tests in location specific to glassfish functionality-namely, </p>
<ul>
  <li>web: contains all the test exercising jsp, servlets,jsf, etc, feature of glassfish using TestNG </li>
  <li>ejb30: contains all the test exercising new EJB30 specification of GlassFish using TestNG </li>
  <li>persistence: Java Persistence API tests using TestNG </li>
  <li>adminweb: tests for web based administration console of GlassFish using Selenium and TestNG </li>
  <li>other categories coming soon </li>
</ul>
<p><strong>Netbeans and GlassFish latest integration<a name="netbeans_glassfish" id="netbeans_glassfish"></a> </strong></p>
<ul>
  <li>Download latest build of GlassFish</li>
  <li>Download latest stable (commercial) release of<a href="http://www.netbeans.org"> Netbeans</a>. Say 5.5 or 6.0</li>
  <li>First configure your GlassFish build by running &quot;ant -f setup.xml&quot;.  A new instance of glassfish will be created and domain server installed  at current directory </li>
  <li>Go to server runtime,and register your GlassFish Application Server.You would need to know domain server path </li>
  <li>Default administrator username of Glassfish is &quot;admin&quot;</li>
  <li>Password is &quot;adminadmin&quot;or otherwise, look for admin.password entry inside setup.xml </li>
</ul>
<p>&nbsp;</p>
<p><strong>Test Suite writing methodology for EJB 30/Java EE 5 based tests.<a name="test_suite_write" id="test_suite_write"></a></strong></p>
<ul>
  <li>Standalone clients are used instead of Java EE 5 appclient. Appclient are tested separately.</li>
  <li>First identify which functional area tests belong to, Is it testing web,ejb, or any other exposed interface of GlassFish.</li>
  <li>Plan to add tests in related directory.</li>
  <li>Steps to create a test suite in EJB 30 area using Netbeans </li>
  <li>Let's say you recently found an issue in EJB  interceptors and wish to add a regression test case for your issue.</li>
  <li>Create a directory called &quot;interceptor&quot; under tree &quot;appserv-tests/community/ejb30/&quot; As you can see, we don't have tests in that area.</li>
  <li>Directory structure for this test will be similar to appserv-tests/community/ejb30/session/hello/</li>
  <li>metadata has xml file related to application archive, like &quot;sun-ejb-jar.xml&quot;, &quot;ejb-jar.xml&quot;</li>
  <li>src/ejb directory contains source code EJB's used in application</li>
  <li>src/test contains standalone client exercising EJB's in application. Methods inside standalone client are actually TestNG test mothds and annotated as such. </li>
  <li>It is recommended that directory structures are created first before opening test in Netbeans</li>
  <li>Use build.xml and build.properties template file for starters. build.properties would need to be edited to point to correct relative path. </li>
</ul>
<p>Test suites are designed to work independently inside Netbeans enviornment and also have can be run from top level using either Netbeans and ANT. </p>
<p><strong>Run all tests in Netbeans.<a name="run_all_netbeans" id="run_all_netbeans"></a></strong></p>
<ol>
  <li>Open Netbeans</li>
  <li>Open project glassfish/community/</li>
  <li>Edit build.properties for admin server port number etc. </li>
  <li>First execute the target &quot;build&quot; , &quot;deploy&quot;, &quot;compile-tests&quot;.</li>
  <li>Execute the target &quot;run&quot; target. This will execute all tests mentioned in testng.xml </li>
</ol>
<p><strong>To run individual test in Netbeans<a name="run_single_netbeans" id="run_single_netbeans"></a></strong></p>
<p>Open Netbeans</p>
<ol>
  <li>Go to leaf level build.xml for test</li>
  <li>First execute the target &quot;build&quot; , &quot;deploy&quot;, &quot;compile-tests&quot;.</li>
  <li>Execute the target &quot;run&quot; target. This will execute java class file mentioned in leaf level build.xml </li>
</ol>
<p>&nbsp;</p>
<p>&nbsp;</p>
<blockquote>
  <p>&nbsp;</p>
</blockquote>
<p>&nbsp; </p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</body>
</html>

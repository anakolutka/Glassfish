<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>

<!--

-->

<head>

  <meta http-equiv="Content-type" content="text/html; charset=utf-8">
  <!-- ident      "%Z%%M% %I%     %E% SMI" -->

  <title>Configurer le journal d'accès de service HTTP - Aide en ligne de la console d'administration de Sun GlassFish Enterprise Server v3 Prelude
  </title>
  <script language="JavaScript1.2">
    linktag = window.parent.frames[0].document.getElementsByTagName('link');
    for (var i = 0; i < linktag.length; i++) {
        if (linktag[i].rel == "stylesheet") {
            var s = "<link rel=" + linktag[i].rel + " type='text/css' href=" + linktag[i].href + " />";
            document.write(s);
        }
    }
  </script>

</head>

<body class="HlpBdy">



<a name="task-accesslog"></a><h4>Configurer le journal d'accès de service HTTP</h4><p>Enterprise Server utilise le journal d'accès du service HTTP pour activer et
configurer la rotation des journaux d'accès pour les serveurs virtuels. Ces journaux
sont situés dans le répertoire <tt><i>domain_root_dir</i>/<i>domain_dir </i>/logs/access</tt> et sont nommés comme suit :
<tt><i> virtual_server_name</i>_access_log.<i>yyyyMMdd</i>-<i> HH</i>h<i>mm</i>m<i>ss</i>s.txt </tt></p><ol>
<li><b>Dans l'arborescence de navigation, développez le nœud Configuration.</b></li>
<li><b>Sous le nœud Configuration, sélectionnez le nœud Service HTTP.</b></li>
<li><b>Sur la page Service HTTP, cliquez sur l'onglet Journal d'accès.</b><p>La page Journal d'accès s'ouvre.</p></li>
<li><b>Cochez la case Rotation activée pour activer la rotation des fichiers journaux.</b></li>
<li><b>Dans la liste déroulante Stratégie de rotation, sélectionnez une stratégie de rotation.</b><p>La seule stratégie de rotation disponible est le temps.</p></li>
<li><b>Dans le champ Intervalle de rotation, entrez le nombre de minutes entre
les rotations du journal d'accès. </b><p>Ce champ n'est valide que si la stratégie de rotation est time.
La valeur par défaut est de 1440 minutes (24 heures).</p><p>Assurez-vous que le suffixe de rotation contient suffisamment de valeurs pour créer
un suffixe unique pour chaque rotation de journal. Par exemple, si plus
d'une rotation par jour est appliquée au journal d'accès, ajoutez l'heure dans
le suffixe de rotation.</p><p>Le suffixe doit être unique pour s'assurer qu'une rotation est appliquée au
fichier du journal d'accès chaque fois que l'intervalle de rotation arrive à
son terme. Si le suffixe de rotation du nouveau fichier du journal
d'accès est le même que celui du fichier du journal d'accès existant,
aucune rotation n'est appliquée au fichier.</p></li>
<li><b>Dans le champ Suffixe de rotation, entrez la valeur de chaîne à
ajouter à la fin du nom du fichier journal après la rotation.</b><p>La valeur par défaut est <tt>yyyyMMdd-HH'h'mm'm'ss's'</tt>.</p></li>
<li><b>Dans le champ Format, entrez une valeur de chaîne pour spécifier les
propriétés ci-dessous du journal d'accès :</b>
<ul><li><p>Informations à consigner dans le journal d'accès</p></li>
<li><p>Ordre dans lequel les informations sont consignées</p></li></ul>
<p>La valeur par défaut est la suivante :</p><pre>%client.name% %auth-user-name% %datetime% %request% %status% %response.length%</pre><p>Les valeurs suivantes peuvent être incluses dans la chaîne de format :</p><dl><dt><tt>%client.name%</tt></dt>
<dd><p>Nom de l'hôte client</p></dd>
<dt><tt>%client.dns%</tt></dt>
<dd><p>Client DNS</p></dd>
<dt><tt>%datetime%</tt></dt>
<dd><p>Date du système</p></dd>
<dt><tt>%request%</tt></dt>
<dd><p>Ligne de requête HTTP complète</p></dd>
<dt><tt>%status%</tt></dt>
<dd><p>Statut</p></dd>
<dt><tt>%response.length%</tt></dt>
<dd><p>Longueur du contenu de la réponse</p></dd>
<dt><tt>%header.referer%</tt></dt>
<dd><p>En-tête de référent</p></dd>
<dt><tt>%header.user-agent%</tt></dt>
<dd><p>En-tête agent utilisateur</p></dd>
<dt><tt>%http-method%</tt></dt>
<dd><p>Méthode HTTP</p></dd>
<dt><tt>%http-uri%</tt></dt>
<dd><p>URI HTTP</p></dd>
<dt><tt>%query-str%</tt></dt>
<dd><p>Chaîne de requête HTTP</p></dd>
<dt><tt>%http-version%</tt></dt>
<dd><p>Version du protocole HTTP</p></dd>
<dt><tt>%header.accept%</tt></dt>
<dd><p>En-tête d'acceptation</p></dd>
<dt><tt>%header.date%</tt></dt>
<dd><p>En-tête de date</p></dd>
<dt><tt>%header.if-mod-since%</tt></dt>
<dd><p>En-tête Si modifié depuis</p></dd>
<dt><tt>%header.auth%</tt></dt>
<dd><p>En-tête d'autorisation</p></dd>
<dt><tt>%header.<i>any</i>%</tt></dt>
<dd><p>Toute valeur d'en-tête HTTP valide définie dans RFC 2616 (<tt>any</tt> est également une valeur d'en-tête valide ; elle est indiquée ici en tant que variable)</p></dd>
<dt><tt>%auth-user-name%</tt></dt>
<dd><p>Nom de l'utilisateur autorisé</p></dd>
<dt><tt>%cookie.value%</tt></dt>
<dd><p>Valeur d'un cookie</p></dd>
<dt><tt>%vs.id%</tt></dt>
<dd><p>ID serveur virtuel</p></dd>
</dl>
</li>
<li><b>Cliquez sur Enregistrer.</b></li></ol><h6>Voir aussi</h6>
<ul><li><p><a href="task-httpservice.html">Configurer le service HTTP</a></p></li>
<li><p><a href="task-requestprocessing.html">Configurer le traitement des requêtes de service HTTP</a></p></li>
<li><p><a href="task-keepalive.html">Configurer la connexion Keep-Alive du service HTTP</a></p></li>
<li><p><a href="task-connectionpool.html">Configurer le pool de connexions du service HTTP</a></p></li>
<li><p><a href="task-httpprotocol.html">Configurer le protocole HTTP</a></p></li>
<li><p><a href="task-httpfilecache.html">Configurer le cache de fichiers HTTP</a></p></li></ul>

<br/>

</body>
</html>

User Commands                       generate-diagnostic-report(1)

NAME
     generate-diagnostic-report - generates reports that can help
     diagnose application server malfunctioning

SYNOPSIS
     generate-diagnostic-report   --outputfilejar_file_name   [--
     terse=false]   [--echo=false]  [--interactive=true]  [--host
     localhost] [--port 4848] [--secure|-s]  [--user  admin_user]
     [--passwordfile  filename]  [--help] [--local=false] [--file
     filename] [--bugids bugids] [--logstartdate start-date]  [--
     logenddate end-date] [--targetdir local_dir_path] target

DESCRIPTION
     The generate-diagnostic-report  command  generates  an  HTML
     report  that  contains  pointers  or navigational links to a
     application server installation details such  as  configura-
     tion  details,  HADB  information,  logging details, process
     specific information, for an  application  server  instance.
     If  report generation is targeted for a domain, data is col-
     lected for all instances belonging  to  the  domain  and  is
     stored  on  DAS.  Such  data  may  help diagnose application
     server  malfunctioning  such  as   exceptions,   performance
     bottlenecks,  and  unexpected  results. This command is sup-
     ported in remote and local mode.  In local mode, reports can
     be  generated for a DAS, a server instance, or a node agent.
     In remote mode, this command can generate  reports  for  all
     the  targets  supported by the local mode and for the entire
     domain or a cluster.

OPTIONS
     --outputfile            Absolute path to the filename on the
                             client  machine.  The  filename must
                             end  with  a  .jar  extension.  This
                             option  is  mandatory  in  both  the
                             local and remote mode.

     -t --terse              Indicates that any output data  must
                             be  very concise, typically avoiding
                             human-friendly sentences and  favor-
                             ing well-formatted data for consump-
                             tion by a script. Default is false.

     -e --echo               Setting to true will echo  the  com-
                             mand  line statement on the standard
                             output. Default is false.

     -I --interactive        If set to true (default),  only  the
                             required    password   options   are
                             prompted.

     -H --host               The machine name  where  the  domain
                             administration  server  is  running.
                             The default value is localhost.

     -p --port               The HTTP/S port for  administration.
                             This is the port to which you should
                             point  your  browser  in  order   to
                             manage  the  domain.   For  example,
                             http://localhost:4848.

                             The default port number is 4848.

     -s --secure             If set to true, uses SSL/TLS to com-
                             municate with the domain administra-
                             tion server.

     -u --user               The authorized domain administration
                             server administrative username.

                             If  you  have  authenticated  to   a
                             domain  using the asadmin login com-
                             mand, then you need not specify  the
                             --user  option  on subsequent opera-
                             tions to this particular domain.

     --passwordfile          The --passwordfile option  specifies
                             the  name  of  a file containing the
                             password entries in a specific  for-
                             mat. The entry for the password must
                             have the AS_ADMIN_  prefix  followed
                             by  the  password  name in uppercase
                             letters.

                             For example, to specify  the  domain
                             administration  server password, use
                             an entry with the following  format:
                             AS_ADMIN_PASSWORD=password,    where
                             password is the actual administrator

                             password.  Other  passwords that can
                             be         specified         include
                             AS_ADMIN_MAPPEDPASSWORD,
                             AS_ADMIN_USERPASSWORD,           and
                             AS_ADMIN_ALIASPASSWORD.

                             All remote commands must specify the
                             admin  password  to  authenticate to
                             the  domain  administration  server,
                             either   through  --passwordfile  or
                             asadmin login, or  interactively  on
                             the   command  prompt.  The  asadmin
                             login command can be  used  only  to
                             specify   the  admin  password.  For
                             other passwords, that must be speci-
                             fied  for  remote  commands, use the
                             --passwordfile or enter them at  the
                             command prompt.

                             If  you  have  authenticated  to   a
                             domain  using the asadmin login com-
                             mand, then you need not specify  the
                             admin   password   through   the  --
                             passwordfile  option  on  subsequent
                             operations    to   this   particular
                             domain. However, this is  applicable
                             only  to  AS_ADMIN_PASSWORD  option.
                             You will still need to  provide  the
                             other    passwords,   for   example,
                             AS_ADMIN_USERPASSWORD, as  and  when
                             required   by  individual  commands,
                             such as update-file-user.

                             For  security   reasons,   passwords
                             specified as an environment variable
                             will not be read by asadmin.

                             The      default      value      for
                             AS_ADMIN_MASTERPASSWORD is changeit.

     --help                  Displays the help text for the  com-
                             mand.

     --file                  A text  file  describing  customer's
                             information  such  as customer name,
                             customer  point  of  contact,  error
                             description.  Contents  of this file
                             are  appended  to   the   diagnostic

                             report.

     --bugids                One or more IDs of known bugs  simi-
                             lar  to customer issue, separated by
                             comma.

     --logstartdate          Use the mm/dd/yy format  to  specify
                             the date from which server.log files
                             for server  instances  are  captured
                             (if log rotation is enabled). If the
                             date is  not  specified,  number  of
                             entries   from  server.log  file  as
                             specified    by    max-no-of-entries
                             matching min-log-level in diagnostic
                             service are collected.

     --logenddate            Date in mm/dd/yy format.  If  speci-
                             fied,  takes precedence over max-no-
                             of-entries  from  diagnostic-service
                             configuration.If  you  specify  a --
                             logenddate, you will need to specify
                             a --logstartdate also. If specified,
                             entries between  --logstartdate  and
                             --logenddate  matching min-log-level
                             are captured. If this option is  not
                             specified,   max-no-of-entries  from
                             diagnostic-service is used to  limit
                             the  server.log  content  being cap-
                             tured.

     --local                 If  set  to  true,   the   generate-
                             diagnostic-report  command  runs  in
                             local mode and  collects  a  limited
                             set of information. When the command
                             is run locally for  a  domain,  data
                             for  the  default  server  instance,
                             that is, the DAS for the domain,  is
                             collected.  In local mode, this com-
                             mand can generate report for a  DAS,
                             a server instance, or a node agent.

     --targetdir             This option is required only if  the
                             command  is  run locally.  If target
                             is a  domain  name,  this  value  is
                             parent  directory of the domain upon
                             which the command will operate. This
                             is a mandatory field in local mode.

OPERANDS
     target:                 allowed values are domain,  cluster,
                             nodeagent and instance.

     domain:                 generates report for  all  clustered
                             and  non  clustered instances admin-
                             istered  by   the   DAS,   including
                             default admin server instance.  This
                             command when executed locally,  col-
                             lects information for default server
                             instance only.

     cluster:                generates report  for  every  server
                             instance in the cluster.

     nodeagent:              generates report  for  a  particular
                             physical    node;   that   is,   for
                             instances belonging to the node.

     instance:               generates report  for  a  particular
                             server instance.

EXAMPLES
     Example  1:  Using  the  generate-diagnostic-report  command
     (remote mode)

     asadmin> generate-diagnostic-report
      --user admin --port 4848 --outputfile /export/software/sjsas/diagnostic-reports/domain1.jar domain1

     Please enter the admin password>
     Following attributes from domain.xml are masked with **** in the generated report.
     domain/configs/config=server-config/jms-service/jms-host=default_JMS_host/admin-password="admin"
     If you want to mask additional properties, use create-password-alias and set com

     mand before continuing the report generation.
     Press 'y' to continue or 'n' to exit : y
     Command generate-diagnostic-report executed successfully.

     Example  2:  Using  the  generate-diagnostic-report  command
     (local mode)

     asadmin> asadmin generate-diagnostic-report --user admin --local=true --outputfile /export/software/sjsas/diagnostic-reports/domain1.jar --targetdir /export/software/sjsas/domains domain1

     Following attributes from domain.xml are masked with **** in the generated repor
     t.domain/configs/config=server-config/jms-service/jms-host=default_JMS_host/admin-
     password="admin"
     If you want to mask additional properties, use create-password-alias and set com
     mand before continuing the report generation.
     Press 'y' to continue or 'n' to exit : y
     Report File : /export/software/sjsas/diagnostic-reports/domain1.jar
     Command generate-diagnostic-report executed successfully.

EXIT STATUS
     0                       command executed successfully

     1                       error in executing the command

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html><!-- GenHTML@12751-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<!-- ident	"%Z%%M%	%I%	%E% SMI" -->

    <title>2.&nbsp;&nbsp;Java EE 5 Compatibility Issues
    </title>
</head>
<body>
<font style="color: red; font-family:arial,helvetica,sans-serif; font-size:12pt; font-weight:bold}">Not For Publication</font>&nbsp;&nbsp;&nbsp;<br>Glassfish Review Draft<br> </td>

<A href="toc.html">Sun Java System Application Server Platform Edition 9.0 Upgrade and Migration
Guide</A>&nbsp;<br>
<A HREF="abmaq.html">Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="abmbq.html">Next</A><br>
            <!--startindex--><A NAME="abmbj"></A><b>Chapter&nbsp;2</b><h1>Java EE 5 Compatibility Issues</h1>
<p>The following topics are covered in this chapter:</p>
<ul><li><p><A HREF="abmbj.html#abmbk">Binary Compatibility</A></p>
</li>
<li><p><A HREF="abmbj.html#abmbl">Source Compatibility</A></p>
</li>
<li><p><A HREF="abmbj.html#abmbm">Incompatibilities in the Java EE 5 Platform (since the J2EE 1.4 release)</A></p>
</li>
<li><p><A HREF="abmbj.html#abmbn">JAXP and SAX Incompatibilities</A></p>
</li>
<li><p><A HREF="abmbj.html#abmbo">Application Server 9 Options Incompatible with J2EE 1.4 Specification Requirements</A></p>
</li>
<li><p><A HREF="abmbj.html#abmbp">Application Server 9 Options Contrary to J2EE 1.4 Specification Recommendations</A></p>
</li>
</ul>
<A NAME="abmbk"></A><h2>Binary Compatibility</h2>
<p>In this Application Server 9 release, the included Java SDK is The Java Platform,
Enterprise Edition (J2EE&#153; platform), version 5 SDK (Java EE 5). This version
of the Java EE is upwards binary-compatible with J2EE SDK, v1.3, 1.4, and 1.5, except
for the incompatibilities listed below. This means that, except for the noted incompatibilities,
applications built for version 1.4 run correctly in the Sun Java System Application Server 9 release. </p>
<A NAME="abmbl"></A><h2>Source Compatibility</h2>
<p>Downward source compatibility<A NAME="indexterm-1"></A> is not supported. If source files use new J2EE APIs, they are not usable
with an earlier version of the J2EE platform.</p>
<p>In general, the policy is as follows:</p>
<ul><li><p>Maintenance releases do not introduce any new APIs, so they maintain
source-compatibility with one another.</p>
<p><A HREF="http://java.sun.com/j2se/1.4.2/compatibility.html">http://java.sun.com/j2se/1.5/compatibility.html</A></p>
</li>
<li><p>Functionality releases and major releases maintain upwards but not
downwards source-compatibility.</p>
</li>
</ul>
<p>Deprecated APIs<A NAME="indexterm-2"></A> are methods and classes that are supported only for backward compatibility,
and the compiler generates a warning message whenever one of these is used, unless
the <tt>-nowarn</tt> command-line option is used. It is recommended that
programs be modified to eliminate the use of deprecated methods and classes, though
there are no current plans to remove such methods and classes entirely from the system.</p>
<A NAME="abmbm"></A><h2>Incompatibilities in the Java EE 5 Platform (since the J2EE
1.4 release)</h2>
<p>The Sun Java System Application Server 9 release is based on Java EE 5, Application Server 8 is based
on J2EE 1.4, and Application Server 7 release is based on the J2EE 1.3.</p>
<p>Almost all existing programs should run on the Sun Java System Application Server 9 release without
modification. However, there are some minor potential incompatibilities that involve
rare circumstances and corner cases that we are documenting here for completeness.</p>
<ul><li><p>The <tt>java.net.Proxy</tt> class was added in 5.0, making
two classes named Proxy -- <tt>java.lang.reflect.Proxy</tt> and <tt>java.net.Proxy</tt>. The introduction of<tt> java.net.Proxy</tt> will
cause a source-level incompatibility in existing code if a compilation unit has the
following type-import-on-demand declarations: </p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>import java.lang.reflect.*;
import java.net.*;</pre>
</td></table><br></li>
<li><p>Java Servlet Specification Version 2.5 ships with the Sun Java System Application Server 9 release,
and can be downloaded from the following URL:</p>
<p><A HREF="http://java.sun.com/products/servlet/">http://java.sun.com/products/servlet/</A></p>
</li>
</ul>
<A NAME="abmbn"></A><h2>JAXP and SAX Incompatibilities</h2>
<p>Sun Java System Application Server 9 supports JAXP 1.3, which in turn supports SAX 2.0.2. In SAX
2.0.2, <tt>DeclHandler.externalEntityDecl</tt> requires the parser to return
the absolute system identifier for consistency with <tt>DTDHandler.unparsedEntityDecl</tt>. This might cause some incompatibilities when migrating applications that
use SAX 2.0.0.</p>
<p>To migrate an application that uses SAX 2.0.0 to SAX 2.0.2 without changing
the previous behavior of <tt>externalEntityDecl</tt>, you can set the resolve-dtd-uris
feature to false. For example:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>SAXParserFactory spf = SAXParserFactory.newInstance();
spf.setFeature("http://xml.org/sax/features/resolve-dtd-uris",false);</pre>
</td></table><br><p>Other incompatibilities between SAX 2.0.0 and SAX 2.0.2 are documented in the <A HREF="http://java.sun.com/j2se/1.5.0/docs/guide/xml/jaxp/JAXP-Compatibility_150.html#SAX">JAXP Compatibility Guide</A>.</p>
<A NAME="abmbo"></A><h2>Application Server 9 Options Incompatible with J2EE 1.4 Specification
Requirements</h2>
<p>All portable Java EE programs run on the Application Server 9 without
modification. However, as allowed by the J2EE compatibility requirements, it is possible
to configure applications to use features of the Sun Java System Application Server 9 that are not compatible
with the J2EE specification.</p>
<p>The pass-by-reference<A NAME="indexterm-3"></A> element in the <tt>sun-ejb-jar.xml</tt> file only applies
to remote calls. As defined in the EJB 3.0 specification calls to local interfaces
use pass-by-reference semantics.</p>
<p>If the pass-by-reference element is set to its default value of false, the parameter
passing semantics for calls to remote interfaces comply with the EJB 3.0 specification,
section 5.4. If set to true, remote calls involve pass-by-reference semantics instead
of pass-by-value semantics, contrary to this specification.</p>
<p>Portable programs cannot assume that a copy of the object is made during such
a call, and thus that it is safe to modify the original. Nor can they assume that
a copy is not made, and thus that changes to the object are visible to both caller
and callee. When this flag is set to true, parameters and return values are considered
read-only. The behavior of a program that modifies such parameters or return values
is undefined. For more information about the pass-by-reference element, see the <A HREF="http://docs.sun.com/app/docs/doc/819-3659"><i>Sun Java System Application Server Platform Edition 9.0 Developer's Guide</i></A>.</p>
<A NAME="abmbp"></A><h2>Application Server 9 Options Contrary to J2EE 1.4 Specification
Recommendations</h2>
<p>If the <tt>delegate</tt> attribute in the class-loader element of
the <tt>sun-web.xml</tt> file is set to its default value of true, classes
and resources residing in container-wide library JAR files are loaded in preference
to classes and resources packaged within the WAR file, contrary to what is recommended
in the Servlet 2.5 specification. If set to false, the classloader delegation behavior
complies with what is recommended in the Servlet 2.5 specification.</p>
<p>Do not package portable programs that use the delegate attribute with the value
of true with any classes or interfaces that are a part of the J2EE specification.
The behavior of a program that includes such classes or interfaces in its WAR file
is undefined. For more information about the class-loader element, see the <A HREF="http://docs.sun.com/app/docs/doc/819-3659"><i>Sun Java System Application Server Platform Edition 9.0 Developer's Guide</i></A>.</p>

            <!--stopindex-->
<br>
<A HREF="abmaq.html">Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="abmbq.html">Next</A>
</body>
</html>

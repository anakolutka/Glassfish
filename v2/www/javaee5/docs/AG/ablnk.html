<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html><!-- GenHTML@12751-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<!-- ident	"%Z%%M%	%I%	%E% SMI" -->

    <title>9.&nbsp;&nbsp;Configuring Security
    </title>
</head>
<body>
<font style="color: red; font-family:arial,helvetica,sans-serif; font-size:12pt; font-weight:bold}">Not For Publication</font>&nbsp;&nbsp;&nbsp;<br>Glassfish Review Draft<br> </td>

<A href="toc.html">Sun Java System Application Server Platform Edition 9 Administration Guide</A>&nbsp;<br>
<A HREF="ablms.html">Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="ablrk.html">Next</A><br>
            <!--startindex--><A NAME="ablnk"></A><b>Chapter&nbsp;9</b><h1>Configuring Security</h1>
<p>This chapter describes some core application server security concepts, and describes
how to configure security for the Application Server. This chapter contains the following
topics:</p>
<ul><li><p><A HREF="ablnk.html#ablnl">About Application Server Security</A></p>
</li>
<li><p><A HREF="ablnk.html#abloz">Admin Console Tasks for Security</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpc">Admin Console Tasks for Realms</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpv">Admin Console Tasks for JACC Providers</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqa">Admin Console Tasks for Audit Modules</A></p>
</li>
<li><p><A HREF="ablnk.html#abloz">Admin Console Tasks for Security</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqi">Admin Console Tasks for Listeners and JMX Connectors</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqq">Admin Console Tasks for Connector Connection Pools</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqw">Working with Certificates and SSL</A></p>
</li>
<li><p><A HREF="ablnk.html#ablrj">Further Information</A></p>
</li>
</ul>
<A NAME="ablnl"></A><h2>About Application Server Security</h2>
<ul><li><p><A HREF="ablnk.html#ablnm">Overview of Security</A></p>
</li>
<li><p><A HREF="ablnk.html#ablnx">About Authentication and Authorization</A></p>
</li>
<li><p><A HREF="ablnk.html#abloe">Understanding Users, Groups, Roles, and Realms</A></p>
</li>
<li><p><A HREF="ablnk.html#abloj">Introduction to Certificates and SSL</A></p>
</li>
<li><p><A HREF="ablnk.html#ablop">About Firewalls</A></p>
</li>
<li><p><A HREF="ablnk.html#abloq">Managing Security With the Admin Console</A></p>
</li>
</ul>
<A NAME="ablnm"></A><h3>Overview of Security</h3>
<p>Security is about protecting data: how to prevent unauthorized access or damage
to it in storage or transit. The Application Server has a dynamic, extensible security
architecture based on the J2EE standard. Built in security features include cryptography,
authentication and authorization, and public key infrastructure. The Application Server is
built on the Java security model, which uses a sandbox where applications can run
safely, without potential risk to systems or users. The following topics are discussed:</p>
<ul><li><p><A HREF="ablnk.html#ablnn">Understanding Application and System Security</A></p>
</li>
<li><p><A HREF="ablnk.html#ablno">Tools for Managing Security</A></p>
</li>
<li><p><A HREF="ablnk.html#ablnp">Managing Security of Passwords</A></p>
</li>
<li><p><A HREF="ablnk.html#ablnt">Assigning Security Responsibilities</A></p>
</li>
</ul>
<A NAME="ablnn"></A><h4>Understanding Application and System Security</h4>
<p>Broadly, there are two kinds of application security:</p>
<ul><li><p>In <i>programmatic security</i>, application code written
by the developer handles security chores. As an administrator, you don't have
any control over this mechanism. Generally, programmatic security is discouraged since
it hard-codes security configurations in the application instead of managing it through
the J2EE containers.</p>
</li>
<li><p>In <i>declarative security</i>, the container (the Application Server)
handles security through an application's deployment descriptors. You can control
declarative security by editing deployment descriptors directly or with a tool such
as <tt>deploytool</tt>. Because deployment descriptors can change after
an application is developed, declarative security allows for more flexibility.</p>
</li>
</ul>
<p>In addition to application security, there is also <i>system security</i>, which affects all the applications on an Application Server system.</p>
<p>Programmatic security is controlled by the application developer, so this document
does not discuss it; declarative security is somewhat less so, and this document touches
on it occasionally. This document is intended primarily for system administrators,
and so focuses on system security.</p>
<A NAME="ablno"></A><h4>Tools for Managing Security</h4>
<p>The Application Server provides the following tools for managing security:</p>
<ul><li><p>Admin Console, a browser-based tool used to configure security for
the entire server, to manage users, groups, and realms, and to perform other system-wide
security tasks. For a general introduction to the Admin Console, see <A HREF="ablaq.html#ablav">Tools for Administration</A>. For an overview of the security tasks you can perform
with the Admin Console, see <A HREF="ablnk.html#abloq">Managing Security With the Admin Console</A>.</p>
</li>
<li><p><tt>asadmin</tt>, a command-line tool that performs many
of the same tasks as the Admin Console. You may be able to do some things with <tt>asadmin</tt> that you cannot do with Admin Console. You perform <tt>asadmin</tt> commands from either a command prompt or through a script, to automate
repetitive tasks. For a general introduction to <tt>asadmin</tt>, see <A HREF="ablaq.html#ablav">Tools for Administration</A>.</p>
</li>
</ul>
<p>The Java Enterprise Edition 5 platform (Java EE 5), provides two tools for managing
security:</p>
<ul><li><p><tt>keytool</tt>, a command-line utility for managing digital
certificates and key pairs. Use <tt>keytool</tt> to manage users in the <tt>certificate</tt> realm.</p>
</li>
<li><p><tt>policytool</tt>, a graphical utility for managing system-wide
Java security policies. As an administrator, you will rarely need to use <tt>policytool</tt>.</p>
</li>
</ul>
<p>For more information on using <tt>keytool</tt>, <tt>policytool</tt>, and other Java security tools, see<i> Java 2 SDK Tools and Utilities</i> at <A HREF="http://java.sun.com/j2se/1.5.0/docs/tooldocs/index.html#security">http://java.sun.com/j2se/1.5.0/docs/tooldocs/index.html#security</A>.</p>
<A NAME="ablnp"></A><h4>Managing Security of Passwords</h4>
<p>In this release of the Application Server, the file <tt>domain.xml</tt>,
which contains the specifications for a particular domain, initially contains the
password of the Sun Java System Message Queue broker in clear text. The element in
the <tt>domain.xml</tt> file that contains this password is the <tt>admin-password</tt> attribute of the <tt>jms-host</tt> element. Because
this password is not changeable at installation time, it is not a significant security
impact.</p>
<p>However, use the Admin Console to add users and resources and assign passwords
to these users and resources. Some of these passwords are written to the <tt>domain.xml</tt> file in clear text, for example, passwords for accessing a database.
Having these passwords in clear text in the <tt>domain.xml</tt> file can
present a security hazard. You can encrypt any password in <tt>domain.xml</tt>,
including the <tt>admin-password</tt> attribute or a database password using
the following procedure.</p>
<A NAME="fxjih"></A><p><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To encrypt a password in domain.xml</p>
<h5>Steps</h5><ol><li><p><b>From the directory where the <tt>domain.xml</tt> file resides
(<i>domain-dir</i><tt>/config</tt> by default), run the following <tt>asadmin</tt> command:</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre>asadmin create-password-alias --user admin <i>alias-name</i></pre>
</td></table><br><p>For example,</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>asadmin create-password-alias --user admin jms-password</pre>
</td></table><br><p>A password prompt appears (<tt>admin</tt> in this case). Refer to
the man pages for the <tt>create-password-alias</tt>, <tt>list-password-aliases</tt>, <tt>delete-password-alias</tt> commands for more information.</p>
</li>
<li><p><b>Remove and replace the password in <tt>domain.xml</tt>. This
is accomplished by using the <tt>asadmin set</tt> command. The following
example shows the use of the <tt>set</tt> command for changing the password:</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre>asadmin set --user admin server.jms-service.jms-host.
default_JMS_host.admin-password=${ALIAS=jms-password}</pre>
</td></table><br></li>
<li><p><b>Restart the Application Server for the relevant domain.</b></p></li>
</ol><A NAME="ablnq"></A><h5>Protecting files with encoded passwords</h5>
<p>Some files contain encoded passwords that need protecting using file system
permissions. These files include the following:</p>
<ul><li><p><i>domain-dir</i><tt>/master-password</tt></p>
<p>This file
contains the encoded master password and should be protected with file system permission,
600.</p>
</li>
<li><p>Any password file created to pass as an argument using the <tt>--passwordfile</tt> argument to <tt>asadmin</tt> should be protected
with file system permission, 600.</p>
</li>
</ul>
<A NAME="ablnr"></A><p><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To change the master password</p>
<p>The master password (MP) is an overall shared password. It is never used for
authentication and is never transmitted over the network. This password is the choke
point for overall security; the user can choose to enter it manually when required,
or obscure it in a file. It is the most sensitive piece of data in the system. The
user can force prompting for the MP by removing this file. When the master password
is changed, it is saved again in the master-password keystore.</p>
<h5>Steps</h5><ol><li><p><b>Stop the Application Server for the domain. Use the <tt>asadmin change-master-password</tt> command, which prompts for the old and new passwords, then re-encrypts
all dependent items. For example,</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre>asadmin change-master-password>
Please enter the master password>
Please enter the new master password>
Please enter the the new master password again></pre>
</td></table><br></li>
<li><p><b>Restart the Application Server.</b></p><hr size="1" noshade><p><IMG ALT="Caution" src="graphics/caution.gif">  <b>Caution - </b>At this point, server instances that are running must not be started
and running server instances must not be restarted until the SMP on their corresponding
node agent has been changed. If a server instance is restarted before changing its
SMP, it will fail to come up.</p><hr size="1" noshade></li>
<li><p><b>Stop each node agent and its related servers one at a time. Run the <tt>asadmin change-master-password</tt> command again, and then restart the node
agent and its related servers.</b></p></li>
<li><p><b>Continue with the next node agent until all node agents have been addressed.
In this way, a rolling change is accomplished.</b></p></li>
</ol><A NAME="ablns"></A><p><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To change the admin password</p>
<p>Encrypting the admin password was discussed in <A HREF="ablnk.html#ablnp">Managing Security of Passwords</A>. Encrypting the admin password is strongly encouraged.
If you want to change the admin password before encrypting it, use the <tt>asadmin
set</tt> command. The following example shows the use of <tt>set</tt> command
for changing the password:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>asadmin set --user admin 
server.jms-service.jms-host.default_JMS_host.admin-password=<i>new_pwd</i></pre>
</td></table><br><p>It is also possible to change the admin password using the Admin Console as
in the following procedure.</p>
<h5>Steps</h5><ol><li><p><b>In the Admin Console tree component, expand the Configuration node.</b></p></li>
<li><p><b>Expand the Security node.</b></p></li>
<li><p><b>Expand the Realms node.</b></p></li>
<li><p><b>Select the <tt>admin-realm</tt> node.</b></p></li>
<li><p><b>Click the Manage Users button from the Edit Realm page.</b></p></li>
<li><p><b>Select the user named <tt>admin</tt>.</b></p></li>
<li><p><b>Enter the new password and confirm the password.</b></p></li>
<li><p><b>Click Save to save or click Close to close without saving.</b></p></li>
</ol><A NAME="ablnt"></A><h4>Assigning Security Responsibilities</h4>
<p>Security responsibilities are assigned to the following:</p>
<ul><li><p><A HREF="ablnk.html#ablnu">Application Developer</A></p>
</li>
<li><p><A HREF="ablnk.html#ablnv">Application Deployer</A></p>
</li>
<li><p><A HREF="ablnk.html#ablnw">System Administrator</A></p>
</li>
</ul>
<A NAME="ablnu"></A><h5>Application Developer</h5>
<p>The application developer is responsible for the following:</p>
<ul><li><p>Specifying roles and role-based access restrictions for application
components.</p>
</li>
<li><p>Defining an application's authentication method and specifying
the parts of the application that are secured.</p>
</li>
</ul>
<p>An application developer can use tools such as <tt>NetBeans</tt> to
edit application deployment descriptors. These security tasks are discussed in more
detail in the <i> Security</i> chapter of<i> The Java EE 5
Tutorial</i>, which can be viewed at <A HREF="http://docs.sun.com/app/docs/doc/819-3655"><i>Sun Java System Application Server Platform Edition 9.0 Java EE Tutorial</i></A>.</p>
<A NAME="ablnv"></A><h5>Application Deployer</h5>
<p>The application deployer is responsible for:</p>
<ul><li><p>Mapping users or groups (or both) to security roles.</p>
</li>
<li><p>Refining the privileges required to access component methods to suit
the requirements of the specific deployment scenario.</p>
</li>
</ul>
<A NAME="ablnw"></A><h5>System Administrator</h5>
<p>The system administrator is responsible for:</p>
<ul><li><p>Configuring security realms.</p>
</li>
<li><p>Managing user accounts and groups.</p>
</li>
<li><p>Managing audit logs.</p>
</li>
<li><p><b>Managing server certificates and configuring
the server's use of secure sockets layer (SSL).</b></p>
</li>
<li><p>Handling other miscellaneous system-wide security features, such as <b>security maps for connector connection pools</b>, additional
JACC Providers, and so on.</p>
</li>
</ul>
<p>A system administrator uses the Admin Console to manage server security settings
and <tt>keytool</tt> to
manage certificates. This document is intended primarily for system administrators.</p>
<A NAME="ablnx"></A><h3>About Authentication and Authorization</h3>
<p>Authentication and authorization are central concepts of application server
security. The following topics are discussed related to authentication and authorization:</p>
<ul><li><p><A HREF="ablnk.html#ablny">Authenticating Entities</A></p>
</li>
<li><p><A HREF="ablnk.html#abloa">Authorizing Users</A></p>
</li>
<li><p><A HREF="ablnk.html#ablob">Specifying JACC Providers</A></p>
</li>
<li><p><A HREF="ablnk.html#abloc">Auditing Authentication and Authorization Decisions</A></p>
</li>
<li><p><A HREF="ablnk.html#ablod">Configuring Message Security</A></p>
</li>
</ul>
<A NAME="ablny"></A><h4>Authenticating Entities</h4>
<p><i>Authentication</i> is the way an entity (a user, an application,
or a component) determines that another entity is who it claims to be. An entity uses <i>security credentials</i> to authenticate itself. The credentials may be a user
name and password or a digital certificate.</p>
<p>Typically, authentication means a user logging in to an application with a user
name and password; but it might also refer to an EJB providing security credentials
when it requests a resource from the server. Usually, servers or applications require
clients to authenticate; additionally, clients can require servers to authenticate
themselves, too. When authentication is bidirectional, it is called mutual authentication.</p>
<p>When an entity tries to access a protected resource, the Application Server uses
the authentication mechanism configured for that resource to determine whether to
grant access. For example, a user can enter a user name and password in a Web browser,
and if the application verifies those credentials, the user is authenticated. The
user is associated with this authenticated security identity for the remainder of
the session.</p>
<p>The Application Server supports four types of authentication, as outlined in <A HREF="ablnk.html#ablny">Authenticating Entities</A>. An application specifies the type
of authentication it uses within its deployment descriptors. For more information
on using <tt>NetBeans</tt> to configure the authentication method for an
application, see <i> Security</i> chapter of<i> The Java EE
5 Tutorial</i>, which can be viewed at <A HREF="http://docs.sun.com/app/docs/doc/819-3655"><i>Sun Java System Application Server Platform Edition 9.0 Java EE Tutorial</i></A>.</p>
<p><b>Table 9-1 </b>Application Server Authentication Methods</p>

<table cellspacing="5" border="1">
<tr><td><p>Authentication Method                            </p></td><td><p>Communication Protocol                            </p></td><td><p>Description                            </p></td><td><p>User Credential Encryption                            </p></td></tr>
<tr><td><p>Basic</p></td><td><p>HTTP (SSL optional)</p></td><td><p>Uses the server's built-in pop-up login dialog box.</p></td><td><p>None, unless using SSL.</p></td></tr>
<tr><td><p>Form-based</p></td><td><p>HTTP (SSL optional)</p></td><td><p>Application provides its own custom login and error pages.</p></td><td><p>None, unless using SSL.</p></td></tr>
<tr><td><p>Client Certificate</p></td><td><p>HTTPS (HTTP over SSL)</p></td><td><p>Server authenticates the client using a public key certificate.</p></td><td><p>SSL</p></td></tr>
</table><A NAME="ablnz"></A><h5>Verifying Single Sign-On</h5>
<p>Single sign-on enables multiple applications in one virtual server instance
to share user authentication state. With single sign-on, a user who logs in to one
application becomes implicitly logged in to other applications that require the same
authentication information.</p>
<p>Single sign-on is based on groups. All Web applications whose deployment descriptor
defines the same <i>group</i> and use the same authentication method
(basic, form, digest, certificate) share single sign-on.</p>
<p>Single sign-on is enabled by default for virtual servers defined for the Application Server.
For information on disabling single sign-on, see <A HREF="ablnk.html#ablqp">To configure single sign-on (SSO)</A>.</p>
<A NAME="abloa"></A><h4>Authorizing Users</h4>
<p>Once a user is authenticated, the level of <i>authorization</i> determines
what operations can be performed. A user's authorization is based on his <i>role</i>. For example, a human resources application may authorize managers
to view personal employee information for all employees, but allow employees to view
only their own personal information. For more on roles, see <A HREF="ablnk.html#abloe">Understanding Users, Groups, Roles, and Realms</A>.</p>
<A NAME="ablob"></A><h4>Specifying JACC Providers</h4>
<p>JACC (Java Authorization Contract for Containers) is part of the Java EE 5 specification
that defines an interface for pluggable authorization providers. This enables the
administrator to set up third-party plug-in modules to perform authorization.</p>
<p>By default, the Application Server provides a simple, file-based authorization engine
that complies with the JACC specification. It is also possible to specify additional
third-party JACC providers.</p>
<p>JACC providers use the Java Authentication and Authorization Service (JAAS)
APIs. JAAS enables services to authenticate and enforce access controls upon users.
It implements a Java technology version of the standard Pluggable Authentication Module
(PAM) framework.</p>
<A NAME="abloc"></A><h4>Auditing Authentication and Authorization Decisions</h4>
<p>The Application Server can provide an audit trail of all authentication and authorization
decisions through <i>audit modules</i>. The Application Server provides a
default audit module, as well as the ability to customize the audit modules. For information
on developing custom audit modules, see the Application Server <i>Developer's Guide</i>.</p>
<A NAME="ablod"></A><h4>Configuring Message Security</h4>
<p><i>Message Security</i> enables a server to perform end-to-end
authentication of web service invocations and responses at the message layer. The Application Server implements
message security using message security providers on the SOAP layer. The message security
providers provide information such as the type of authentication that is required
for the request and response messages. The types of authentication that are supported
include the following:</p>
<ul><li><p>Sender authentication, including username-password authentication.</p>
</li>
<li><p>Content authentication, including XML Digital Signatures.</p>
</li>
</ul>
<p>Two message security providers are included with this release. The message security
providers can be configured for authentication for the SOAP layer. The providers that
can be configured include <tt>ClientProvider</tt> and <tt>ServerProvider</tt>.</p>
<p>Support for message layer security is integrated into the Application Server and
its client containers in the form of (pluggable) authentication modules. By default,
message layer security is disabled on the Application Server.</p>
<p>Message level security can be configured for the entire Application Server or for
specific applications or methods. Configuring message security at the Application Server level
is discussed in  <A HREF="ablnk.html#ablnm">Overview of Security</A><A HREF="ablrk.html#ablrk">Chapter&nbsp;10, Configuring Message Security</A>. Configuring
message security at the application level is discussed in the <i>Developer's
Guide</i> chapter titled Securing Applications.</p>
<p>See Also:</p>
<ul><li><p><A HREF="ablrk.html#ablsb">Configuring the Application Server for Message Security</A></p>
</li>
<li><p><A HREF="ablrk.html#ablry">Securing a Web Service</A></p>
</li>
<li><p><A HREF="ablrk.html#ablse">To enable providers for message security</A></p>
</li>
<li><p><A HREF="ablrk.html#ablsf">To configure a message security provider</A></p>
</li>
<li><p><A HREF="ablrk.html#ablsg">Creating a Message Security Provider</A></p>
</li>
<li><p><A HREF="ablrk.html#ablsi">To delete a message security configuration</A></p>
</li>
<li><p><A HREF="ablrk.html#ablsj">To delete a message security provider</A></p>
</li>
<li><p><A HREF="ablrk.html#ablsk">To enable message security for application clients</A></p>
</li>
</ul>
<A NAME="abloe"></A><h3>Understanding Users, Groups, Roles, and Realms</h3>
<p>The Application Server enforces its authentication and authorization policies upon
the following entities:</p>
<ul><li><p><A HREF="ablnk.html#ablof">Users</A>: An individual identity <i>defined in the Application Server</i>. In general, a user is a person, a software
component such as an enterprise bean, or even a service. A user who has been authenticated
is sometimes called a <i>principal</i>. Users are sometimes referred
to as <i>subjects</i>.</p>
</li>
<li><p><A HREF="ablnk.html#ablog">Groups</A>: A set of users <i>defined in the Application Server</i>, classified by common traits.</p>
</li>
<li><p><A HREF="ablnk.html#abloh">Roles</A>: A named authorization level <i>defined by an application</i>. A role can be compared to a key that opens a
lock. Many people might have a copy of the key. The lock doesn't care who seeks access,
only that the right key is used.</p>
</li>
<li><p><A HREF="ablnk.html#abloi">Realms</A>: A repository containing user
and group information and their associated security credentials. A realm is also called
a <i>security policy domain</i>.</p>
</li>
</ul>
<p><hr size="1" noshade><p><b>Note - </b>Users and groups are designated for the
entire Application Server, whereas each application defines its own roles. When the application
is being packaged and deployed, the application specifies mappings between users/groups
and roles, as illustrated in the following figure.</p>
<hr size="1" noshade></p><A NAME="fxjfw"></A><p><b>Figure 9-1 </b>Role Mapping</p>
<IMG src="figures/security-roleMapping.gif" class="figure"  alt="Figure shows how users are assigned to groups, how users and
groups are assigned to roles, and how applications use groups and roles." title="Figure shows how users are assigned to groups, how users and
groups are assigned to roles, and how applications use groups and roles."><A NAME="ablof"></A><h4>Users</h4>
<p>A <i>user</i> is an individual (or application program) identity
that has been defined in the Application Server. A user can be associated with a group.
The Application Server authentication service can govern users in multiple realms.</p>
<A NAME="ablog"></A><h4>Groups</h4>
<p>A <i>J2EE group</i> (or simply group) is a category of users classified
by common traits, such as job title or customer profile. For example, users of an
e-commerce application might belong to the <tt>customer</tt> group, but
large customers would belong to the <tt>preferred</tt> group. Categorizing
users into groups makes it easier to control the access of large numbers of users.</p>
<A NAME="abloh"></A><h4>Roles</h4>
<p>A <i>role</i> defines which applications and what parts of each
application users can access and what they can do. In other words, roles determine
users' authorization levels.</p>
<p>For example, in a personnel application all employees might have access to phone
numbers and email addresses, but only managers would have access to salary information.
The application might define at least two roles: <tt>employee</tt> and <tt>manager</tt>; only users in the <tt>manager</tt> role are allowed to
view salary information.</p>
<p>A role is different from a user group in that a role defines a function in an
application, while a group is a set of users who are related in some way. For example,
in the personnel application there might be groups such as <tt>full-time</tt>, <tt>part-time</tt>, and <tt>on-leave</tt>, but users in all these groups
would still be in the <tt>employee</tt> role.</p>
<p>Roles are defined in application deployment descriptors. In contrast, groups
are defined for an entire server and realm. The application developer or deployer
maps roles to one or more groups for each application in its deployment descriptor.</p>
<A NAME="abloi"></A><h4>Realms</h4>
<p>A <i>realm</i>, also called a <i>security policy domain</i> or <i>security domain</i>, is a scope over which the server
defines and enforces a common security policy. In practical terms, a realm is a repository
where the server stores user and group information.</p>
<p>The Application Server comes preconfigured with three realms: <tt>file</tt> (the
initial default realm), <tt>certificate</tt>, and <tt>admin-realm</tt>.
It is possible to also set up <tt>ldap</tt>, <tt>solaris</tt>,
or custom realms. Applications can specify the realm to use in their deployment descriptor.
If they do not specify a realm, the Application Server uses its default realm.</p>
<p>In the <tt>file</tt> realm, the server stores user credentials locally
in a file named <tt>keyfile</tt>. You can use the Admin Console to manage
users in the <tt>file</tt> realm. For more information, see <A HREF="ablnk.html#ablpl">Managing file Realm Users</A>.</p>
<p>In the <tt>certificate</tt> realm, the server stores user credentials
in a certificate database. When using the <tt>certificate</tt> realm, the
server uses certificates with the HTTPS protocol to authenticate Web clients. For
more information about certificates, see <A HREF="ablnk.html#abloj">Introduction to Certificates and SSL</A>.</p>
<p>The <tt>admin-realm</tt> is also a <tt>FileRealm</tt> and
stores administrator user credentials locally in a file named <tt>admin-keyfile</tt>. Use the Admin Console to manage users in this realm in the same way you
manage users in the <tt>file</tt> realm. For more information, see <A HREF="ablnk.html#ablpl">Managing file Realm Users</A>.</p>
<p>In the <tt>ldap</tt> realm the server gets user credentials from a
Lightweight Directory Access Protocol (LDAP) server such as the Sun Java System Directory
Server. LDAP is a protocol for enabling a user to locate organizations, individuals,
and other resources such as files and devices in a network, whether on the public
Internet or on a corporate intranet. Consult your LDAP server documentation for information
on managing users and groups in the <tt>ldap</tt> realm.</p>
<p>In the <tt>solaris</tt> realm the server gets user credentials from
the Solaris operating system. This realm is supported on the Solaris 9 OS and later.
Consult your Solaris documentation for information on managing users and groups in
the <tt>solaris</tt> realm.</p>
<p>A custom realm is any other repository of user credentials, such as a relational
database or third-party component. For more information, see <A HREF="ablnk.html#ablph">Creating a Custom Realm</A>.</p>
<A NAME="abloj"></A><h3>Introduction to Certificates and SSL</h3>
<p>The following topics are discussed in this section:</p>
<ul><li><p><A HREF="ablnk.html#ablok">About Digital Certificates</A></p>
</li>
<li><p><A HREF="ablnk.html#ablom">About Secure Sockets Layer</A></p>
</li>
</ul>
<A NAME="ablok"></A><h4>About Digital Certificates</h4>
<p><i>Digital certificates</i> (or simply certificates) are electronic
files that uniquely identify people and resources on the Internet. Certificates also
enable secure, confidential communication between two entities.</p>
<p>There are different kinds of certificates, such as personal certificates, used
by individuals, and server certificates, used to establish secure sessions between
the server and clients through secure sockets layer (SSL) technology. For more information
on SSL, see <A HREF="ablnk.html#ablom">About Secure Sockets Layer</A>.</p>
<p>Certificates are based on <i>public key cryptography</i>, which
uses pairs of digital <i>keys</i> (very long numbers) to <i>encrypt</i>, or encode, information so it can be read only by its intended
recipient. The recipient then <i>decrypts</i> (decodes) the information
to read it.</p>
<p>A key pair contains a public key and a private key. The owner distributes the
public key and makes it available to anyone. But the owner never distributes the private
key; it is always kept secret. Because the keys are mathematically related, data encrypted
with one key can be decrypted only with the other key in the pair.</p>
<p>A certificate is like a passport: it identifies the holder and provides other
important information. Certificates are issued by a trusted third party called a <i>Certification Authority</i> (CA). The CA is analogous to a passport office:
it validates the certificate holder's identity and signs the certificate so
that it cannot be forged or tampered with. Once a CA has signed a certificate, the
holder can present it as proof of identity and to establish encrypted, confidential
communications.</p>
<p>Most importantly, a certificate binds the owner's public key to the owner's
identity. Like a passport binds a photograph to personal information about its holder,
a certificate binds a public key to information about its owner.</p>
<p>In addition to the public key, a certificate typically includes information
such as:</p>
<ul><li><p>The name of the holder and other identification, such as the URL of
the Web server using the certificate, or an individual's email address.</p>
</li>
<li><p>The name of the CA that issued the certificate.</p>
</li>
<li><p>An expiration date.</p>
</li>
</ul>
<p>Digital Certificates are governed by the technical specifications of the X.509
format. To verify the identity of a user in the <A NAME="indexterm-257"></A><tt>certificate</tt> realm, the authentication service verifies
an X.509 certificate, using the common name field of the X.509 certificate as the
principal name.</p>
<A NAME="ablol"></A><h5>About Certificate Chains</h5>
<p>Web browsers are preconfigured with a set of <i>root</i> CA certificates
that the browser automatically trusts. Any certificates from elsewhere must come with
a <i>certificate chain</i> to verify their validity. A certificate chain
is series of certificates issued by successive CA certificates, eventually ending
in a root CA certificate.</p>
<p>When a certificate is first generated, it is a <i>self-signed</i> certificate.
A self-signed certificate is one for which the issuer (signer) is the same as the
subject (the entity whose public key is being authenticated by the certificate). When
the owner sends a certificate signing request (CSR) to a CA, then imports the response,
the self-signed certificate is replaced by a chain of certificates. At the bottom
of the chain is the certificate (reply) issued by the CA authenticating the subject's
public key. The next certificate in the chain is one that authenticates the CA's public
key. Usually, this is a self-signed certificate (that is, a certificate from the CA
authenticating its own public key) and the last certificate in the chain.</p>
<p>In other cases, the CA can return a chain of certificates. In this case, the
bottom certificate in the chain is the same (a certificate signed by the CA, authenticating
the public key of the key entry), but the second certificate in the chain is a certificate
signed by a different CA, authenticating the public key of the CA to which you sent
the CSR. Then, the next certificate in the chain is a certificate authenticating the
second CA's key, and so on, until a self-signed <i>root</i> certificate
is reached. Each certificate in the chain (after the first) thus authenticates the
public key of the signer of the previous certificate in the chain.</p>
<A NAME="ablom"></A><h4>About Secure Sockets Layer</h4>
<p><i>Secure Sockets Layer</i> (SSL) is the most popular standard
for securing Internet communications and transactions. Web applications use HTTPS
(HTTP over SSL), which uses digital certificates to ensure secure, confidential communications
between server and clients. In an SSL connection, both the client and the server encrypt
data before sending it, then decrypt it upon receipt.</p>
<p>When a Web browser (client) wants to connect to a secure site, an <i>SSL handshake</i> is initiated, as described in the following procedure:</p>
<ul><li><p>The browser sends a message over the network requesting a secure session
(typically, by requesting a URL that begins with <tt>https</tt> instead
of <tt>http</tt>).</p>
</li>
<li><p>The server responds by sending its certificate (including its public
key).</p>
</li>
<li><p>The browser verifies that the server's certificate is valid
and is signed by a CA whose certificate is in the browser's database (and who
is trusted). It also verifies that the CA certificate has not expired.</p>
</li>
<li><p>If the certificate is valid, the browser generates a one time, unique <i>session</i> <i>key</i> and encrypts it with the server's
public key. The browser then sends the encrypted session key to the server so that
they both have a copy.</p>
</li>
<li><p>The server decrypts the message using its private key and recovers
the session key.</p>
</li>
</ul>
<p>After the handshake, the client has verified the identity of the Web site, and
only the client and the Web server have a copy of the session key. From this point
forward, the client and the server use the session key to encrypt all their communications
with each other. Thus, their communications are ensured to be secure.</p>
<p>The newest version of the SSL standard is called TLS (Transport Layer Security).
The Application Server supports the Secure Sockets Layer (SSL) 3.0 and the Transport Layer
Security (TLS) 1.0 encryption protocols.</p>
<p>To use SSL, the Application Server must have a certificate for each external interface,
or IP address, that accepts secure connections. The HTTPS service of most Web servers
will not run unless a digital certificate has been installed. Use the procedure described
in <A HREF="ablnk.html#ablrb">To generate a certificate using the <tt>keytool</tt> utility</A> to
set up a digital certificate that your Web server can use for SSL.</p>
<A NAME="ablon"></A><h5>About Ciphers</h5>
<p>A <i>cipher</i> is a cryptographic algorithm used for encryption
or decryption. SSL and TLS protocols support a variety of ciphers used to authenticate
the server and client to each other, transmit certificates, and establish session
keys.</p>
<p>Some ciphers are stronger and more secure than others. Clients and servers can
support different cipher suites. Choose ciphers from the SSL3 and TLS protocols. During
a secure connection, the client and the server agree to use the strongest cipher they
both have enabled for communication, so it is usually sufficient to enable all ciphers.</p>
<A NAME="abloo"></A><h5>Using Name-based Virtual Hosts</h5>
<p>Using name-based virtual hosts for a secure application can be problematic.
This is a design limitation of the SSL protocol itself. The SSL handshake, where the
client browser accepts the server certificate, must occur before the HTTP request
is accessed. As a result, the request information containing the virtual host name
cannot be determined prior to authentication, and it is therefore not possible to
assign multiple certificates to a single IP address.</p>
<p>If all virtual hosts on a single IP address need to authenticate against the
same certificate, the addition of multiple virtual hosts probably will not interfere
with normal SSL operations on the server. Be aware, however, that most browsers will
compare the server's domain name against the domain name listed in the certificate,
if any (applicable primarily to official, CA-signed certificates). If the domain names
do not match, these browsers display a warning. In general, only address-based virtual
hosts are commonly used with SSL in a production environment.</p>
<A NAME="ablop"></A><h3>About Firewalls</h3>
<p>A <i>firewall</i> controls the flow of data between two or more
networks, and manages the links between the networks. A firewall can consist of both
hardware and software elements. This section describes some common firewall architectures
and their configuration. The information here pertains primarily to the Application Server.
For details about a specific firewall technology, refer to the documentation from
your firewall vendor.</p>
<p>In general, configure the firewalls so that clients can access the necessary
TCP/IP ports. For example, if the HTTP listener is operating on port 8080, configure
the firewall to allow HTTP requests on port 8080 only. Likewise, if HTTPS requests
are setup for port 8181, you must configure the firewalls to allow HTTPS requests
on port 8181.</p>
<p>If direct Remote Method Invocations over Internet Inter-ORB Protocol (RMI-IIOP)
access from the Internet to EJB modules are required, open the RMI-IIOP listener port
as well, but this is strongly discouraged because it creates security risks.</p>
<p>In double firewall architecture, you must configure the outer firewall to allow
for HTTP and HTTPS transactions. You must configure the inner firewall to allow the
HTTP server plug-in to communicate with the Application Server behind the firewall.</p>
<A NAME="abloq"></A><h3>Managing Security With the Admin Console</h3>
<p>The Admin Console provides the means to manage the following aspects of security:</p>
<ul><li><p><A HREF="ablnk.html#ablor">Server Security Settings</A></p>
</li>
<li><p><A HREF="ablnk.html#ablos">Realms and file Realm Users</A></p>
</li>
<li><p><A HREF="ablnk.html#ablot">JACC Providers</A></p>
</li>
<li><p><A HREF="ablnk.html#ablou">Audit Modules</A></p>
</li>
<li><p><A HREF="ablnk.html#ablov">Message Security</A></p>
</li>
<li><p><A HREF="ablnk.html#ablow">HTTP and IIOP Listener Security</A></p>
</li>
<li><p><A HREF="ablnk.html#ablox">Admin Service Security</A></p>
</li>
<li><p><A HREF="ablnk.html#abloy">Security Maps</A></p>
</li>
</ul>
<A NAME="ablor"></A><h4>Server Security Settings</h4>
<p>On the Security Settings page, set properties for the entire server, including
specifying the default realm, the anonymous role, and the default principal user name
and password. For more information, see <A HREF="ablnk.html#ablpa">To configure security settings</A>.</p>
<A NAME="ablos"></A><h4>Realms and file Realm Users</h4>
<p>The concept of realms was introduced in <A HREF="ablnk.html#abloe">Understanding Users, Groups, Roles, and Realms</A>.</p>
<ul><li><p>Create a new realm</p>
</li>
<li><p>Delete an existing realm</p>
</li>
<li><p>Modify the configuration of an existing realm</p>
</li>
<li><p>Add, modify, and delete users in the <tt>file</tt> realm</p>
</li>
<li><p>Set the default realm</p>
</li>
</ul>
<p>See <A HREF="ablnk.html#ablpc">Admin Console Tasks for Realms</A> for details on these tasks.</p>
<p>See
Also:</p>
<ul><li><p><A HREF="ablnk.html#ablpd">To create a realm</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpi">To edit a realm</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpt">To delete a realm</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpu">To set the default realm</A></p>
</li>
</ul>
<A NAME="ablot"></A><h4>JACC Providers</h4>
<p>JACC providers were introduced in <A HREF="ablnk.html#ablob">Specifying JACC Providers</A>. Use the Admin Console to perform the following tasks:</p>
<ul><li><p>Add a new JACC provider</p>
</li>
<li><p>Delete or modify an existing JACC provider</p>
</li>
</ul>
<p>See <A HREF="ablnk.html#ablpv">Admin Console Tasks for JACC Providers</A> for details on these tasks.</p>
<p>See Also:</p>
<ul><li><p><A HREF="ablnk.html#ablpw">To create a JACC provider</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpx">To edit a JACC provider</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpy">To delete a JACC provider</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpz">To set the active JACC provider</A></p>
</li>
</ul>
<A NAME="ablou"></A><h4>Audit Modules</h4>
<p>Audit modules were introduced in <A HREF="ablnk.html#abloc">Auditing Authentication and Authorization Decisions</A>. Auditing is the method by which significant events,
such as errors or security breaches, are recorded for subsequent examination. All
authentication events are logged to the Application Server logs. A complete access log
provides a sequential trail of Application Server access events.</p>
<p>Use the Admin Console to perform the following tasks:</p>
<ul><li><p>Add a new audit module</p>
</li>
<li><p>Delete or modify an existing audit module</p>
</li>
</ul>
<p>See <A HREF="ablnk.html#ablqa">Admin Console Tasks for Audit Modules</A> for details on these tasks.</p>
<p>See Also:</p>
<ul><li><p><A HREF="ablnk.html#ablqb">To create an audit module</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqc">To edit an audit module</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqd">To delete an audit module</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqe">To enable or disable audit logging</A></p>
</li>
</ul>
<A NAME="ablov"></A><h4>Message Security</h4>
<p>The concept of message security was introduced in <A HREF="ablnk.html#ablod">Configuring Message Security</A>. Use the Admin Console to perform the following
tasks:</p>
<ul><li><p>Enable message security</p>
</li>
<li><p>Configure a message security provider</p>
</li>
<li><p>Delete or configure an existing message security configuration or
provider</p>
</li>
</ul>
<p>See <A HREF="ablrk.html#ablrk">Chapter&nbsp;10, Configuring Message Security</A> for details on these tasks.</p>
<p>See Also:</p>
<ul><li><p><A HREF="ablrk.html#ablsb">Configuring the Application Server for Message Security</A></p>
</li>
<li><p><A HREF="ablrk.html#ablry">Securing a Web Service</A></p>
</li>
<li><p><A HREF="ablrk.html#ablse">To enable providers for message security</A></p>
</li>
<li><p><A HREF="ablrk.html#ablsf">To configure a message security provider</A></p>
</li>
<li><p><A HREF="ablrk.html#ablsg">Creating a Message Security Provider</A></p>
</li>
<li><p><A HREF="ablrk.html#ablsi">To delete a message security configuration</A></p>
</li>
<li><p><A HREF="ablrk.html#ablsj">To delete a message security provider</A></p>
</li>
<li><p><A HREF="ablrk.html#ablsk">To enable message security for application clients</A></p>
</li>
</ul>
<A NAME="ablow"></A><h4>HTTP and IIOP Listener Security</h4>
<p>Each virtual server in the HTTP service provides network connections through
one or more <i>HTTP listeners</i>. For general information about the
HTTP service and HTTP listeners, see LINK REMOVED What is the HTTP Service?</p>
<p>The Application Server supports CORBA (Common Object Request Broker Architecture)
objects, which use the Internet Inter-Orb Protocol (IIOP) to communicate across the
network. An <i>IIOP listener</i> accepts incoming connections from remote
clients of EJB components and from other CORBA-based clients. For general information
on IIOP listeners, see <A HREF="abltr.html#abltv">IIOP Listeners</A>.</p>
<p>With the Admin Console, perform the following tasks:</p>
<ul><li><p>Create a new HTTP or IIOP listener, and specify the security it uses.</p>
</li>
<li><p>Modify the security settings for an existing HTTP or IIOP listener.</p>
</li>
</ul>
<p>See <A HREF="ablnk.html#ablqi">Admin Console Tasks for Listeners and JMX Connectors</A> for details on these tasks.</p>
<p>See Also:</p>
<ul><li><p><A HREF="ablnk.html#ablqj">To configure security for HTTP listeners</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqk">To configure security for IIOP listeners</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqm">To set listener security properties</A></p>
</li>
</ul>
<A NAME="ablox"></A><h4>Admin Service Security</h4>
<p>The Admin Service determines whether the server instance is a regular instance,
a domain administration server (DAS), or a combination. In the Platform
Edition, there is only one server instance, and it is a combination. Use the Admin
Service to configure a JSR-160 compliant remote JMX connector, which handles communication
between the domain administration server and the node agents, which manage server
instances on a host machine, for remote server instances.</p>
<p>With the Admin Console, perform the following tasks:</p>
<ul><li><p>Manage the Admin Service</p>
</li>
<li><p>Edit the JMX connector</p>
</li>
<li><p>Modify the security settings of the JMX connector</p>
</li>
</ul>
<p>See <A HREF="ablnk.html#ablql">To configure security for the Admin Service&rsquo;s JMX connector</A> for details on these tasks.</p>
<p>See Also:</p>
<ul><li><p><A HREF="ablnk.html#ablql">To configure security for the Admin Service&rsquo;s JMX connector</A></p>
</li>
</ul>
<A NAME="abloy"></A><h4>Security Maps</h4>
<p>The concept of security maps for connector connection pools is introduced in <A HREF="ablnk.html#ablqs">About Security Maps</A>. Use the Admin Console to perform the
following tasks:</p>
<ul><li><p>Add a security map to an existing connector connection pool</p>
</li>
<li><p>Delete or configure an existing security map</p>
</li>
</ul>
<p>See <A HREF="ablnk.html#ablqq">Admin Console Tasks for Connector Connection Pools</A> for details on these tasks.</p>
<p>See Also:</p>
<ul><li><p><A HREF="ablnk.html#ablqr">About Connector Connection Pools</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqs">About Security Maps</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqt">To create a security map</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqu">To edit a security map</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqv">To delete a security map</A></p>
</li>
</ul>
<A NAME="abloz"></A><h2>Admin Console Tasks for Security</h2>
<ul><li><p><A HREF="ablnk.html#ablpa">To configure security settings</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpb">To grant access to administration tools</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpq">Configuring Mutual Authentication</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqp">To configure single sign-on (SSO)</A></p>
</li>
</ul>
<A NAME="ablpa"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To configure security settings</h3>
<p>The Security page in the Admin Console enables you to set a variety of system-wide
security settings.</p>
<h5>Steps</h5><ol><li><p><b>In the Admin Console tree component, expand the Configuration node.</b></p></li>
<li><p><b>Select the Security node.</b></p><p>The Security page displays.</p>
</li>
<li><p><b>Modify the values as necessary. </b></p><p>The general security options
are discussed in the following table.</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Setting                                  </p></th><th scope="col"><p>Description                                  </p></th></tr>
<tr><td><p>Audit Logging</p></td><td><p>Select to enable audit logging. If enabled, the server will load and run all
the audit modules specified in the Audit Modules setting. If disabled, the server
does not access audit modules. Disabled by default.</p></td></tr>
<tr><td><p>Default Realm</p></td><td><p>The active (default) realm the server uses for authentication. Applications
use this realm unless they specify a different realm in their deployment descriptor.
All configured realms appear in the list. The initial default realm is the <tt>file</tt> realm.</p></td></tr>
<tr><td><p>Anonymous Role</p></td><td><p>The name for the default or anonymous role. The anonymous role is assigned to
all users. Applications can use this role in their deployment descriptors to grant
authorization to anyone.</p></td></tr>
<tr><td><p>Default Principal</p></td><td><p>Specifies the default user name. The server uses this when no principal is provided.
If you enter a value in this field, enter a corresponding value in the Default Principal
Password field.</p><p>This attribute is not required for normal server operation.</p></td></tr>
<tr><td><p>Default Principal Password</p></td><td><p>Password of the default principal specified in the Default Principal field.</p><p>This attribute is not required for normal server operation.</p></td></tr>
<tr><td><p>JACC</p></td><td><p>Class name of a configured JACC provider. See <A HREF="ablnk.html#ablpw">To create a JACC provider</A></p></td></tr>
<tr><td><p>Audit Modules</p></td><td><p>List of audit module provider classes, delimited by commas. A module listed
here must already be configured. If Audit Logging is enabled, this setting must list
audit modules. By default, the server uses an audit module named <tt>default</tt>. For information on creating new audit modules, see <A HREF="ablnk.html#ablqb">To create an audit module</A>.</p></td></tr>
<tr><td><p>Default Principal to Role Mapping</p></td><td><p>Click Enable to apply a default principal-to-role mapping to any application
that does not have an application-specific principal-to-role mapping defined. </p><p>At the command line, you can enable this option as follows:</p><p><tt>asadmin set server.security-service.activate-default-principal-to-role-mapping=true</tt></p></td></tr>
<tr><td><p>Mapped Principal Class</p></td><td><p>Enter CustomPrincipalImplClass. This attribute is used to customize the java.security.Principal
implementation class used in the default principal to role mapping. This attribute
is optional. When it is not specified,  the com.sun.enterprise.deployment.Group implementation
of  java.security.Principal is used. The value of this attribute is only relevant
when Default Principal to Role Mapping is enabled. </p><p>At the command line, you can specify the mapped principal class as follows:</p><p><tt>asadmin set server.security-service.mapped-principal-class=CustomPrincipalImplClass</tt></p></td></tr>
</table></li>
<li><p><b>Enter additional properties to pass to the Java Virtual Machine (JVM)
in the Additional Properties section.</b></p><p>Valid properties are dependent upon
the type of realm selected in the Default Realm field. Valid properties are discussed
in the following sections:</p>
<ul><li><p><A HREF="ablnk.html#ablpj">Editing the file and admin-realm Realms</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpp">Editing the certificate Realm</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpg">Creating the solaris Realm</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpe">Creating an ldap Realm</A></p>
</li>
<li><p><A HREF="ablnk.html#ablph">Creating a Custom Realm</A></p>
</li>
</ul>
</li>
<li><p><b>Select Save to save the changes or Load Defaults to restore the default
values.</b></p></li>
</ol><A NAME="ablpb"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To grant access to administration tools</h3>
<p>Only users in the <tt>asadmin</tt> group are able to access Admin Console and
the <tt>asadmin</tt> command line utility.</p>
<p>To give a user access to these administration tools, add them to the <tt>asadmin</tt> group in the <tt>admin-realm</tt>.</p>
<h5>Steps</h5><ol><li><p><b>In the Admin Console tree component, expand the Configuration node.</b></p></li>
<li><p><b>Expand the Security node.</b></p></li>
<li><p><b>Expand the Realms node.</b></p></li>
<li><p><b>Select the <tt>admin-realm</tt> node.</b></p></li>
<li><p><b>Click the Manage Users button from the Edit Realm page.</b></p><p>Initially
after installation, the administrator user name and password entered during installation
are listed in a file named <tt>admin-keyfile</tt>. By default, this user
belongs to the group <tt>asadmin</tt>, which gives rights to modify the Application Server.
Assign users to this group only if you want to grant them administrator privileges
for the Application Server.</p>
<p>If you add users to the <tt>admin-realm</tt> realm,
but assign the user to a group other than <tt>asadmin</tt>, the user information
will still be written to the file named <tt>admin-keyfile</tt>, but the
user will have no access to administrative tools or to applications in the <tt>file</tt> realm.</p>
</li>
<li><p><b>Click New to add a new user to the <tt>admin-realm</tt> realm.</b></p></li>
<li><p><b>Enter the correct information into the User ID, Password, and Group List
fields. </b></p><p>To authorize a user to make modifications to the Application Server,
include the <tt>asadmin</tt> group in the Group List.</p>
</li>
<li><p><b>Click OK to add this user to the <tt>admin-realm</tt> realm
or click Cancel to quit without saving.</b></p></li>
</ol><h5>See Also</h5><ul><li><p><A HREF="ablnk.html#ablpi">To edit a realm</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpt">To delete a realm</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpu">To set the default realm</A></p>
</li>
<li><p><A HREF="ablnk.html#ablos">Realms and file Realm Users</A></p>
</li>
</ul>
<A NAME="ablpc"></A><h2>Admin Console Tasks for Realms</h2>
<ul><li><p><A HREF="ablnk.html#ablpd">To create a realm</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpi">To edit a realm</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpt">To delete a realm</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpu">To set the default realm</A></p>
</li>
<li><p><A HREF="ablnk.html#fxjjh">Additional Information for Specific Realms</A></p>
</li>
</ul>
<A NAME="ablpd"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To create a realm</h3>
<p>The Application Server comes preconfigured with three realms: <tt>file</tt>, <tt>certificate</tt>, and <tt>admin-realm</tt>. It is also possible to
create <tt>ldap</tt>, <tt>solaris</tt>, and custom realms. Generally,
you will have one realm of each type on a server, but on the Application Server there are
two file realms: <tt>file</tt> and <tt>admin-realm</tt>. These
are two realms of the same type used for two different purposes. It is also possible
to have a different certificate database for each virtual server on your system.</p>
<h5>Steps</h5><ol><li><p><b>In the Admin Console tree component, expand the Configuration node.</b></p></li>
<li><p><b>Expand the Security node.</b></p></li>
<li><p><b>Select the Realms node.</b></p></li>
<li><p><b>On the Realms page, click New.</b></p><p>The Create Realm page is displayed.</p>
</li>
<li><p><b>Enter a name for the realm in the Name field.</b></p></li>
<li><p><b>Specify the class name for the realm being created. </b></p><p>Valid
choices are shown in the following table.</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Realm Name                                  </p></th><th scope="col"><p>Class Name                                  </p></th></tr>
<tr><td><p><tt>file</tt></p></td><td><p><tt>com.sun.enterprise.security.auth.realm.file.FileRealm</tt></p></td></tr>
<tr><td><p><tt>certificate</tt></p></td><td><p><tt>com.sun.enterprise.security.auth.realm.certificate.CertificateRealm</tt></p></td></tr>
<tr><td><p><tt>ldap</tt></p></td><td><p><tt>com.sun.enterprise.security.auth.realm.ldap.LDAPRealm</tt></p></td></tr>
<tr><td><p><tt>solaris</tt></p></td><td><p><tt>com.sun.enterprise.security.auth.realm.solaris.SolarisRealm</tt></p></td></tr>
<tr><td><p><i>custom</i></p></td><td><p>Name of login realm class</p></td></tr>
</table></li>
<li><p><b>Add the required properties and any desired optional properties for the
realm.</b></p><ol Type="a"><li><p><b>Click Add Property.</b></p></li>
<li><p><b>In the Name field, enter the name of the property.</b></p><ul><li><p>For a description of <tt>file</tt> realm properties, see <A HREF="ablnk.html#ablpj">Editing the file and admin-realm Realms</A>.</p>
</li>
<li><p>For a description of <tt>certificate</tt> realm properties,
see <A HREF="ablnk.html#ablpp">Editing the certificate Realm</A>.</p>
</li>
<li><p>For a description of <tt>ldap</tt> realm properties, see <A HREF="ablnk.html#ablpe">Creating an ldap Realm</A>.</p>
</li>
<li><p>For a description of <tt>solaris</tt> realm properties,
see <A HREF="ablnk.html#ablpg">Creating the solaris Realm</A>.</p>
</li>
<li><p>For a description of custom realm properties, see <A HREF="ablnk.html#ablph">Creating a Custom Realm</A>.</p>
</li>
</ul>
</li>
<li><p><b>In the Value field, enter the value of the property.</b></p></li>
</ol>
</li>
<li><p><b>Click OK.</b></p></li>
</ol><h5>More Information<br>Equivalent asadmin command</h5>
<p><tt>create-auth-realm</tt></p>
<A NAME="ablpi"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To edit a realm</h3>
<h5>Steps</h5><ol><li><p><b>In the Admin Console tree component, expand the Configuration node.</b></p></li>
<li><p><b>Expand the Security node.</b></p></li>
<li><p><b>Expand the Realms node.</b></p></li>
<li><p><b>Select the name of an existing realm.</b></p><p>The Edit Realm page
displays.</p>
</li>
<li><p><b>Edit existing properties and their values as desired.</b></p></li>
<li><p><b>To add additional properties, click the Add Properties button. </b></p><p>The page displays a new row. Enter a valid property name and property value.</p>
<ul><li><p>For a description of <tt>file</tt> realm properties, see <A HREF="ablnk.html#ablpj">Editing the file and admin-realm Realms</A>.</p>
</li>
<li><p>For a description of <tt>certificate</tt> realm properties,
see <A HREF="ablnk.html#ablpp">Editing the certificate Realm</A>.</p>
</li>
<li><p>For a description of <tt>ldap</tt> realm properties, see <A HREF="ablnk.html#ablpe">Creating an ldap Realm</A>.</p>
</li>
<li><p>For a description of <tt>solaris</tt> realm properties,
see <A HREF="ablnk.html#ablpg">Creating the solaris Realm</A>.</p>
</li>
<li><p>For a description of custom realm properties, see <A HREF="ablnk.html#ablph">Creating a Custom Realm</A>.</p>
</li>
</ul>
</li>
<li><p><b>Click Save to save the changes.</b></p></li>
</ol><A NAME="ablpt"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To delete a realm</h3>
<h5>Steps</h5><ol><li><p><b>In the Admin Console tree component, expand the Configuration node.</b></p></li>
<li><p><b>Expand the Security node.</b></p></li>
<li><p><b>Select the Realms node.</b></p></li>
<li><p><b>Click in the box beside the realm to be deleted.</b></p></li>
<li><p><b>Click Delete.</b></p></li>
</ol><h5>More Information<br>Equivalent asadmin command</h5>
<p><tt>delete-auth-realm</tt></p>
<h5>See Also</h5><ul><li><p><A HREF="ablnk.html#ablpd">To create a realm</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpi">To edit a realm</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpu">To set the default realm</A></p>
</li>
</ul>
<A NAME="ablpu"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To set the default realm</h3>
<p>The <i>default realm</i> is the realm that the Application Server uses
for authentication and authorization if an application's deployment descriptor
does not specify a realm.</p>
<h5>Steps</h5><ol><li><p><b>In the Admin Console tree component, expand the Configuration node.</b></p></li>
<li><p><b>Select the Security node.</b></p><p>The Security page displays.</p>
</li>
<li><p><b>In the Default Realm field, pick the desired realm from the drop-down
list.</b></p></li>
<li><p><b>Click Save to save the changes or Load Defaults to delete changes and
restore the Application Server default values.</b></p></li>
<li><p><b>Restart the server if Restart Required displays in the console.</b></p></li>
</ol><h5>See Also</h5><ul><li><p><A HREF="ablnk.html#ablpd">To create a realm</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpi">To edit a realm</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpt">To delete a realm</A></p>
</li>
</ul>
<A NAME="fxjjh"></A><h3>Additional Information for Specific Realms</h3>
<p>This section covers the following topics:</p>
<ul><li><p><A HREF="ablnk.html#ablpe">Creating an ldap Realm</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpg">Creating the solaris Realm</A></p>
</li>
<li><p><A HREF="ablnk.html#ablph">Creating a Custom Realm</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpp">Editing the certificate Realm</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpj">Editing the file and admin-realm Realms</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpk">Managing Users with Network Security Services (NSS)</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpl">Managing file Realm Users</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpq">Configuring Mutual Authentication</A></p>
</li>
</ul>
<A NAME="ablpe"></A><h4>Creating an ldap Realm</h4>
<p>The <tt>ldap</tt> realm performs authentication using information
from an LDAP server. User information includes user name, password, and the groups
to which the user belongs. To use an LDAP realm, the users and groups must already
be defined in your LDAP directory.</p>
<p>To create an LDAP realm, follow the steps in <A HREF="ablnk.html#ablpd">To create a realm</A> for adding a new realm, and add the properties shown in the following
table.</p>
<p><b>Table 9-2 </b>Required properties for <tt>ldap</tt> realm</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Property Name                            </p></th><th scope="col"><p>Description                            </p></th><th scope="col"><p>Value                            </p></th></tr>
<tr><td><p>directory</p></td><td><p>LDAP URL of the directory server.</p></td><td><p>LDAP URL of the form <tt>ldap://</tt><i>hostname</i><tt>:</tt><i>port</i>For example, <tt>ldap://myldap.foo.com:389</tt>.</p></td></tr>
<tr><td><p>base-dn</p></td><td><p>Base Distinguished Name (DN) for the location of user data, which can be at
any level above the user data, since a tree scope search is performed. The smaller
the search tree, the better the performance.</p></td><td><p>Domain for the search, for example: <tt>dc=siliconvalley, dc=BayArea, dc=sun,
dc=com</tt>.</p></td></tr>
<tr><td><p>jaas-context</p></td><td><p>Type of login module to use for this realm.</p></td><td><p>Must be <tt>ldapRealm</tt>.</p></td></tr>
</table><p>Optional properties for the <tt>ldap</tt> realm are shown in the following
table.</p>
<p><b>Table 9-3 </b>Optional properties for <tt>ldap</tt> realm</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Property Name                            </p></th><th scope="col"><p>Description                            </p></th><th scope="col"><p>Default                            </p></th></tr>
<tr><td><p>search-filter</p></td><td><p>Search filter to use to find the user.</p></td><td><p><tt>uid=%s</tt> (<tt>%s</tt> expands to the subject name).</p></td></tr>
<tr><td><p>group-base-dn</p></td><td><p>Base DN for the location of group data.</p></td><td><p>Same as the <tt>base-dn</tt>, but it can be tuned if necessary.</p></td></tr>
<tr><td><p>group-search-filter</p></td><td><p>Search filter to find group memberships for the user.</p></td><td><p><tt>uniquemember=%d</tt> (<tt>%d</tt> expands to the user
element DN).</p></td></tr>
<tr><td><p>group-target</p></td><td><p>LDAP attribute name that contains group name entries.</p></td><td><p>CN</p></td></tr>
<tr><td><p>search-bind-dn</p></td><td><p>Optional DN used to authenticate to the directory for performing the search-filter
lookup. Only required for directories that do not allow anonymous search.</p></td><td>&nbsp;</td></tr>
<tr><td><p>search-bind-password</p></td><td><p>LDAP password for the DN given in <tt>search-bind-dn</tt>.</p></td><td>&nbsp;</td></tr>
</table><A NAME="ablpf"></A><h5>Example</h5>
<p>For example, suppose an LDAP user, Joe Java, is defined in the LDAP directory
as follows:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>uid=jjava,ou=People,dc=acme,dc=com
uid=jjava
givenName=joe
objectClass=top
objectClass=person
objectClass=organizationalPerson
objectClass=inetorgperson
sn=java
cn=Joe Java</pre>
</td></table><br><p>Using the example code, when creating or editing the <tt>ldap</tt> realm,
you can enter the values as shown in the following table.</p>
<p><b>Table 9-4 </b>Example <tt>ldap</tt> realm
values</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Property Name                               </p></th><th scope="col"><p>Property Value                               </p></th></tr>
<tr><td><p><tt>directory</tt></p></td><td><p>LDAP URL to your server, for example: <tt>ldap://ldap.acme.com:389</tt></p></td></tr>
<tr><td><p><tt>base-dn</tt></p></td><td><p><tt>ou=People,dc=acme,dc=com</tt>.</p><p>Can be rooted higher, for example <tt>dc=acme</tt>, <tt>dc=com</tt>, but searches would traverse a larger part of the tree, reducing performance.</p></td></tr>
<tr><td><p><tt>jaas-context</tt></p></td><td><p><tt>ldapRealm</tt></p></td></tr>
</table><A NAME="ablpg"></A><h4>Creating the solaris Realm</h4>
<p>The <tt>solaris</tt> realm gets user and group information from the
underlying Solaris user database, as determined by the system's configuration.
The <tt>solaris</tt> realm invokes the underlying PAM infrastructure for
authenticating. If the configured PAM modules require root privileges, the domain
must run as root to use this realm. For details, see the Solaris documentation for
security services.</p>
<p>The <tt>solaris</tt> realm has one required property, <tt>jaas-context</tt> that specifies the type of login module to use. The property value must
be <tt>solarisRealm</tt>.</p>
<p><hr size="1" noshade><p><b>Note - </b>The <tt>solaris</tt> realm is supported only for Solaris 9 or
later.</p>
<hr size="1" noshade></p><A NAME="ablph"></A><h4>Creating a Custom Realm</h4>
<p>In addition to the four built-in realms, you can also create custom realms that
store user data in some other way, such as in a relational database. Development of
a custom realm is outside the scope of this document. For more information, see  
           the Application Server <i>Developer's Guide</i> chapter titled
Securing Applications.</p>
<p>As an administrator, the main thing you need to know is that a custom realm
is implemented by a class (called the <tt>LoginModule</tt>) derived from
the Java Authentication and Authorization Service (JAAS) package.</p>
<p><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To create a custom realm</p>
<h5>Steps</h5><ol><li><p><b>Follow the procedure outline in <A HREF="ablnk.html#ablpd">To create a realm</A>, entering the name of the custom realm and the name of the <tt>LoginModule</tt> class. </b></p><p>Any unique name can be used for the custom realm, for
example <tt>myCustomRealm</tt>.</p>
</li>
<li><p><b>Add the properties for a custom realm shown in the following table.</b></p>
<table cellspacing="5" border="1">
<tr><th scope="col"><p>Property Name                                     </p></th><th scope="col"><p>Property Value                                     </p></th></tr>
<tr><td><p>jaas-context</p></td><td><p><tt>LoginModule</tt> class name, for example <tt>simpleCustomRealm</tt></p></td></tr>
<tr><td><p>auth-type</p></td><td><p>Description of the realm, for example "A simple example custom realm".</p></td></tr>
</table></li>
<li><p><b>Click OK.</b></p></li>
<li><p><b>Edit the domain's login configuration file, <i>domain-dir</i><tt>/config/login.conf</tt>, and add the fully-qualified class name of the JAAS <tt>LoginModule</tt> at the end of the file, as follows:</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre><i>realmName</i> {
    <i>fully-qualified-LoginModule-classname</i> required;
};</pre>
</td></table><br><p>For example,</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>myCustomRealm {
    com.foo.bar.security.customrealm.simpleCustomLoginModule required;
};</pre>
</td></table><br></li>
<li><p><b>Copy the <tt>LoginModule</tt> class and all dependent classes
into the directory <i>domain-dir</i><tt>/lib/classes</tt>.</b></p></li>
<li><p><b>Restart the Server if Restart Required displays in the console.</b></p></li>
<li><p><b>Make sure that the realm is properly loaded.</b></p><p>Check <i>domain-dir</i><tt>/logs/server.log</tt> to make sure the server loaded the realm. The server should
invoke the realm's <tt>init()</tt> method.</p>
</li>
</ol><h5>See Also</h5><ul><li><p><A HREF="ablnk.html#ablpd">To create a realm</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpi">To edit a realm</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpt">To delete a realm</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpu">To set the default realm</A></p>
</li>
</ul>
<A NAME="ablpp"></A><h4>Editing the certificate Realm</h4>
<p>The <tt>certificate</tt> realm supports SSL authentication. This realm
sets up the user identity in the Application Server's security context, and populates
it with user data obtained from              cryptographically verified client certificates
in the truststore and keystore files (see  <A HREF="ablnk.html#ablqx">About Certificate Files</A>). Add users to these files using <tt>keytool</tt>. For
more information, see<i> The J2EE 1.4 Tutorial</i> chapter titled <i>Security</i> at <A HREF="http://java.sun.com/j2ee/1.4/docs/tutorial/doc/index.html">http://java.sun.com/j2ee/1.4/docs/tutorial/doc/index.html</A>.</p>
<p>With the <tt>certificate</tt> realm, J2EE containers handle authorization
processing based on each user's              Distinguished Name (DN) from his
or her certificate. The DN is the name of the entity whose public key the certificate
identifies. This name uses the X.500 standard, so it is intended to be unique across
the Internet. For more information on key stores and trust stores, refer to the <tt>keytool</tt> documentation at <A HREF="http://java.sun.com/j2se/1.4.2/docs/tooldocs/solaris/keytool.html">http://java.sun.com/j2se/1.4.2/docs/tooldocs/solaris/keytool.html</A>.</p>
<p>The following table lists the optional properties for the <tt>certificate</tt> realm.</p>
<p><b>Table 9-5 </b>Optional properties for <tt>certificate</tt> realm</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Property                            </p></th><th scope="col"><p>Description                            </p></th></tr>
<tr><td><p>assign-groups</p></td><td><p>A comma-separated list of group names. All clients who present valid certificates
are assigned to these groups. For example, <tt>employee,manager</tt>, where
these are the names of user groups.</p></td></tr>
<tr><td><p>jaas-context</p></td><td><p>Type of login module to use for this realm. For the <tt>certificate</tt> realm,
the value must be <tt>certificateRealm</tt>.</p></td></tr>
</table><p>See Also:</p>
<ul><li><p><A HREF="ablnk.html#ablpd">To create a realm</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpt">To delete a realm</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpu">To set the default realm</A></p>
</li>
</ul>
<A NAME="ablpj"></A><h4>Editing the file and admin-realm Realms</h4>
<p>The server maintains all user, group, and password information in a file named <tt>keyfile</tt> for the <tt>file</tt> realm and <tt>admin-keyfile</tt> for the <tt>admin-realm</tt>. For both, the <tt>file</tt> property
specifies the location of the keyfile. The following table shows required properties
for a <tt>file</tt> realm.</p>
<p><b>Table 9-6 </b>Required properties for file realms</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Property name                            </p></th><th scope="col"><p>Description                            </p></th><th scope="col"><p>Default Value                            </p></th></tr>
<tr><td><p>file</p></td><td><p>Full path and name of the keyfile.</p></td><td><p><i>domain-dir</i><tt>/config/keyfile</tt></p></td></tr>
<tr><td><p>jaas-context</p></td><td><p>Type of login module to use for this realm.</p></td><td><p><tt>fileRealm</tt> is the only valid value</p></td></tr>
</table><p>The <tt>keyfile</tt> is initially empty, so users must be added before
the <tt>file</tt> realm is used. For instructions, see <A HREF="ablnk.html#ablpl">Managing file Realm Users</A>.</p>
<p>The <tt>admin-keyfile</tt> initially contains the admin user name,
the admin password in an encrypted format, and the group to which this user belongs,
which is <tt>asadmin</tt> by default. For more information on adding users
to the <tt>admin-realm</tt>, read <A HREF="ablnk.html#ablpb">To grant access to administration tools</A>.</p>
<p><hr size="1" noshade><p><b>Note - </b>Users in the group <tt>asadmin</tt> in the <tt>admin-realm</tt> are authorized to use the Admin Console and <tt>asadmin</tt> tools.
Add only users to this group that have server administrative privileges.</p>
<hr size="1" noshade></p><A NAME="ablpk"></A><h4>Managing Users with Network Security Services (NSS)</h4>
<p>In the <b>Enterprise Edition only</b>, you can manage
users using the Admin Console as discussed in <A HREF="ablnk.html#ablpl">Managing file Realm Users</A> or you can manage users using NSS tools. Network Security Services
(NSS) is a set of libraries designed to support cross-platform development of security-enabled
client and server applications. Applications built with NSS can support SSL v2 and
v3, TLS, PKCS #5, PKCS #7, PKCS #11, PKCS #12, S/MIME, X.509 v3 certificates, and
other security standards. For detailed information, link to the following URLs:</p>
<ul><li><p>Network Security Services (NSS) at <A HREF="http://www.mozilla.org/projects/security/pki/nss/">http://www.mozilla.org/projects/security/pki/nss/</A></p>
</li>
<li><p>NSS Security Tools at <A HREF="http://www.mozilla.org/projects/security/pki/nss/tools/">http://www.mozilla.org/projects/security/pki/nss/tools/</A></p>
</li>
<li><p>Overview of NSS at <A HREF="http://www.mozilla.org/projects/security/pki/nss/overview.html">http://www.mozilla.org/projects/security/pki/nss/overview.html</A></p>
</li>
</ul>
<A NAME="ablpl"></A><h4>Managing file Realm Users</h4>
<p>Manage <tt>file</tt> realm users with the Admin Console. Users and
groups in the <tt>file</tt> realm are listed in the keyfile, whose location
is specified by the <tt>file</tt> property.</p>
<p><hr size="1" noshade><p><b>Note - </b>It is also possible to use these steps to add users to any file realm,
including the <tt>admin-realm</tt>. Simply substitute the name of the target
realm in place of the <tt>file</tt> realm referenced in this section.</p>
<hr size="1" noshade></p><p>A user in the <tt>file</tt> realm can belong to a <A NAME="indexterm-258"></A><i>J2EE group</i>, a category of users classified by common
traits. For example, customers of an e-commerce application might belong to the <tt>CUSTOMER</tt> group, but the big spenders would belong to the <tt>PREFERRED</tt> group. Categorizing users into groups makes it easier to control the access
of large numbers of users.</p>
<p>Initially after installation of the Application Server, the only user is the administrator
entered during installation. By default, this user belongs to the group <tt>asadmin</tt>, in the realm <tt>admin-realm</tt>, which gives rights
to modify the Application Server. Any users assigned to this group will have administrator
privileges, that is, they will have access to the <tt>asadmin</tt> tool
and the Admin Console.</p>
<p>To manage <tt>file</tt> realm users, perform these tasks:</p>
<ul><li><p><A HREF="ablnk.html#fxjfm">To access the File Users page</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpm">To add a user</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpn">To edit user information</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpo">To delete a user</A></p>
</li>
</ul>
<A NAME="fxjfm"></A><p><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To access the File Users page</p>
<h5>Steps</h5><ol><li><p><b>In the Admin Console tree component, expand the Configuration node.
                     </b></p></li>
<li><p><b>Expand the Security node.</b></p></li>
<li><p><b>Expand the Realms node.</b></p></li>
<li><p><b>Select the <tt>file</tt> node.</b></p></li>
<li><p><b>Click the Manage Users button from the Edit Realm page.</b></p><p>The
File Users page displays. In this page, perform the following tasks:</p>
<ul><li><p><A HREF="ablnk.html#ablpm">To add a user</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpn">To edit user information</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpo">To delete a user</A></p>
</li>
</ul>
</li>
</ol><A NAME="ablpm"></A><p><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To add a user</p>
<h5>Steps</h5><ol><li><p><b>Click New to add a new user to the <tt>file</tt> realm.</b></p></li>
<li><p><b>Enter the following information on the File Users page:</b></p><ul><li><p><b>User ID</b> <i>(required)</i> -
The name of the user.</p>
</li>
<li><p><b>Password</b> <i>(required)</i> -
The user password.</p>
</li>
<li><p><b>Confirm Password</b> <i>(required)</i> - The user password again, for verification.</p>
</li>
<li><p><b>Group List</b> <i>(optional)</i> - A comma-separated list of the groups to which the user belongs. These
groups do not need to be defined elsewhere.</p>
</li>
</ul>
</li>
<li><p><b>Click OK to add this user to the list of users in the <tt>file</tt> realm.
Click Cancel to quit without saving.</b></p></li>
</ol><h5>More Information<br>Equivalent asadmin command</h5>
<p><tt>create-file-user</tt></p>
<A NAME="ablpn"></A><p><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To edit user information</p>
<h5>Steps</h5><ol><li><p><b>In the User ID column, click the name of the user to be modified.</b></p><p>The Edit File Realm User page displays.</p>
</li>
<li><p><b>Change the user password by entering a new password in the Password and
Confirm Password fields.</b></p></li>
<li><p><b>Change the groups to which the user belongs by adding or deleting groups
in the Group List field. </b></p><p>Separate group names with commas. Groups need
not be previously defined.</p>
</li>
<li><p><b>Click Save to save this user to the list of users in the <tt>file</tt> realm. </b></p><p>Click Close to quit without saving.</p>
</li>
</ol><A NAME="ablpo"></A><p><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To delete a user</p>
<h5>Steps</h5><ol><li><p><b>Select the checkbox to the left of the name of the user(s) to be deleted.</b></p></li>
<li><p><b>Click Delete.</b></p></li>
<li><p><b>Click Close to return to the Edit Realm page.</b></p></li>
</ol><h5>More Information<br>Equivalent asadmin command</h5>
<p><tt>delete-file-user</tt></p>
<A NAME="ablpq"></A><h4>Configuring Mutual Authentication</h4>
<ul><li><p><A HREF="ablnk.html#ablps">Enabling Mutual SSL Authentication in an Application</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpr">To enable mutual authentication for all the applications</A></p>
</li>
</ul>
<p>In mutual authentication, both server and client-side authentication are enabled.
To test mutual authentication, a client with a valid certificate must exist. For information
on mutual authentication, see the <i>Security</i> chapter of <i>The J2EE 1.4 Tutorial</i> at <A HREF="http://java.sun.com/j2ee/1.4/docs/tutorial/doc/index.html">http://java.sun.com/j2ee/1.4/docs/tutorial/doc/index.html</A>.</p>
<A NAME="ablps"></A><h5>Enabling Mutual SSL Authentication in an Application</h5>
<p>To enable mutual authentication for a specific application, use <tt>deploytool</tt> to set the method of authentication to <tt>Client-Certificate</tt>.
For more information about using <tt>deploytool</tt>, refer to the<i> Security</i> chapter of<i> The J2EE 1.4 Tutorial</i> at <A HREF="http://java.sun.com/j2ee/1.4/docs/tutorial/doc/index.html">http://java.sun.com/j2ee/1.4/docs/tutorial/doc/index.html</A>.</p>
<A NAME="ablpr"></A><p><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To enable mutual authentication for all the applications</p>
<p>The Application Server uses the <tt>certificate</tt> realm for HTTPS authentication.</p>
<h5>Steps</h5><ol><li><p><b>In the Admin Console tree component, expand the Configuration node.</b></p></li>
<li><p><b>Expand the Security node.</b></p></li>
<li><p><b>Expand the Realms node.</b></p></li>
<li><p><b>Select the <tt>certificate</tt> realm.</b></p></li>
<li><p><b>Click the Add Property button.</b></p><ol Type="a"><li><p><b>In the Name field, enter <tt>clientAuth</tt>.</b></p></li>
<li><p><b>In the Value field, enter <tt>true</tt>.</b></p></li>
</ol>
</li>
<li><p><b>Click Save.</b></p></li>
<li><p><b>Restart the Application Server if Restart Required displays in the console.</b></p><p>After restarting the server, client authentication is required for all
applications that use the <tt>certificate</tt> realm.</p>
</li>
</ol><A NAME="ablpv"></A><h2>Admin Console Tasks for JACC Providers</h2>
<ul><li><p><A HREF="ablnk.html#ablpw">To create a JACC provider</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpx">To edit a JACC provider</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpy">To delete a JACC provider</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpz">To set the active JACC provider</A></p>
</li>
</ul>
<A NAME="ablpw"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To create a JACC provider</h3>
<p>JACC (Java Authorization Contract for Containers) is part of the J2EE 1.4 specification
that defines an interface for pluggable authorization providers. This enables the
administrator to set up third-party <i>plug in</i> modules to perform
authorization. By default, the Application Server provides a simple, JACC-compliant file-based
authorization engine.</p>
<h5>Steps</h5><ol><li><p><b>In the Admin Console tree component, expand the Configuration node.</b></p></li>
<li><p><b>Expand the Security node.</b></p></li>
<li><p><b>Select the JACC Providers node.</b></p></li>
<li><p><b>On the JACC Providers page, click New.</b></p></li>
<li><p><b>On the Create JACC Provider page, enter the following:</b></p><ul><li><p><b>Name</b> -  The name to use to
identify this provider.</p>
</li>
<li><p><b>Policy Configuration</b> -  The
name of the class that implements the policy configuration factory. The default provider
uses <tt>com.sun.enterprise.security.provider.PolicyConfigurationFactoryImpl</tt>.</p>
</li>
<li><p><b>Policy Provider</b> -  The name
of the class that implements the policy factory. The default provider uses <tt>com.sun.enterprise.security.provider.PolicyWrapper</tt>.</p>
</li>
</ul>
</li>
<li><p><b>Add properties to the provider by clicking the Add Property button. Valid
properties include:</b></p><ul><li><p><tt>repository</tt> - the directory that contains
the policy file. For the default provider, this value is <tt>${com.sun.aas.instanceRoot}/generated/policy</tt>.</p>
</li>
</ul>
</li>
<li><p><b>Click OK to save this configuration, or click Cancel to quit without saving.</b></p></li>
</ol><h5>See Also</h5><ul><li><p><A HREF="ablnk.html#ablob">Specifying JACC Providers</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpx">To edit a JACC provider</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpy">To delete a JACC provider</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpz">To set the active JACC provider</A></p>
</li>
</ul>
<A NAME="ablpx"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To edit a JACC provider</h3>
<h5>Steps</h5><ol><li><p><b>In the Admin Console tree component, expand the Configuration node.</b></p></li>
<li><p><b>Expand the Security node.</b></p></li>
<li><p><b>Expand the JACC Providers node.</b></p></li>
<li><p><b>Select the node of the JACC provider to be edited.</b></p></li>
<li><p><b>On the Edit JACC Provider page, modify the provider information as desired:</b></p><ul><li><p><b>Policy Configuration</b> -  The
name of the class that implements the policy configuration factory.</p>
</li>
<li><p><b>Policy Provider</b> -  The name
of the class that implements the policy factory.</p>
</li>
</ul>
</li>
<li><p><b>To add properties, click the Add button. Enter the name and value for
the property. Valid entries include:</b></p><ul><li><p><tt>repository</tt> -  the directory that contains
the policy file. For the default provider, this value is <tt>${com.sun.aas.instanceRoot}/generated/policy</tt>.</p>
</li>
</ul>
</li>
<li><p><b>To delete an existing property, click in the checkbox to the left of the
property, then click Delete Properties.</b></p></li>
<li><p><b>Click Save to save or click the browser's back button to cancel
without saving.</b></p></li>
</ol><h5>See Also</h5><ul><li><p><A HREF="ablnk.html#ablpw">To create a JACC provider</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpy">To delete a JACC provider</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpz">To set the active JACC provider</A></p>
</li>
</ul>
<A NAME="ablpy"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To delete a JACC provider</h3>
<h5>Steps</h5><ol><li><p><b>In the Admin Console tree component, expand the Configuration node.</b></p></li>
<li><p><b>Expand the Security node.</b></p></li>
<li><p><b>Select the JACC Providers node.</b></p></li>
<li><p><b>Click in the checkbox to the left of the JACC provider to be deleted.</b></p></li>
<li><p><b>Click Delete.</b></p></li>
</ol><h5>See Also</h5><ul><li><p><A HREF="ablnk.html#ablpw">To create a JACC provider</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpx">To edit a JACC provider</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpz">To set the active JACC provider</A></p>
</li>
</ul>
<A NAME="ablpz"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To set the active JACC provider</h3>
<h5>Steps</h5><ol><li><p><b>In the Admin Console tree component, expand the Configuration node.</b></p></li>
<li><p><b>Select the Security node.</b></p><p>The Security page displays.</p>
</li>
<li><p><b>In the JACC field, enter the name of the JACC provider to be used by the
server.</b></p><p>If you don't know which JACC providers are available, expand
the JACC Provider component in the tree to view all configured JACC providers.</p>
</li>
<li><p><b>Select Save to save the changes or Load Defaults to return to the default
values.</b></p></li>
<li><p><b>Restart the Application Server if Restart Required displays in the console.</b></p></li>
</ol><h5>See Also</h5><ul><li><p><A HREF="ablnk.html#ablpw">To create a JACC provider</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpx">To edit a JACC provider</A></p>
</li>
<li><p><A HREF="ablnk.html#ablpy">To delete a JACC provider</A></p>
</li>
</ul>
<A NAME="ablqa"></A><h2>Admin Console Tasks for Audit Modules</h2>
<ul><li><p><A HREF="ablnk.html#ablqb">To create an audit module</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqc">To edit an audit module</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqd">To delete an audit module</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqf">To set the active audit module</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqe">To enable or disable audit logging</A></p>
</li>
</ul>
<A NAME="ablqb"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To create an audit module</h3>
<p>The Application Server provides a simple default audit module; for more information,
see <A HREF="ablnk.html#ablqg">To use the default audit module</A>.</p>
<h5>Steps</h5><ol><li><p><b>In the Admin Console tree component, expand the Configuration node.</b></p></li>
<li><p><b>Expand the Security node.</b></p></li>
<li><p><b>Select the Audit Modules node.</b></p></li>
<li><p><b>On the Audit Modules page, click New.</b></p></li>
<li><p><b>On the Create Audit Module page, enter the following information:</b></p><ul><li><p><b>Name</b> -  The name used to
identify this audit module.</p>
</li>
<li><p><b>Classname</b> -  The fully-qualified
name of the class that implements this module. The class name for the default audit
module is <tt>com.sun.enterprise.security.Audit</tt>.</p>
</li>
</ul>
</li>
<li><p><b>To add JVM properties to this module, click Add Property. Specify a name
and value for each property. Valid properties include:</b></p><ul><li><p><tt>auditOn</tt> - Specifies whether or not to enable this
implementation class. Valid values are <tt>true</tt> and <tt>false</tt>.</p>
</li>
</ul>
</li>
<li><p><b>Click OK to save entries, or click Cancel to quit without saving.</b></p></li>
</ol><h5>See Also</h5><ul><li><p><A HREF="ablnk.html#abloc">Auditing Authentication and Authorization Decisions</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqc">To edit an audit module</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqd">To delete an audit module</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqf">To set the active audit module</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqe">To enable or disable audit logging</A></p>
</li>
</ul>
<A NAME="ablqc"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To edit an audit module</h3>
<p>Audit modules are not turned on by default. For more information on how to activate
audit modules, read <A HREF="ablnk.html#ablqe">To enable or disable audit logging</A>.</p>
<h5>Steps</h5><ol><li><p><b>In the Admin Console tree component, expand the Configuration node.</b></p></li>
<li><p><b>Expand the Security node.</b></p></li>
<li><p><b>Expand the Audit Modules node.</b></p></li>
<li><p><b>Click the node of the audit module to be edited.</b></p></li>
<li><p><b>On the Edit Audit Module page, modify the class name, if needed.</b></p></li>
<li><p><b>Enter any additional properties for the module by selecting the Add button
and entering the name and value of the property. Valid properties include:</b></p><ul><li><p><tt>auditOn -</tt> Specifies whether or not to use this
audit module. Valid values are <tt>true</tt> and <tt>false</tt>.</p>
</li>
</ul>
</li>
<li><p><b>Modify any existing properties by selecting the name or value to be modified,
and entering the changes directly into the text field.</b></p></li>
<li><p><b>Delete a property by selecting the checkbox to the left of the property
and clicking Delete Properties.</b></p></li>
<li><p><b>Click Save to save or click the Back button on the browser to cancel without
saving.</b></p></li>
</ol><h5>See Also</h5><ul><li><p><A HREF="ablnk.html#abloc">Auditing Authentication and Authorization Decisions</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqb">To create an audit module</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqd">To delete an audit module</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqf">To set the active audit module</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqe">To enable or disable audit logging</A></p>
</li>
</ul>
<A NAME="ablqd"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To delete an audit module</h3>
<h5>Steps</h5><ol><li><p><b>In the Admin Console tree component, expand the Configuration node.</b></p></li>
<li><p><b>Expand the Security node.</b></p></li>
<li><p><b>Select the Audit Modules node.</b></p></li>
<li><p><b>Click in the checkbox to the left of the audit module to be deleted.</b></p></li>
<li><p><b>Click Delete.</b></p></li>
</ol><h5>See Also</h5><ul><li><p><A HREF="ablnk.html#ablqb">To create an audit module</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqc">To edit an audit module</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqd">To delete an audit module</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqe">To enable or disable audit logging</A></p>
</li>
</ul>
<A NAME="ablqe"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To enable or disable audit logging</h3>
<h5>Steps</h5><ol><li><p><b>In the Admin Console tree component, expand the Configuration node.</b></p></li>
<li><p><b>Select the Security node.</b></p><p>The Security page displays.</p>
</li>
<li><p><b>To enable logging, select the Audit Logging check box. To disable it,
deselect it. </b></p><p>Selecting this option causes the loading of the audit modules
and ensures they are called by the Application Server's audit library at audit points.</p>
</li>
<li><p><b>If you are enabling audit logging, specify a default audit module as described
in                       <A HREF="ablnk.html#ablqf">To set the active audit module</A>.</b></p></li>
<li><p><b>Select Save to save the changes.</b></p></li>
<li><p><b>Restart the Application Server if Restart Required displays in the console.</b></p></li>
</ol><h5>See Also</h5><ul><li><p><A HREF="ablnk.html#ablqb">To create an audit module</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqc">To edit an audit module</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqf">To set the active audit module</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqe">To enable or disable audit logging</A></p>
</li>
</ul>
<A NAME="ablqf"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To set the active audit module</h3>
<h5>Before You Begin</h5><p>To specify the audit module that the server uses, first enable audit logging
as described in <A HREF="ablnk.html#ablqe">To enable or disable audit logging</A>.</p>
<h5>Steps</h5><ol><li><p><b>In the Audit Modules field, enter the name of the audit module to be used
by the server.</b></p><p>The preconfigured audit module is called <tt>default</tt>. Make sure that this audit module has <tt>auditOn</tt> set to
true as described in <A HREF="ablnk.html#ablqg">To use the default audit module</A>.</p>
</li>
<li><p><b>Select Save to save the changes, Load Defaults to cancel.</b></p></li>
<li><p><b>Restart the Application Server if Restart Required displays in the console.</b></p></li>
</ol><A NAME="ablqg"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To use the default audit module</h3>
<p>The <tt>default</tt> audit module logs authentication and authorization
requests to the server log file. For information on changing the location of the log
file, see <A HREF="abluj.html#abluo">To configure general logging settings</A>.</p>
<p>Authentication log entries include the following information:</p>
<ul><li><p>Names of users who attempted to authenticate.</p>
</li>
<li><p>The realm that processed the access request.</p>
</li>
<li><p>The requested Web module URI or EJB component.</p>
</li>
<li><p>Success or failure of the request.</p>
</li>
</ul>
<p>Regardless of whether audit logging is enabled, the Application Server logs all denied
authentication events.</p>
<p>Authorization log entries include the following information:</p>
<ul><li><p>Names of authenticated users, if any.</p>
</li>
<li><p>The requested Web URI or EJB component.</p>
</li>
<li><p>Success or failure of the requests.</p>
</li>
</ul>
<h5>Steps</h5><ol><li><p><b>In the Admin Console tree component, expand the Configuration node.</b></p></li>
<li><p><b>Expand the Security node.</b></p></li>
<li><p><b>Expand the Audit Modules node.</b></p></li>
<li><p><b>Click the <tt>default</tt> node.</b></p></li>
<li><p><b>Set the value of the <tt>auditOn</tt> property to <tt>true</tt>.                      </b></p></li>
<li><p><b>Select Save to save the changes.</b></p></li>
<li><p><b>Restart the Application Server if Restart Required displays in the console.</b></p></li>
</ol><h5>See Also</h5><ul><li><p><A HREF="ablnk.html#ablqb">To create an audit module</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqc">To edit an audit module</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqf">To set the active audit module</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqd">To delete an audit module</A></p>
</li>
</ul>
<A NAME="ablqi"></A><h2>Admin Console Tasks for Listeners and JMX Connectors</h2>
<ul><li><p><A HREF="ablnk.html#ablqj">To configure security for HTTP listeners</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqk">To configure security for IIOP listeners</A></p>
</li>
<li><p><A HREF="ablnk.html#ablql">To configure security for the Admin Service&rsquo;s JMX connector</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqm">To set listener security properties</A></p>
</li>
</ul>
<A NAME="ablqj"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To configure security for HTTP listeners</h3>
<p>Each virtual server in the HTTP service provides network connections through
one or more <i>HTTP listeners</i>. With the Admin Console, create new
HTTP listeners and edit the security settings of existing HTTP listeners.</p>
<h5>Steps</h5><ol><li><p><b>In the Admin Console tree component, expand the Configuration node.</b></p></li>
<li><p><b>Expand the HTTP Service node.</b></p></li>
<li><p><b>Select the HTTP Listeners node.</b></p></li>
<li><p><b>Select an HTTP listener to edit an existing listener or click New and
follow the procedure in LINK REMOVED To create an HTTP listener. to create
a new listener.</b></p></li>
<li><p><b>Follow the procedure in <A HREF="ablnk.html#ablqm">To set listener security properties</A> to set security properties.</b></p></li>
<li><p><b>Click Save to save the changes, or click the browser's Back button
to cancel without saving.</b></p></li>
</ol><h5>More Information<br>Equivalent asadmin command</h5>
<p><tt>create-http-listener</tt></p>
<h5>See Also</h5><ul><li><p><A HREF="ablnk.html#ablqk">To configure security for IIOP listeners</A></p>
</li>
<li><p><A HREF="ablnk.html#ablql">To configure security for the Admin Service&rsquo;s JMX connector</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqm">To set listener security properties</A></p>
</li>
</ul>
<A NAME="ablqk"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To configure security for IIOP listeners</h3>
<p>The Application Server supports CORBA (Common Object Request Broker Architecture)
objects, which use the Internet Inter-Orb Protocol (IIOP) to communicate across the
network. An <i>IIOP listener</i> accepts incoming connections from remote
clients of EJB components and from other CORBA-based clients. With the Admin Console,
create new IIOP listeners and edit the settings of existing IIOP listeners.</p>
<h5>Steps</h5><ol><li><p><b>In the Admin Console tree component, expand the Configuration node.</b></p></li>
<li><p><b>Expand the ORB node.</b></p></li>
<li><p><b>Select the IIOP Listeners node.</b></p></li>
<li><p><b>Select an IIOP listener to edit that listener or click New and follow
the procedure in                       <A HREF="abltr.html#abltz">To create an IIOP listener</A> to create a new listener.</b></p></li>
<li><p><b>Follow the procedure in <A HREF="ablnk.html#ablqm">To set listener security properties</A> to set security properties.</b></p></li>
<li><p><b>Click Save to save the changes, or click Load Defaults to restore the
properties to their default values.</b></p><p>If a new listener was created, it
will now be listed in the Current Listeners table on the IIOP Listeners page.</p>
</li>
</ol><h5>More Information<br>Equivalent asadmin command</h5>
<p><tt>create-iiop-listener</tt></p>
<h5>See Also</h5><ul><li><p><A HREF="ablnk.html#ablqj">To configure security for HTTP listeners</A></p>
</li>
<li><p><A HREF="ablnk.html#ablql">To configure security for the Admin Service&rsquo;s JMX connector</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqm">To set listener security properties</A></p>
</li>
</ul>
<A NAME="ablql"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To configure security for the Admin Service's JMX connector</h3>
<h5>Steps</h5><ol><li><p><b>In the Admin Console tree component, expand the Configuration node.</b></p></li>
<li><p><b>Expand the Admin Service node.</b></p></li>
<li><p><b>Select the admin service to be modified.</b></p></li>
<li><p><b>Follow the procedure in <A HREF="ablnk.html#ablqm">To set listener security properties</A> to set security properties.</b></p></li>
<li><p><b>Click Save to save the changes, or click Load Defaults to restore the
properties to their default values.</b></p></li>
</ol><h5>See Also</h5><ul><li><p><A HREF="ablnk.html#ablqk">To configure security for IIOP listeners</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqj">To configure security for HTTP listeners</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqm">To set listener security properties</A></p>
</li>
</ul>
<A NAME="ablqm"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To set listener security properties</h3>
<p>This procedure applies to HTTP listener, IIOP listener, and JMX Connector security
properties.</p>
<h5>Steps</h5><ol><li><p><b>In the Edit HTTP Listener, Edit IIOP Listener, or Edit JMX Connector page,
go to the section labeled SSL.</b></p></li>
<li><p><b>Check the Enabled box in the Security field to enable security for this
listener. When this option is selected, you must select SSL3 or TLS to specify which
type of security is enabled, and you must enter a certificate nickname.</b></p></li>
<li><p><b>Check the Enabled box in the Client Authentication field if clients are
to authenticate themselves to the Application Server when using this listener.</b></p></li>
<li><p><b>Enter the keystore alias in the Certificate Nickname field if the Enabled
box is checked. The keystore alias is a single value that identifies an existing server
key pair and certificate. The certificate nickname for the default keystore is <tt>s1as</tt>.</b></p><p>To find the Certificate Nickname, use <tt>keytool</tt>, as shown in the following example:<tt>keytool -list -v -keystore
keystore.jks.</tt></p>
<p>If the name has changed in the keystore file,
then use that name instead of <tt>keystore.jks</tt>.</p>
</li>
<li><p><b>Select SSL3 and/or TLS if the Enabled box is checked. By default, both
SSL3 and TLS are enabled.</b></p></li>
<li><p><b>Enable individual cipher suites, if needed. By default, all supported
cipher suites are enabled. Ciphers are discusses in <A HREF="ablnk.html#ablon">About Ciphers</A>.</b></p></li>
<li><p><b>Select Save to save the changes or Load Defaults to cancel.</b></p></li>
</ol><h5>See Also</h5><ul><li><p><A HREF="ablnk.html#ablqk">To configure security for IIOP listeners</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqj">To configure security for HTTP listeners</A></p>
</li>
<li><p><A HREF="ablnk.html#ablql">To configure security for the Admin Service&rsquo;s JMX connector</A></p>
</li>
</ul>
<A NAME="ablqn"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To secure CORBA objects</h3>
<p>CORBA objects include Java RMI-IIOP and Java IDL or POA based CORBA objects,
excluding EJB modules. By default, authentication is not required for CORBA objects.</p>
<h5>Steps</h5><ol><li><p><b>Configure authentication, if desired.</b></p><ol Type="a"><li><p><b>Expand the ORB node, and then the IIOP Listeners node.</b></p></li>
<li><p><b>Click the SSL listener.</b></p></li>
<li><p><b>Select the Security Enabled checkbox.</b></p></li>
<li><p><b>Click Save.</b></p></li>
<li><p><b>Restart the Application Server.</b></p></li>
</ol>
<p>Once authentication is turned on, all clients need to authenticate by supplying
a user name and password (if using basic authentication) or a certificate (if using
SSL mutual authentication).</p>
</li>
<li><p><b>Configure authorization.</b></p><p>To turn on authorization for CORBA
objects, specify the appropriate security policy in the server's security configuration
file, <i>domain-dir</i><tt>/config/server.policy</tt>.</p>
<p>By default,
all users are allowed to access all non-EJB CORBA objects in the server, as specified
by the following default grant block:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>grant { permission com.sun.enterprise.security.CORBAObjectPermission "*", "*"; }</pre>
</td></table><br><p><tt>CORBAObjectPermission</tt> is a special Java Permission class
that controls which users are allowed to access non-EJB CORBA objects in the server. <tt>CORBAObjectPermission</tt> takes two parameters:</p>
<ul><li><p>A CORBA object name. </p>
<p>In the Application Server, only the name "<tt>*</tt>" is supported, that is, it is not possible to specify a specific
CORBA object name.</p>
</li>
<li><p>A comma-separated list of method names. </p>
<p>In the Application Server,
only "<tt>*</tt>" is supported, that is, it is not possible
to specify a specific method name.</p>
</li>
</ul>
<p>The general form of a <tt>CORBAObjectPermission</tt> grant block is:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>grant principal <i>principal-class-name</i> "principal-name" { 
   permission com.sun.enterprise.security.CORBAObjectPermission "*", "*"; 
}</pre>
</td></table><br><p>where the <i>principal-class-name</i> is either:</p>
<ul><li><p><tt>com.sun.enterprise.deployment.PrincipalImpl</tt> (for
a single principal)</p>
</li>
<li><p><tt>com.sun.enterprise.deployment.Group</tt> (for a named
group of principals)</p>
</li>
</ul>
</li>
<li><p><b>Configure message protection:</b></p><p>Integrity and confidentiality
of IIOP messages used in requests and replies during CORBA invocations can be protected
by using SSL. By default, the server supports both plain IIOP and IIOP-over-SSL invocations.</p>
<ol Type="a"><li><p><b>To force clients to use only SSL for IIOP invocations, remove all non-SSL <tt>iiop-listener</tt> elements in the <tt>iiop-service</tt> element in <tt>domain.xml</tt>.</b></p><p>This ensures that the server will not service plain
IIOP invocations. By default, application clients use plain IIOP for making requests
if the server supports plain IIOP.</p>
</li>
<li><p><b>To force the client to use SSL, a change is needed in the application
client configuration file <tt>sun-acc.xml</tt> (which is also located in
the domain's <tt>config</tt> directory). </b></p><p>Specifically,
the property <tt>ssl</tt> with value <tt>required</tt> should
be added inside the <tt>&lt;client-container></tt> element, as follows:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;client-container>
   &lt;property name="ssl" value="required"/>
   &lt;target-server .... />
&lt;/client-container></pre>
</td></table><br></li>
</ol>
</li>
</ol><A NAME="ablqo"></A><h2>Admin Console Security Tasks for Virtual Servers</h2>
<ul><li><p><A HREF="ablnk.html#ablqp">To configure single sign-on (SSO)</A></p>
</li>
</ul>
<A NAME="ablqp"></A><h3><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To configure single sign-on (SSO)</h3>
<p>Single sign-on enables multiple applications to share user sign-on information,
rather than requiring each application to have separate user sign-on. Applications
using single sign-on authenticate the user one time, and the authentication information
is propagated to all other involved applications.</p>
<p>Single sign-on applies to Web applications configured for the same realm and
virtual server.</p>
<p><hr size="1" noshade><p><b>Note - </b>Single sign-on uses an HTTP cookie to transmit a token that associates
each request with the saved user identity, so it can be used only when the browser
client supports cookies.</p>
<hr size="1" noshade></p><p>Single sign-on operates according to the following rules:</p>
<ul><li><p>When a user accesses a protected resource in a Web application, the
server requires the user to authenticate himself or herself, using the method defined
for that Web application.</p>
</li>
<li><p>Once authenticated, the Application Server uses the roles associated with
the user for authorization decisions across all Web applications on the virtual server,
without challenging the user to authenticate to each application individually.</p>
</li>
<li><p>When the user logs out of one Web application (explicitly, or because
of session expiration), the user's sessions in all Web applications become invalid.
Thereafter, the user is required to log in to access a protected resource in any application.</p>
</li>
</ul>
<h5>Steps</h5><ol><li><p><b>In the Admin Console tree component, expand the Configuration node.</b></p></li>
<li><p><b>Expand the HTTP Service node.</b></p></li>
<li><p><b>Expand the Virtual Servers node, and select the virtual server to be configured
for single sign-on support.</b></p></li>
<li><p><b>Click Add Property.</b></p><p>A blank property entry is added to the
bottom of the list.</p>
</li>
<li><p><b>Enter <tt>sso-enable</tt> in the Name field.</b></p></li>
<li><p><b>Enter <tt>false</tt> in the Value field to disable, enter <tt>true</tt> to enable SSO.</b></p><p>SSO is enabled by default.</p>
</li>
<li><p><b>Add or change any other single sign-on properties by clicking Add Property
and configuring any applicable SSO properties. </b></p><p>Valid SSO properties for
virtual servers are discussed in the following table.</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Property Name                                  </p></th><th scope="col"><p>Description                                  </p></th><th scope="col"><p>Values                                  </p></th></tr>
<tr><td><p><tt>sso-max-inactive-seconds</tt></p></td><td><p>Number of seconds after which a user's single sign-on record becomes eligible
for purging, if no client activity is received. Access to any of the applications
on the virtual server keeps the single sign-on record active.</p></td><td><p>Default is 300 seconds (5 minutes). A higher value provides longer persistence
for users, but consumes more memory on the server.</p></td></tr>
<tr><td><p><tt>sso-reap-interval-seconds</tt></p></td><td><p>Interval (in seconds) between purges of expired single sign-on records.</p></td><td><p>Default is 60.</p></td></tr>
</table></li>
<li><p><b>Click Save.</b></p></li>
<li><p><b>Restart the Application Server if Restart Required displays in the console.</b></p></li>
</ol><A NAME="ablqq"></A><h2>Admin Console Tasks for Connector Connection Pools</h2>
<ul><li><p><A HREF="ablnk.html#ablqr">About Connector Connection Pools</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqs">About Security Maps</A></p>
</li>
</ul>
<A NAME="ablqr"></A><h3>About Connector Connection Pools</h3>
<p>A <i>connector module</i> (also called a resource adapter) enables
J2EE applications to interact with enterprise information systems (EIS). A <i>connector resource</i> provides an application with a connection to an EIS.
A <i>connector connection pool</i> is a group of reusable connections
for a particular EIS.</p>
<p><i>Security maps</i> enables the creation of a mapping between
J2EE users and groups and EIS users and groups. Use the Admin Console to create,
update, list, and delete security maps for connector connection pools.</p>
<p><hr size="1" noshade><p><b>Note - </b>In this context, users are referred to as principals. The enterprise information
system (EIS) is any system that holds the information. It can be a mainframe, a messaging
system, a database system, or an application.</p>
<hr size="1" noshade></p><p>See Also:</p>
<ul><li><p><A HREF="ablnk.html#ablqs">About Security Maps</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqt">To create a security map</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqu">To edit a security map</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqv">To delete a security map</A></p>
</li>
</ul>
<A NAME="ablqs"></A><h3>About Security Maps</h3>
<p>Use security maps to map the caller identity of the application (principal or
user group) to a suitable EIS principal in container-managed transaction-based scenarios.
When an application principal initiates a request to an EIS, the application server
first checks for an exact principal using the security map defined for the connector
connection pool to determine the mapped back end EIS principal. If there is no exact
match, then the application server uses the wild card character specification, if
any, to determine the mapped back end EIS principal. Security maps are used when an
application user needs to execute EIS operations that require to be executed as a
specific identity in the EIS.</p>
<p>Use the following procedures
in the Admin Console to manage security maps:</p>
<ul><li><p><A HREF="ablnk.html#ablqt">To create a security map</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqu">To edit a security map</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqv">To delete a security map</A></p>
</li>
</ul>
<p>See Also:</p>
<ul><li><p><A HREF="ablnk.html#ablqr">About Connector Connection Pools</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqt">To create a security map</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqu">To edit a security map</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqv">To delete a security map</A></p>
</li>
</ul>
<A NAME="ablqt"></A><h4><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To create a security map</h4>
<p>A security map for a connector connection pool maps application users and groups
(principals) to EIS principals. Use a security map when an application user needs
to execute EIS operations that require a specific identity in the EIS.</p>
<h5>Steps</h5><ol><li><p><b>Expand the Resources node</b></p></li>
<li><p><b>Expand the Connectors node.</b></p></li>
<li><p><b>Select the Connector Connection Pools node.</b></p></li>
<li><p><b>Select a Connector Connection Pool by selecting its name from the list
of current pools or create a new connector connection pool by selecting New from the
list of current pools. </b></p></li>
<li><p><b>Select the Security Maps page.</b></p></li>
<li><p><b>Click New to create a new Security Map.</b></p></li>
<li><p><b>On the Create Security Map page, enter the following properties.</b></p><ul><li><p><b>Name</b> -  Enter a name to be
used to reference this particular security map.</p>
</li>
<li><p><b>User Groups</b> -  The caller
identity of the application to be mapped to a suitable EIS principal. Enter a comma-separated
list of application-specific user groups, or enter the wild card asterisk (*) to indicate
all users or all user groups. Specify either the Principals or User Groups options,
but not both.</p>
</li>
<li><p><b>Principals</b> -  The caller
identity of the application to be mapped to a suitable EIS principal. Enter a comma-separated
list of application-specific principals, or enter the wild card asterisk (*) to indicate
all principals. Specify either the Principals or User Groups options, but not both.</p>
</li>
</ul>
</li>
<li><p><b>In the Backend Principal section, enter the following properties.</b></p><ul><li><p><b>Username</b> -  Enter the EIS
user name. The enterprise information system (EIS) is any system that holds the information.
It can be a mainframe, a messaging system, a database system, or an application.</p>
</li>
<li><p><b>Password</b> -  Enter the password
for the EIS user.</p>
</li>
</ul>
</li>
<li><p><b>Click OK to create the security map or Cancel to quit without saving.</b></p></li>
</ol><h5>More Information<br>Equivalent asadmin command</h5>
<p><tt>create-connector-security-map</tt></p>
<h5>See Also</h5><ul><li><p><A HREF="ablnk.html#ablqs">About Security Maps</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqr">About Connector Connection Pools</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqu">To edit a security map</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqv">To delete a security map</A></p>
</li>
</ul>
<A NAME="ablqu"></A><h4><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To edit a security map</h4>
<h5>Steps</h5><ol><li><p><b>Expand the Resources node.</b></p></li>
<li><p><b>Expand the Connectors node.</b></p></li>
<li><p><b>Select the Connector Connection Pools node. </b></p></li>
<li><p><b>Select a Connector Connection Pool by selecting its name from the list
of current pools.</b></p></li>
<li><p><b>Select the Security Maps page.</b></p></li>
<li><p><b>On the Security Maps page, select a security map from the list of current
security maps.</b></p></li>
<li><p><b>On the Edit Security Map page, modify the following properties where needed.</b></p><ul><li><p><b>User Groups</b> -  The caller
identity of the application to be mapped to a suitable EIS principal. Enter a comma-separated
list of application-specific user groups, or enter the wild card asterisk (*) to indicate
all users or all user groups. Specify either the Principals or User Groups options,
but not both.</p>
</li>
<li><p><b>Principals</b> -  The caller
identity of the application to be mapped to a suitable EIS principal. Enter a comma-separated
list of application-specific principals, or enter the wild card asterisk (*) to indicate
all principals. Specify either the Principals or User Groups options, but not both.</p>
</li>
</ul>
</li>
<li><p><b>In the Backend Principal section, enter the following properties.</b></p><ul><li><p><b>Username</b> -  Enter the EIS
user name. The enterprise information system (EIS) is any system that holds the information.
It can be a mainframe, a messaging system, a database system, or an application.</p>
</li>
<li><p><b>Password</b> -  Enter the password
for the EIS user.</p>
</li>
</ul>
</li>
<li><p><b>Click Save to save the changes to the security map.</b></p></li>
</ol><h5>More Information<br>Helpful asadmin commands</h5>
<p><tt>list-connector-security-maps</tt> and <tt>update-connector-security-maps</tt></p>
<h5>See Also</h5><ul><li><p><A HREF="ablnk.html#ablqr">About Connector Connection Pools</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqs">About Security Maps</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqt">To create a security map</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqv">To delete a security map</A></p>
</li>
</ul>
<A NAME="ablqv"></A><h4><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To delete a security map</h4>
<h5>Steps</h5><ol><li><p><b>Expand the Resources node.</b></p></li>
<li><p><b>Expand the Connectors node.</b></p></li>
<li><p><b>Select the Connector Connection Pools node.</b></p></li>
<li><p><b>Select a Connector Connection Pool by selecting its name from the list
of current pools.</b></p></li>
<li><p><b>Select the Security Maps page.</b></p></li>
<li><p><b>On the Security Maps page, click the checkbox to the left of the name
of the security map to be deleted.</b></p></li>
<li><p><b>Click Delete.</b></p></li>
</ol><h5>More Information<br>Equivalent asadmin command</h5>
<p><tt>delete-connector-security-map</tt></p>
<h5>See Also</h5><ul><li><p><A HREF="ablnk.html#ablqr">About Connector Connection Pools</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqs">About Security Maps</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqt">To create a security map</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqu">To edit a security map</A></p>
</li>
</ul>
<A NAME="ablqw"></A><h2>Working with Certificates and SSL</h2>
<ul><li><p><A HREF="ablnk.html#ablqx">About Certificate Files</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqy">To change the location of certificate files</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqz">Using Java Secure Socket Extension (JSSE) Tools</A></p>
</li>
</ul>
<A NAME="ablqx"></A><h3>About Certificate Files</h3>
<p>Installation of the Application Server generates a digital certificate in JSSE
(Java Secure Socket Extension)           format
suitable for internal testing. By default, the Application Server stores its certificate
information           in two files in
the <i>domain-dir</i><tt>/config</tt> directory:</p>
<ul><li><p><b>Keystore file</b>, <tt>keystore.jks</tt>, contains
the Application Server's certificate, including its private key. The keystore file
is protected with a password, initially <tt>changeit</tt>.
Change the password using  <tt>keytool</tt>.
For more information about   <tt>keytool</tt>, read   <A HREF="ablnk.html#ablra">Using the keytool Utility</A>.</p>
<p>Each keystore entry has a unique alias. After installation, the Application Server keystore
has a single entry with alias <tt>s1as</tt>.</p>
</li>
<li><p><b>Truststore file</b>, <tt>cacerts.jks</tt>, contains
the Application Server's trusted certificates, including public keys for other entities.
For a trusted certificate, the server has confirmed that the public key in the certificate
belongs to the certificate's owner. Trusted certificates generally include those
of certification authorities (CAs).</p>
<p>In the Platform Edition, on the server
side, the Application Server uses the JSSE format, which uses <tt>keytool</tt> to
manage certificates and key stores. In the Enterprise Edition, on the server side,
the Application Server uses NSS, which uses <tt>certutil</tt> to manage the NSS
database which stores private keys and certificates. In both editions, the client
side (appclient or stand-alone), uses the JSSE format.</p>
<p>By default, the Application Server is
configured with a keystore and truststore that will work with the example applications
and for development purposes. For production purposes, you may wish to change the
certificate alias, add other certificates to the truststore, or change the name and/or
location of the keystore and truststore files.</p>
</li>
</ul>
<p>See also:</p>
<ul><li><p><A HREF="ablnk.html#ablqy">To change the location of certificate files</A></p>
</li>
</ul>
<A NAME="ablqy"></A><h4><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To change the location of certificate files</h4>
<A NAME="indexterm-259"></A><A NAME="indexterm-260"></A><p>The keystore and truststore files provided for development are stored in the <i>domain-dir</i><tt>/config</tt> directory.</p>
<h5>Steps</h5><ol><li><p><b>In the Admin Console tree, select the Application Server node.</b></p></li>
<li><p><b>Select JVM Settings.</b></p></li>
<li><p><b>Click the JVM Options tab.</b></p></li>
<li><p><b>On the JVM Options page, add or modify the following values in the Value
field to reflect the new location of the certificate files:</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre>-Djavax.net.ssl.keyStore=${com.sun.aas.instanceRoot}/<i>path</i>/<i>ks-name</i>
-Djavax.net.ssl.trustStore=${com.sun.aas.instanceRoot}/<i>path</i>/<i>ts-name</i></pre>
</td></table><br><p>where <i>ks-name</i> is the keystore
file name and <i>ts-name</i> is the trust store file name.</p>
</li>
<li><p><b>Click Save.</b></p></li>
<li><p><b>Restart the Application Server if Restart Required displays in the console.</b></p></li>
</ol><h5>See Also</h5><ul><li><p><A HREF="ablnk.html#ablqx">About Certificate Files</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqz">Using Java Secure Socket Extension (JSSE) Tools</A></p>
</li>
</ul>
<A NAME="ablqz"></A><h3>Using Java Secure Socket Extension (JSSE) Tools</h3>
<p>Use <tt>keytool</tt> to set up and work with JSSE (Java Secure Socket
Extension) digital certificates. In the Platform Edition, the Application Server uses the
JSSE format on the server side to manage certificates and key stores. In both the
Platform Edition and Enterprise Edition, the client side (appclient or stand-alone)
uses the JSSE format.</p>
<p>The J2SE SDK ships with <tt>keytool</tt>, which enables the administrator
to administer public/private key pairs and associated certificates. It also enables
users to cache the public keys (in the form of certificates) of their communicating
peers.</p>
<p>To run <tt>keytool</tt>, the shell environment must be configured
so that the J2SE <tt>/bin</tt> directory is in the path, or the full path
to the tool must be present on the command line. For more information on <tt>keytool</tt>, see the <tt>keytool</tt> documentation at <A HREF="http://java.sun.com/j2se/1.5.0/docs/tooldocs/solaris/keytool.html">http://java.sun.com/j2se/1.5.0/docs/tooldocs/solaris/keytool.html</A>.</p>
<A NAME="ablra"></A><h4>Using the keytool Utility</h4>
<p>The following examples demonstrate usage related to certificate handling using
JSSE tools:</p>
<ul><li><p>Create a self-signed certificate in a keystore of type JKS using an
RSA key algorithm. RSA is public-key encryption technology developed by RSA Data Security,
Inc. The acronym stands for Rivest, Shamir, and Adelman, the inventors of the technology.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>keytool  -genkey -noprompt -trustcacerts -keyalg RSA -alias ${cert.alias} 
-dname  ${dn.name} -keypass ${key.pass} -keystore ${keystore.file} 
-storepass ${keystore.pass}</pre>
</td></table><br><p>Another example of creating a certificate is shown in <A HREF="ablnk.html#ablrb">To generate a certificate using the <tt>keytool</tt> utility</A>.</p>
</li>
<li><p>Create a self-signed certificate in a keystore of type JKS using the
default key algorithm.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>keytool -genkey -noprompt -trustcacerts -alias ${cert.alias} -dname  
${dn.name} -keypass ${key.pass} -keystore ${keystore.file} -storepass 
${keystore.pass}</pre>
</td></table><br><p>An example of signing a certificate is shown in <A HREF="ablnk.html#ablrc">To sign a digital certificate using the <tt>keytool</tt> utility</A></p>
</li>
<li><p>Display available certificates from a keystore of type JKS.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>keytool -list -v  -keystore ${keystore.file} -storepass ${keystore.pass}</pre>
</td></table><br></li>
<li><p>Display certificate information from a keystore of type JKS.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>keytool  -list -v  -alias ${cert.alias} -keystore ${keystore.file} 
-storepass ${keystore.pass}</pre>
</td></table><br></li>
<li><p>Import an RFC/text-formatted certificate into a JKS store. Certificates
are often stored using the printable encoding format defined by the Internet RFC (Request
for Comments) 1421 standard instead of their binary encoding. This certificate format,
also known as <i>Base 64 encoding</i>, facilitates exporting certificates
to other applications by email or through some other mechanism.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>keytool -import -noprompt -trustcacerts -alias ${cert.alias} -file 
${cert.file} -keystore ${keystore.file} -storepass ${keystore.pass}</pre>
</td></table><br></li>
<li><p>Export a certificate from a keystore of type JKS in PKCS7 format.
The reply format defined by the Public Key Cryptography Standards #7, Cryptographic
Message Syntax Standard, includes the supporting certificate chain in addition to
the issued certificate.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>keytool  -export -noprompt  -alias ${cert.alias} -file ${cert.file} 
-keystore ${keystore.file} -storepass ${keystore.pass}</pre>
</td></table><br></li>
<li><p>Export a certificate from a keystore of type JKS in RFC/text format.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>keytool  -export -noprompt -rfc  -alias ${cert.alias} -file 
${cert.file} -keystore ${keystore.file} -storepass ${keystore.pass}</pre>
</td></table><br></li>
<li><p>Delete a certificate from a keystore of type JKS.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>keytool  -delete -noprompt -alias ${cert.alias}  -keystore ${keystore.file} 
-storepass ${keystore.pass}</pre>
</td></table><br><p>Another example of deleting a certificate from a keystore is shown in <A HREF="ablnk.html#ablre">Deleting a Certificate Using the <tt>keytool</tt> Utility</A></p>
</li>
</ul>
<p>See also:</p>
<ul><li><p><A HREF="ablnk.html#ablrb">To generate a certificate using the <tt>keytool</tt> utility</A></p>
</li>
<li><p><A HREF="ablnk.html#ablrc">To sign a digital certificate using the <tt>keytool</tt> utility</A></p>
</li>
<li><p><A HREF="ablnk.html#ablre">Deleting a Certificate Using the <tt>keytool</tt> Utility</A></p>
</li>
</ul>
<A NAME="ablrb"></A><h4><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To generate a certificate using the <tt>keytool</tt> utility</h4>
<p>Use <tt>keytool</tt> to generate, import, and export certificates.
By default, <tt>keytool</tt> creates a keystore file in the directory where
it is run.</p>
<h5>Steps</h5><ol><li><p><b>Change to the directory where the certificate is to be run.</b></p><p>Always generate the certificate in the directory containing the keystore and truststore
files, by default <i>domain-dir</i><tt>/config</tt>. For information on changing
the location of these files, see <A HREF="ablnk.html#ablqy">To change the location of certificate files</A>.</p>
</li>
<li><p><b>Enter the following <tt>keytool</tt> command to generate the
certificate in the keystore file, <tt>keystore.jks</tt>:</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre>keytool -genkey -alias <i>keyAlias</i>-keyalg RSA
 -keypass changeit
 -storepass changeit
-keystore keystore.jks</pre>
</td></table><br><p>Use any unique name as your <i>keyAlias</i>. If you have
changed the keystore or private key password from their default, then substitute the
new password for <tt>changeit</tt> in the above command.</p>
<p>A prompt
appears that asks for your name, organization, and other information that <tt>keytool</tt> uses to generate the certificate.</p>
</li>
<li><p><b>Enter the following <tt>keytool</tt> command to export the generated
certificate to the file <tt>server.cer</tt> (or <tt>client.cer</tt> if
you prefer):</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre>keytool -export -alias <i>keyAlias</i>-storepass changeit
 -file server.cer
 -keystore keystore.jks</pre>
</td></table><br></li>
<li><p><b>If a certificate signed by a certificate authority is required, see <A HREF="ablnk.html#ablrc">To sign a digital certificate using the <tt>keytool</tt> utility</A>.</b></p></li>
<li><p><b>To create the truststore file <tt>cacerts.jks</tt> and add the
certificate to the truststore, enter the following <tt>keytool</tt> command:</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre>keytool -import -v -trustcacerts
-alias <i>keyAlias</i>
 -file server.cer
-keystore cacerts.jks
 -keypass changeit</pre>
</td></table><br><p>If you have changed the keystore or private key password from their default,
then substitute the new password for <tt>changeit</tt> in the above command.</p>
<p>The tool displays information about the certificate and prompts whether
you want to trust the certificate.</p>
</li>
<li><p><b>Type <tt>yes</tt>, then press Enter.</b></p><p>Then <tt>keytool</tt> displays something like this:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>Certificate was added to keystore
[Saving cacerts.jks]</pre>
</td></table><br></li>
<li><p><b>Restart the Application Server.</b></p></li>
</ol><h5>See Also</h5><ul><li><p><A HREF="ablnk.html#ablqy">To change the location of certificate files</A></p>
</li>
<li><p><A HREF="ablnk.html#ablra">Using the keytool Utility</A></p>
</li>
<li><p><A HREF="ablnk.html#ablrc">To sign a digital certificate using the <tt>keytool</tt> utility</A></p>
</li>
<li><p><A HREF="ablnk.html#ablre">Deleting a Certificate Using the <tt>keytool</tt> Utility</A></p>
</li>
</ul>
<A NAME="ablrc"></A><h4><IMG border="0" alt="Procedure" src="graphics/procedure.gif">To sign a digital certificate using the <tt>keytool</tt> utility</h4>
<p>After creating a digital certificate, the owner must sign it to prevent forgery.
E-commerce sites, or those for which authentication of identity is important can purchase
a certificate from a well-known Certificate Authority (CA). If authentication is not
a concern, for example if private secure communications is all that is required, save
the time and expense involved in obtaining a CA certificate and use a self-signed
certificate.</p>
<h5>Steps</h5><ol><li><p><b>Follow the instructions on the CA's Web site for generating certificate
key pairs.</b></p></li>
<li><p><b>Download the generated certificate key pair.</b></p><p>Save the certificate
in the directory containing the keystore and truststore files, by default <i>domain-dir</i><tt>/config</tt> directory. See <A HREF="ablnk.html#ablqy">To change the location of certificate files</A>.</p>
</li>
<li><p><b>In your shell, change to the directory containing the certificate.</b></p></li>
<li><p><b>Use <tt>keytool</tt> to import the certificate into the local
keystore and, if necessary, the local truststore.</b></p><table cellpadding="4" border="1" cols="1" width="100%"><td><pre>keytool -import -v -trustcacerts
-alias <i>keyAlias</i>
 -file server.cer
-keystore cacerts.jks
 -keypass changeit
-storepass changeit</pre>
</td></table><br><p>If the keystore or private key password is not the default password, then substitute
the new password for <tt>changeit</tt> in the above command.</p>
</li>
<li><p><b>Restart the Application Server.</b></p></li>
</ol><h5>See Also</h5><ul><li><p><A HREF="ablnk.html#ablqx">About Certificate Files</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqy">To change the location of certificate files</A></p>
</li>
<li><p><A HREF="ablnk.html#ablra">Using the keytool Utility</A></p>
</li>
<li><p><A HREF="ablnk.html#ablrb">To generate a certificate using the <tt>keytool</tt> utility</A></p>
</li>
<li><p><A HREF="ablnk.html#ablre">Deleting a Certificate Using the <tt>keytool</tt> Utility</A></p>
</li>
</ul>
<A NAME="ablre"></A><h4>Deleting a Certificate Using the <tt>keytool</tt> Utility</h4>
<p>To delete an existing certificate, use the <tt>keytool -delete</tt> command,
for example:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>keytool -delete
 -alias <i>keyAlias</i>
 -keystore <i>keystore-name</i>
 -storepass <i>password</i></pre>
</td></table><br><p>For a complete list of possible options for the <tt>-delete</tt> command,
refer to the <tt>keytool</tt> documentation at <A HREF="http://java.sun.com/j2se/1.5.0/docs/tooldocs/solaris/keytool.html">http://java.sun.com/j2se/1.5.0/docs/tooldocs/solaris/keytool.html</A>.</p>
<p>See Also:</p>
<ul><li><p><A HREF="ablnk.html#ablqx">About Certificate Files</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqy">To change the location of certificate files</A></p>
</li>
<li><p><A HREF="ablnk.html#ablqz">Using Java Secure Socket Extension (JSSE) Tools</A></p>
</li>
<li><p><A HREF="ablnk.html#ablra">Using the keytool Utility</A></p>
</li>
<li><p><A HREF="ablnk.html#ablrb">To generate a certificate using the <tt>keytool</tt> utility</A></p>
</li>
<li><p><A HREF="ablnk.html#ablrc">To sign a digital certificate using the <tt>keytool</tt> utility</A></p>
</li>
</ul>
<A NAME="ablrj"></A><h2>Further Information</h2>
<ul><li><p>The Java 2 Standard Edition discussion of security can be viewed from <A HREF="http://java.sun.com/j2se/1.5.0/docs/guide/security/index.html">http://java.sun.com/j2se/1.5.0/docs/guide/security/index.html</A>.</p>
</li>
<li><p>The <i>J2EE 1.4 Tutorial</i> chapter titled <i>Security</i> can be viewed from <A HREF="http://java.sun.com/j2ee/1.4/docs/tutorial/doc/index.html">http://java.sun.com/j2ee/1.4/docs/tutorial/doc/index.html</A>.</p>
</li>
<li><p>The<i> Administration Guide</i> chapter titled <A HREF="ablrk.html#ablrk">Chapter&nbsp;10, Configuring Message Security</A>.</p>
</li>
<li><p>The<i> Developer's Guide</i> chapter titled "Securing
Applications."</p>
</li>
</ul>

            <!--stopindex-->
<br>
<A HREF="ablms.html">Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="ablrk.html">Next</A>
</body>
</html>

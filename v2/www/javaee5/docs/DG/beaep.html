<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html><!-- GenHTML@12751-->
<head>
<META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=iso-8859-1">
<!-- ident	"%Z%%M%	%I%	%E% SMI" -->

    <title>3.&nbsp;&nbsp;The asant Utility
    </title>
</head>
<body>
<font style="color: red; font-family:arial,helvetica,sans-serif; font-size:12pt; font-weight:bold}">Not For Publication</font>&nbsp;&nbsp;&nbsp;<br>Glassfish Review Draft<br> </td>

<A href="toc.html">Sun Java System Application Server Platform Edition 9.0 Developer's Guide</A>&nbsp;<br>
<A HREF="beade.html">Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="beafc.html">Next</A><br>
            <!--startindex--><A NAME="beaep"></A><b>Chapter&nbsp;3</b><h1>The asant Utility</h1>
<A NAME="indexterm-68"></A><A NAME="indexterm-69"></A><A NAME="indexterm-70"></A><p>Apache Ant 1.6.2 is provided with Application Server and can be launched
from the <tt>bin</tt> directory using the command <tt>asant</tt>. The Application Server also provides server-specific tasks, which are
described in this section.</p>
<p>Make sure you have done these things before using <tt>asant</tt>:</p>
<ul><li><p><A NAME="indexterm-71"></A>Include <i>install-dir</i><tt>/bin</tt> in the PATH environment
variable (<tt>/usr/sfw/bin</tt> for Sun Java Enterprise System on
Solaris). The Ant script provided with the Application Server, <tt>asant</tt>,
is located in this directory. For details on how to use <tt>asant</tt>,
see the <i><A HREF="http://docs.sun.com/app/docs/doc/819-3662"><i>Sun Java System Application Server Platform Edition 9.0 2006Q1 Reference Manual</i></A></i> and the sample applications
documentation in the <i>install-dir</i><tt>/samples/docs/ant.html</tt> file.</p>
</li>
<li><p>If you are executing platform-specific applications, such
as the <tt>exec</tt> or <tt>cvs</tt> task, the ANT_HOME
environment variable must be set to the Ant installation directory.<A NAME="indexterm-72"></A></p>
<ul><li><p>The ANT_HOME environment variable for Sun Java Enterprise
System must include the following:</p>
<ul><li><p><tt>/usr/sfw/bin</tt> - the Ant binaries (shell
scripts)</p>
</li>
<li><p><tt>/usr/sfw/doc/ant</tt> - HTML documentation</p>
</li>
<li><p><tt>/usr/sfw/lib/ant</tt> - Java classes that implement
Ant</p>
</li>
</ul>
</li>
<li><p><A NAME="indexterm-73"></A>The ANT_HOME environment variable for all other platforms is <i>install-dir</i><tt>/lib</tt>.</p>
</li>
</ul>
</li>
<li><p>Set up your password file. The argument for the <tt>passworfile</tt> option of each Ant task is a file. This file contains
the password attribute name and its value, in the following format:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>AS_ADMIN_PASSWORD=<i>password</i></pre>
</td></table><br><p>For more information about password files, see the <i><A HREF="http://docs.sun.com/app/docs/doc/819-3662"><i>Sun Java System Application Server Platform Edition 9.0 2006Q1 Reference Manual</i></A></i>.</p>
</li>
</ul>
<p>This section covers the following <tt>asant</tt>-related topics:</p>
<ul><li><p><A HREF="beaep.html#beaeq">asant Tasks for Sun Java System Application Server</A></p>
</li>
<li><p><A HREF="beaep.html#beaey">Reusable Subelements</A></p>
</li>
</ul>
<p>For more information about Ant, see the Apache Software Foundation web
site at <A HREF="http://ant.apache.org/">http://ant.apache.org/</A>.</p>
<p>For information about standard Ant tasks, see the Ant documentation
at <A HREF="http://antinstaller.sourceforge.net/manual/manual/">http://antinstaller.sourceforge.net/manual/manual/</A>.</p>
<A NAME="beaeq"></A><h2>asant Tasks for Sun Java System Application Server</h2>
<p>Use the <A NAME="indexterm-74"></A><A NAME="indexterm-75"></A><tt>asant</tt> tasks provided by the Application Server for
assembling, deploying, and undeploying modules and applications, and for configuring
the server. The tasks are as follows:</p>
<ul><li><p><A HREF="beaep.html#beaer">sun-appserv-deploy</A></p>
</li>
<li><p><A HREF="beaep.html#beaes">sun-appserv-undeploy</A></p>
</li>
<li><p><A HREF="beaep.html#beaeu">sun-appserv-component</A></p>
</li>
<li><p><A HREF="beaep.html#beaev">sun-appserv-admin</A></p>
</li>
<li><p><A HREF="beaep.html#beaew">sun-appserv-jspc</A></p>
</li>
<li><p><A HREF="beaep.html#beaex">sun-appserv-update</A></p>
</li>
</ul>
<A NAME="beaer"></A><h3>sun-appserv-deploy</h3>
<A NAME="indexterm-76"></A><A NAME="indexterm-77"></A><A NAME="indexterm-78"></A><p>Deploys any of the following.</p>
<ul><li><p>Enterprise application (EAR file)</p>
</li>
<li><p>Web application (WAR file)</p>
</li>
<li><p>Enterprise Java Bean (EJB-JAR file)</p>
</li>
<li><p>Enterprise connector (RAR file)</p>
</li>
<li><p>Application client</p>
</li>
</ul>
<A NAME="fvyic"></A><h4>Subelements</h4>
<p>The following table describes subelements for the <tt>sun-appserv-deploy</tt> task. These are objects upon which this task acts.</p>
<A NAME="fvydc"></A><p><b>Table 3-1 </b><tt>sun-appserv-deploy</tt> Subelements</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Element                      </p></th><th scope="col"><p>Description                      </p></th></tr>
<tr><td><p><A HREF="beaep.html#beafa">component</A>&nbsp;</p></td><td><p>A component to be deployed.</p></td></tr>
<tr><td><p><A HREF="beaep.html#beafb">fileset</A>&nbsp;</p></td><td><p>A set of component files that match specified parameters.</p></td></tr>
</table><A NAME="fvyby"></A><h4>Attributes</h4>
<p>The following table describes attributes for the <tt>sun-appserv-deploy</tt> task.</p>
<A NAME="fvydb"></A><p><b>Table 3-2 </b><tt>sun-appserv-deploy</tt> Attributes</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Attribute                         </p></th><th scope="col"><p>Default                         </p></th><th scope="col"><p>Description                         </p></th></tr>
<tr><td><p><A NAME="indexterm-79"></A><tt>file</tt></p></td><td><p>none</p></td><td><p>(optional if a <tt>component</tt> or <tt>fileset</tt> subelement
is present, otherwise required) The component to deploy. If this attribute
refers to a file, it must be a valid archive. If this attribute refers to
a directory, it must contain a valid archive in which all components have
been exploded. If <tt>upload</tt> is set to <tt>false</tt>,
this must be an absolute path on the server machine.</p></td></tr>
<tr><td><p><tt>name</tt></p></td><td><p>file name without extension</p></td><td><p>(optional) The display name for the component being deployed.</p></td></tr>
<tr><td><p><A NAME="indexterm-80"></A><tt>type</tt></p></td><td><p>determined by extension</p></td><td><p>(optional) Deprecated.</p></td></tr>
<tr><td><p><A NAME="indexterm-81"></A><tt>force</tt></p></td><td><p><tt>true</tt></p></td><td><p>(optional) If <tt>true</tt>, the component is overwritten
if it already exists on the server. If <tt>false</tt>, <tt>sun-appserv-deploy</tt> fails if the component exists.</p></td></tr>
<tr><td><p><A NAME="indexterm-82"></A><tt>retrievestubs</tt></p></td><td><p>client stubs not saved</p></td><td><p>(optional) The directory where client <A NAME="indexterm-83"></A>stubs are saved. This attribute is inherited by nested <tt>component</tt> elements.</p></td></tr>
<tr><td><p><A NAME="indexterm-84"></A><A NAME="indexterm-85"></A><tt>precompilejsp</tt></p></td><td><p><tt>false</tt></p></td><td><p>(optional) If <tt>true</tt>, all JSP files found in an enterprise
application (<tt>.ear</tt>) or web application (<tt>.war</tt>)
are precompiled. This attribute is ignored for other component types. This
attribute is inherited by nested <tt>component</tt> elements.</p></td></tr>
<tr><td><p><A NAME="indexterm-86"></A><tt>verify</tt></p></td><td><p><tt>false</tt></p></td><td><p>(optional) If <tt>true</tt>, syntax and semantics for all
deployment descriptors are automatically verified for correctness. This attribute
is inherited by nested <tt>component</tt> elements.</p></td></tr>
<tr><td><p><A NAME="indexterm-87"></A><tt>contextroot</tt></p></td><td><p>file name without extension</p></td><td><p>(optional) The context root for a web module (WAR file). This attribute
is ignored if the component is not a WAR file.</p></td></tr>
<tr><td><p><A NAME="indexterm-88"></A><tt>dbvendorname</tt></p></td><td><p><tt>sun-ejb-jar.xml</tt> entry</p></td><td><p>(optional) The name of the database vendor for which tables can be created.
Allowed values are <tt>db2</tt>, <tt>mssql</tt>, <tt>oracle</tt>, <tt>derby</tt>, and <tt>sybase</tt>,
case-insensitive.</p><p>If not specified, the value of the <tt>database-vendor-name</tt> attribute
in <tt>sun-ejb-jar.xml</tt> is used.</p><p>If no value is specified, a connection is made to the resource specified
by the <tt>jndi-name</tt> subelement of the <tt>cmp-resource</tt> element in the <tt>sun-ejb-jar.xml</tt> file, and the
database vendor name is read. If the connection cannot be established, or
if the value is not recognized, SQL-92 compliance is presumed.</p><p>For details, see <A HREF="beajj.html#beajx">Generation Options</A>.</p></td></tr>
<tr><td><p><A NAME="indexterm-89"></A><tt>createtables</tt></p></td><td><p><tt>sun-ejb-jar.xml</tt> entry</p></td><td><p>(optional) If <tt>true</tt>, causes database tables to be
created for beans that need them. If <tt>false</tt>, does not create
tables. If not specified, the value of the <tt>create-tables-at-deploy</tt> attribute in <tt>sun-ejb-jar.xml</tt> is used.</p><p>For details, see <A HREF="beajj.html#beajx">Generation Options</A>.</p></td></tr>
<tr><td><p><A NAME="indexterm-90"></A><tt>dropandcreatetables</tt></p></td><td><p><tt>sun-ejb-jar.xml</tt> entry</p></td><td><p>(optional) If <tt>true</tt>, and if tables were automatically
created when this application was last deployed, tables from the earlier deployment
are dropped and fresh ones are created.</p><p>If <tt>true</tt>, and if tables were <i>not</i> automatically
created when this application was last deployed, no attempt is made to drop
any tables. If tables with the same names as those that would have been automatically
created are found, the deployment proceeds, but a warning indicates that tables
could not be created.</p><p>If <tt>false</tt>, settings of <tt>create-tables-at-deploy</tt> or <tt>drop-tables-at-undeploy</tt> in the <tt>sun-ejb-jar.xml</tt> file are overridden.</p><p>For details, see <A HREF="beajj.html#beajx">Generation Options</A>.</p></td></tr>
<tr><td><p><A NAME="indexterm-91"></A><tt>uniquetablenames</tt></p></td><td><p><tt>sun-ejb-jar.xml</tt> entry</p></td><td><p>(optional) If <tt>true</tt>, specifies that table names are
unique within each application server domain. If not specified, the value
of the <tt>use-unique-table-names</tt> property in <tt>sun-ejb-jar.xml</tt> is used.</p><p>For details, see <A HREF="beajj.html#beajx">Generation Options</A>.</p></td></tr>
<tr><td><p><A NAME="indexterm-92"></A><tt>enabled</tt></p></td><td><p><tt>true</tt></p></td><td><p>(optional) If <tt>true</tt>, enables the component.</p></td></tr>
<tr><td><p><A NAME="indexterm-93"></A><tt>deploymentplan</tt></p></td><td><p>none</p></td><td><p>(optional) A deployment plan is a JAR file containing Sun-specific descriptors.
Use this attribute when deploying an EAR file that lacks Sun-specific descriptors.</p></td></tr>
<tr><td><p><A NAME="indexterm-94"></A><tt>upload</tt></p></td><td><p><tt>true</tt></p></td><td><p>(optional) If <tt>true</tt>, the component is transferred
to the server for deployment. If the component is being deployed on the local
machine, set upload to <tt>false</tt> to reduce deployment time.
If a directory is specified for deployment, upload must be <tt>false</tt>.</p></td></tr>
<tr><td><p><A NAME="indexterm-95"></A><tt>virtualservers</tt></p></td><td><p>default virtual server only</p></td><td><p>(optional) A comma-separated list of virtual servers to be deployment
targets. This attribute applies only to application (<tt>.ear</tt>)
or web (<tt>.war</tt>) components and is ignored for other component
types.</p></td></tr>
<tr><td><p><A NAME="indexterm-96"></A><tt>user</tt></p></td><td><p><tt>admin</tt></p></td><td><p>(optional) The user name used when logging into the application server.</p></td></tr>
<tr><td><p><tt>password</tt></p></td><td><p>none</p></td><td><p>(optional) Deprecated, use <tt>passwordfile</tt> instead.
The password used when logging into the application server.</p></td></tr>
<tr><td><p><tt>passwordfile</tt></p></td><td><p>none</p></td><td><p>(optional) File containing passwords. The password from this file is
retrieved for communication with the application server.
If both <tt>password</tt> and <tt>passwordfile</tt> are
specified, <tt>passwordfile</tt> takes precedence.</p></td></tr>
<tr><td><p><A NAME="indexterm-97"></A><tt>host</tt></p></td><td><p><tt>localhost</tt></p></td><td><p>(optional) Target server. When deploying to a remote server, use the
fully qualified host name.</p></td></tr>
<tr><td><p><A NAME="indexterm-98"></A><tt>port</tt></p></td><td><p><tt>4848</tt></p></td><td><p>(optional) The administration port on the target server.</p></td></tr>
<tr><td><p><A NAME="indexterm-99"></A><tt>asinstalldir</tt></p></td><td><p>see description</p></td><td><p>(optional) The installation directory for the local Application Server installation,
which is used to find the administrative classes. If not specified, the command
checks to see if the <tt>asinstalldir</tt> parameter has been set.
Otherwise, administrative classes must be in the system classpath.</p></td></tr>
<tr><td><p><A NAME="indexterm-100"></A><tt>sunonehome</tt></p></td><td><p>see description</p></td><td><p>(optional) Deprecated. Use <tt>asinstalldir</tt> instead.</p></td></tr>
</table><A NAME="fvykh"></A><h4>Examples</h4>
<p>Here is a simple application deployment script with many implied attributes:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;sun-appserv-deploy
file="${assemble}/simpleapp.ear"
passwordfile="${passwordfile}" /></pre>
</td></table><br><p>Here is an equivalent script showing all the implied attributes:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;sun-appserv-deploy
 file="${assemble}/simpleapp.ear"
 name="simpleapp"
 force="true"
 precompilejsp="false"
 verify="false"
 upload="true"
 user="admin"
 passwordfile="${passwordfile}"
 host="localhost"
 port="4848"
 asinstalldir="${asinstalldir}" /></pre>
</td></table><br><p>This example deploys multiple components to the same Application Server running
on a remote server:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;sun-appserv-deploy passwordfile="${passwordfile}" host="greg.sun.com"
		 asinstalldir="/opt/sun" >
 &lt;component file="${assemble}/simpleapp.ear"/>
 &lt;component file="${assemble}/simpleservlet.war"
	 contextroot="test"/>
 &lt;component file="${assemble}/simplebean.jar"/>
&lt;/sun-appserv-deploy></pre>
</td></table><br><p>This example deploys the same components as the previous example because
the three components match the <tt>fileset</tt> criteria, but note
that it's not possible to set some component-specific attributes. All
component-specific attributes (<tt>name</tt> and <tt>contextroot</tt>) use their default values.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;sun-appserv-deploy passwordfile="${passwordfile}" host="greg.sun.com"
		 asinstalldir="/opt/sun" >
 &lt;fileset dir="${assemble}" includes="**/*.?ar" />
&lt;/sun-appserv-deploy></pre>
</td></table><br><A NAME="beaes"></A><h3>sun-appserv-undeploy</h3>
<A NAME="indexterm-101"></A><p><A NAME="indexterm-102"></A>Undeploys any of the following.</p>
<ul><li><p>Enterprise application (EAR file)</p>
</li>
<li><p>Web application (WAR file)</p>
</li>
<li><p>Enterprise Java Bean (EJB-JAR file)</p>
</li>
<li><p>Enterprise connector (RAR file)</p>
</li>
<li><p>Application client</p>
</li>
</ul>
<A NAME="fvydf"></A><h4>Subelements</h4>
<p>The following table describes subelements for the <tt>sun-appserv-undeploy</tt> task. These are objects upon which this task acts.</p>
<A NAME="fvyfm"></A><p><b>Table 3-3 </b><tt>sun-appserv-undeploy</tt> Subelements</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Element                      </p></th><th scope="col"><p>Description                      </p></th></tr>
<tr><td><p><A HREF="beaep.html#beafa">component</A>&nbsp;</p></td><td><p>A component to be deployed.</p></td></tr>
<tr><td><p><A HREF="beaep.html#beafb">fileset</A>&nbsp;</p></td><td><p>A set of component files that match specified parameters.</p></td></tr>
</table><A NAME="fvxzu"></A><h4>Attributes</h4>
<p>The following table describes attributes for the <tt>sun-appserv-undeploy</tt> task.</p>
<A NAME="fvymi"></A><p><b>Table 3-4 </b><tt>sun-appserv-undeploy</tt> Attributes</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Attribute                         </p></th><th scope="col"><p>Default                         </p></th><th scope="col"><p>Description                         </p></th></tr>
<tr><td><p><tt>name</tt></p></td><td><p>file name without extension</p></td><td><p>(optional if a <tt>component</tt> or <tt>fileset</tt> subelement
is present or the <tt>file</tt> attribute is specified, otherwise
required) The display name for the component being undeployed.</p></td></tr>
<tr><td><p><A NAME="indexterm-103"></A><tt>file</tt></p></td><td><p>none</p></td><td><p>(optional) The component to undeploy. If this attribute refers to a
file, it must be a valid archive. If this attribute refers to a directory,
it must contain a valid archive in which all components have been exploded.</p></td></tr>
<tr><td><p><A NAME="indexterm-104"></A><tt>type</tt></p></td><td><p>determined by extension</p></td><td><p>(optional) Deprecated.</p></td></tr>
<tr><td><p><A NAME="indexterm-105"></A><tt>droptables</tt></p></td><td><p><tt>sun-ejb-jar.xml</tt> entry</p></td><td><p>(optional) If <tt>true</tt>, causes database tables that were
automatically created when the bean(s) were last deployed to be dropped when
the bean(s) are undeployed. If <tt>false</tt>, does not drop tables.</p><p>If not specified, the value of the <tt>drop-tables-at-undeploy</tt> attribute in <tt>sun-ejb-jar.xml</tt> is used.</p><p>For details, see <A HREF="beajj.html#beajx">Generation Options</A>.</p></td></tr>
<tr><td><p><A NAME="indexterm-106"></A><tt>cascade</tt></p></td><td><p><tt>false</tt></p></td><td><p>(optional) If <tt>true</tt>, deletes all connection pools
and connector resources associated with the resource adapter being undeployed.</p><p>If <tt>false</tt>, undeployment fails if any pools or resources
are still associated with the resource adapter.</p><p>This attribute is applicable to connectors (resource adapters) and applications
with connector modules.</p></td></tr>
<tr><td><p><A NAME="indexterm-107"></A><tt>user</tt></p></td><td><p><tt>admin</tt></p></td><td><p>(optional) The user name used when logging into the application server.</p></td></tr>
<tr><td><p><tt>password</tt></p></td><td><p>none</p></td><td><p>(optional) Deprecated, use <tt>passwordfile</tt> instead.
The password used when logging into the application server.</p></td></tr>
<tr><td><p><tt>passwordfile</tt></p></td><td><p>none</p></td><td><p>(optional) File containing passwords. The password from this file is
retrieved for communication with the application server.
If both <tt>password</tt> and <tt>passwordfile</tt> are
specified, <tt>passwordfile</tt> takes precedence.</p></td></tr>
<tr><td><p><A NAME="indexterm-108"></A><tt>host</tt></p></td><td><p><tt>localhost</tt></p></td><td><p>(optional) Target server. When deploying to a remote server, use the
fully qualified host name.</p></td></tr>
<tr><td><p><A NAME="indexterm-109"></A><tt>port</tt></p></td><td><p>4848</p></td><td><p>(optional) The administration port on the target server.</p></td></tr>
<tr><td><p><A NAME="indexterm-110"></A><tt>asinstalldir</tt></p></td><td><p>see description</p></td><td><p>(optional) The installation directory for the local Application Server installation,
which is used to find the administrative classes. If not specified, the command
checks to see if the <tt>asinstalldir</tt> parameter has been set.
Otherwise, administrative classes must be in the system classpath.</p></td></tr>
<tr><td><p><A NAME="indexterm-111"></A><tt>sunonehome</tt></p></td><td><p>see description</p></td><td><p>(optional) Deprecated. Use <tt>asinstalldir</tt> instead.</p></td></tr>
</table><A NAME="fvydq"></A><h4>Examples</h4>
<p>Here is a simple application undeployment script with many implied attributes:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;sun-appserv-undeploy name="simpleapp" passwordfile="${passwordfile}" /></pre>
</td></table><br><p>Here is an equivalent script showing all the implied attributes:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;sun-appserv-undeploy
 name="simpleapp"
 user="admin"
 passwordfile="${passwordfile}"
 host="localhost"
 port="4848"
 asinstalldir="${asinstalldir}" /></pre>
</td></table><br><p>This example demonstrates using the archive files (EAR and WAR, in this
case) for the undeployment, using the component name (for undeploying the
EJB component in this example), and undeploying multiple components.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;sun-appserv-undeploy passwordfile="${passwordfile}">
 &lt;component file="${assemble}/simpleapp.ear"/>
 &lt;component file="${assemble}/simpleservlet.war"/>
 &lt;component name="simplebean" />
&lt;/sun-appserv-undeploy></pre>
</td></table><br><A NAME="beaeu"></A><h3>sun-appserv-component</h3>
<A NAME="indexterm-112"></A><p>Enables or <A NAME="indexterm-113"></A><A NAME="indexterm-114"></A><A NAME="indexterm-115"></A>disables the following Java EE component types that have been
deployed to the Application Server.</p>
<ul><li><p>Enterprise application (EAR file)</p>
</li>
<li><p>Web application (WAR file)</p>
</li>
<li><p>Enterprise Java Bean (EJB-JAR file)</p>
</li>
<li><p>Enterprise connector (RAR file)</p>
</li>
<li><p>Application client</p>
</li>
</ul>
<p>You don't need to specify the archive to enable or disable a component:
only the component name is required. You can use the component archive, however,
because it implies the component name.</p>
<A NAME="fvyhm"></A><h4>Subelements</h4>
<p>The following table describes subelements for the <tt>sun-appserv-component</tt> task. These are objects upon which this task acts.</p>
<A NAME="fvygt"></A><p><b>Table 3-5 </b><tt>sun-appserv-component</tt> Subelements</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Element                      </p></th><th scope="col"><p>Description                      </p></th></tr>
<tr><td><p><A HREF="beaep.html#beafa">component</A>&nbsp;</p></td><td><p>A component to be deployed.</p></td></tr>
<tr><td><p><A HREF="beaep.html#beafb">fileset</A>&nbsp;</p></td><td><p>A set of component files that match specified parameters.</p></td></tr>
</table><A NAME="fvyak"></A><h4>Attributes</h4>
<p>The following table describes attributes for the <tt>sun-appserv-component</tt> task.</p>
<A NAME="fvyet"></A><p><b>Table 3-6 </b><tt>sun-appserv-component</tt> Attributes</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Attribute                         </p></th><th scope="col"><p>Default                         </p></th><th scope="col"><p>Description                         </p></th></tr>
<tr><td><p><A NAME="indexterm-116"></A><tt>action</tt></p></td><td><p>none</p></td><td><p>The control command for the target application server. Valid values
are <tt>enable</tt> and <tt>disable</tt>.</p></td></tr>
<tr><td><p><tt>name</tt></p></td><td><p>file name without extension</p></td><td><p>(optional if a <tt>component</tt> or <tt>fileset</tt> subelement
is present or the <tt>file</tt> attribute is specified, otherwise
required) The display name for the component being enabled or disabled.</p></td></tr>
<tr><td><p><A NAME="indexterm-117"></A><tt>file</tt></p></td><td><p>none</p></td><td><p>(optional) The component to enable or disable. If this attribute refers
to a file, it must be a valid archive. If this attribute refers to a directory,
it must contain a valid archive in which all components have been exploded.</p></td></tr>
<tr><td><p><A NAME="indexterm-118"></A><tt>type</tt></p></td><td><p>determined by extension</p></td><td><p>(optional) Deprecated.</p></td></tr>
<tr><td><p><A NAME="indexterm-119"></A><tt>user</tt></p></td><td><p><tt>admin</tt></p></td><td><p>(optional) The user name used when logging into the application server.</p></td></tr>
<tr><td><p><tt>password</tt></p></td><td><p>none</p></td><td><p>(optional) Deprecated, use <tt>passwordfile</tt> instead.
The password used when logging into the application server.</p></td></tr>
<tr><td><p><tt>passwordfile</tt></p></td><td><p>none</p></td><td><p>(optional) File containing passwords. The password from this file is
retrieved for communication with the application server.
If both <tt>password</tt> and <tt>passwordfile</tt> are
specified, <tt>passwordfile</tt> takes precedence.</p></td></tr>
<tr><td><p><A NAME="indexterm-120"></A><tt>host</tt></p></td><td><p><tt>localhost</tt></p></td><td><p>(optional) Target server. When enabling or disabling a remote server,
use the fully qualified host name.</p></td></tr>
<tr><td><p><A NAME="indexterm-121"></A><tt>port</tt></p></td><td><p><tt>4848</tt></p></td><td><p>(optional) The administration port on the target server.</p></td></tr>
<tr><td><p><A NAME="indexterm-122"></A><tt>asinstalldir</tt></p></td><td><p>see description</p></td><td><p>(optional) The installation directory for the local Application Server installation,
which is used to find the administrative classes. If not specified, the command
checks to see if the <tt>asinstalldir</tt> parameter has been set.
Otherwise, administrative classes must be in the system classpath.</p></td></tr>
<tr><td><p><A NAME="indexterm-123"></A><tt>sunonehome</tt></p></td><td><p>see description</p></td><td><p>(optional) Deprecated. Use <tt>asinstalldir</tt> instead.</p></td></tr>
</table><A NAME="fvyhy"></A><h4>Examples</h4>
<p>Here is a simple example of disabling a component:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;sun-appserv-component
 action="disable"
 name="simpleapp"
 passwordfile="${passwordfile}" /></pre>
</td></table><br><p>Here is a simple example of enabling a component:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;sun-appserv-component
 action="enable"
 name="simpleapp"
 passwordfile="${passwordfile}" /></pre>
</td></table><br><p>Here is an equivalent script showing all the implied attributes:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;sun-appserv-component
 action="enable"
 name="simpleapp"
 user="admin"
 passwordfile="${passwordfile}"
 host="localhost"
 port="4848"
 asinstalldir="${asinstalldir}" /></pre>
</td></table><br><p>This example demonstrates disabling multiple components using the archive
files (EAR and WAR, in this case) and using the component name (for an EJB
component in this example).</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;sun-appserv-component action="disable" passwordfile="${passwordfile}">
 &lt;component file="${assemble}/simpleapp.ear"/>
 &lt;component file="${assemble}/simpleservlet.war"/>
 &lt;component name="simplebean" />
&lt;/sun-appserv-component></pre>
</td></table><br><A NAME="beaev"></A><h3>sun-appserv-admin</h3>
<A NAME="indexterm-124"></A><p>Enables arbitrary <A NAME="indexterm-125"></A><A NAME="indexterm-126"></A>administrative commands and scripts to be executed on the Application Server.
This is useful for cases where a specific Ant task hasn't been developed
or a set of related commands are in a single script.</p>
<A NAME="fvyct"></A><h4>Subelements</h4>
<p>none</p>
<A NAME="fvydi"></A><h4>Attributes</h4>
<p>The following table describes attributes for the <tt>sun-appserv-admin</tt> task.</p>
<A NAME="fvyfg"></A><p><b>Table 3-7 </b><tt>sun-appserv-admin</tt> Attributes</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Attribute                         </p></th><th scope="col"><p>Default                         </p></th><th scope="col"><p>Description                         </p></th></tr>
<tr><td><p><A NAME="indexterm-127"></A><tt>command</tt></p></td><td><p>none</p></td><td><p>(exactly one of these is required: <tt>command</tt>, <tt>commandfile</tt>, or <tt>explicitcommand</tt>) The command
to execute. If the <tt>user</tt>, <tt>passwordfile</tt>, <tt>host</tt>, or <tt>port</tt> attributes are also specified, they are automatically
inserted into the command before execution. If any of these options are specified
in the command string, the corresponding attribute values are ignored.</p></td></tr>
<tr><td><p><A NAME="indexterm-128"></A><tt>commandfile</tt></p></td><td><p>none</p></td><td><p>(exactly one of these is required: <tt>command</tt>, <tt>commandfile</tt>, or <tt>explicitcommand</tt>) Deprecated.
The command script to execute. If <tt>commandfile</tt> is used,
the values of all other attributes are ignored. Be sure to end the script
referenced by <tt>commandfile</tt> with the <tt>exit</tt> command;
if you omit <tt>exit</tt>, the Ant task might appear to hang after
the command script is called.</p></td></tr>
<tr><td><p><A NAME="indexterm-129"></A><tt>explicitcommand</tt></p></td><td><p>none</p></td><td><p>(exactly one of these is required: <tt>command</tt>, <tt>commandfile</tt>, or <tt>explicitcommand</tt>) The exact command
to execute. No command processing is done, and all other attributes are ignored.</p></td></tr>
<tr><td><p><tt>user</tt></p></td><td><p><tt>admin</tt></p></td><td><p>(optional) The user name used when logging into the application server.</p></td></tr>
<tr><td><p><tt>password</tt></p></td><td><p>none</p></td><td><p>(optional) Deprecated, use <tt>passwordfile</tt> instead.
The password used when logging into the application server.</p></td></tr>
<tr><td><p><tt>passwordfile</tt></p></td><td><p>none</p></td><td><p>(optional) File containing passwords. The password from this file is
retrieved for communication with the application server.
If both <tt>password</tt> and <tt>passwordfile</tt> are
specified, <tt>passwordfile</tt> takes precedence.</p></td></tr>
<tr><td><p><tt>host</tt></p></td><td><p><tt>localhost</tt></p></td><td><p>(optional) Target server. If it is a remote server, use the fully qualified
host name.</p></td></tr>
<tr><td><p><tt>port</tt></p></td><td><p>4848</p></td><td><p>(optional) The administration port on the target server.</p></td></tr>
<tr><td><p><A NAME="indexterm-130"></A><tt>asinstalldir</tt></p></td><td><p>see description</p></td><td><p>(optional) The installation directory for the local Application Server installation,
which is used to find the administrative classes. If not specified, the command
checks to see if the <tt>asinstalldir</tt> parameter has been set.
Otherwise, administrative classes must be in the system classpath.</p></td></tr>
<tr><td><p><A NAME="indexterm-131"></A><tt>sunonehome</tt></p></td><td><p>see description</p></td><td><p>(optional) Deprecated. Use <tt>asinstalldir</tt> instead.</p></td></tr>
</table><A NAME="fvyck"></A><h4>Examples</h4>
<p>Here is an example of executing the <tt>create-jms-dest</tt> command:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;sun-appserv-admin command="create-jms-dest --desttype topic"></pre>
</td></table><br><p>Here is an example of using <tt>commandfile</tt> to execute
the <tt>create-jms-dest</tt> command:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;sun-appserv-admin commandfile="create_jms_dest.txt" instance="development"></pre>
</td></table><br><p>The <tt>create_jms_dest.txt</tt> file contains the following:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>create-jms-dest --user joeuser --host localhost --port 4848 
--desttype topic --target server1 simpleJmsDest</pre>
</td></table><br><p>Here is an example of using <tt>explicitcommand</tt> to execute
the <tt>create-jms-dest</tt> command:</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;sun-appserv-admin command="create-jms-dest --user joeuser --host localhost 
--port 4848 --desttype topic --target server1 simpleJmsDest"></pre>
</td></table><br><A NAME="beaew"></A><h3>sun-appserv-jspc</h3>
<A NAME="indexterm-132"></A><p>Precompiles <A NAME="indexterm-133"></A><A NAME="indexterm-134"></A>JSP source code into Application Server compatible Java code for initial
invocation by Application Server. Use this task to speed up access to JSP files
or to check the syntax of JSP source code. You can feed the resulting Java
code to the <tt>javac</tt> task to generate class files for the
JSP files.</p>
<A NAME="fvyjj"></A><h4>Subelements</h4>
<p>none</p>
<A NAME="fvyhl"></A><h4>Attributes</h4>
<p>The following table describes attributes for the <tt>sun-appserv-jspc</tt> task.</p>
<A NAME="fvyds"></A><p><b>Table 3-8 </b><tt>sun-appserv-jspc</tt> Attributes</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Attribute                         </p></th><th scope="col"><p>Default                         </p></th><th scope="col"><p>Description                         </p></th></tr>
<tr><td><p><A NAME="indexterm-135"></A><tt>destdir</tt></p></td><td><p>&nbsp;</p></td><td><p>The destination directory for the generated Java source files.</p></td></tr>
<tr><td><p><A NAME="indexterm-136"></A><tt>srcdir</tt></p></td><td><p>&nbsp;</p></td><td><p>(exactly one of these is required: <tt>srcdir</tt> or <tt>webapp</tt>) The source directory where the JSP files are located.</p></td></tr>
<tr><td><p><A NAME="indexterm-137"></A><tt>webapp</tt></p></td><td><p>&nbsp;</p></td><td><p>(exactly one of these is required: <tt>srcdir</tt> or <tt>webapp</tt>) The directory containing the web application. All JSP files
within the directory are recursively parsed. The base directory must have
a <tt>WEB-INF</tt> subdirectory beneath it. When <tt>webapp</tt> is used, <tt>sun-appserv-jspc</tt> hands off all dependency
checking to the compiler.</p></td></tr>
<tr><td><p><A NAME="indexterm-138"></A><tt>verbose</tt></p></td><td><p><tt>2</tt></p></td><td><p>(optional) The verbosity integer to be passed to the compiler.</p></td></tr>
<tr><td><p><A NAME="indexterm-139"></A><tt>classpath</tt></p></td><td><p>&nbsp;</p></td><td><p>(optional) The classpath for running the JSP compiler.</p></td></tr>
<tr><td><p><A NAME="indexterm-140"></A><tt>classpathref</tt></p></td><td><p>&nbsp;</p></td><td><p>(optional) A reference to the JSP compiler classpath.</p></td></tr>
<tr><td><p><A NAME="indexterm-141"></A><tt>uribase</tt></p></td><td><p><tt>/</tt></p></td><td><p>(optional) The URI context of relative URI references in the JSP files.
If this context does not exist, it is derived from the location of the JSP
file relative to the declared or derived value of <tt>uriroot</tt>.
Only pages translated from an explicitly declared JSP file are affected.</p></td></tr>
<tr><td><p><A NAME="indexterm-142"></A><tt>uriroot</tt></p></td><td><p>see description</p></td><td><p>(optional) The root directory of the web application, against which
URI files are resolved. If this directory is not specified, the first JSP
file is used to derive it: each parent directory of the first JSP file is
searched for a <tt>WEB-INF</tt> directory, and the directory closest
to the JSP file that has one is used. If no <tt>WEB-INF</tt> directory
is found, the directory <tt>sun-appserv-jspc</tt> was called from
is used. Only pages translated from an explicitly declared JSP file (including
tag libraries) are affected.</p></td></tr>
<tr><td><p><A NAME="indexterm-143"></A><tt>package</tt></p></td><td>&nbsp;</td><td><p>(optional) The destination package for the generated Java classes.</p></td></tr>
<tr><td><p><A NAME="indexterm-144"></A><tt>asinstalldir</tt></p></td><td><p>see description</p></td><td><p>(optional) The installation directory for the local Application Server installation,
which is used to find the administrative classes. If not specified, the command
checks to see if the <tt>asinstalldir</tt> parameter has been set.
Otherwise, administrative classes must be in the system classpath.</p></td></tr>
<tr><td><p><A NAME="indexterm-145"></A><tt>sunonehome</tt></p></td><td><p>see description</p></td><td><p>(optional) Deprecated. Use <tt>asinstalldir</tt> instead.</p></td></tr>
</table><A NAME="fvyma"></A><h4>Example</h4>
<p>The following example uses the <tt>webapp</tt> attribute to
generate Java source files from JSP files. The <tt>sun-appserv-jspc</tt> task
is immediately followed by a <tt>javac</tt> task, which compiles
the generated Java files into class files. The <tt>classpath</tt> value
in the <tt>javac</tt> task must be all on one line with no spaces.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;sun-appserv-jspc
 destdir="${assemble.war}/generated"
 webapp="${assemble.war}"
 classpath="${assemble.war}/WEB-INF/classes"
 asinstalldir="${asinstalldir}" />
&lt;javac
 srcdir="${assemble.war}/WEB-INF/generated"
 destdir="${assemble.war}/WEB-INF/generated"
 debug="on"
 classpath="${assemble.war}/WEB-INF/classes:${asinstalldir}/lib/
   appserv-rt.jar:${asinstalldir}/lib/appserv-ext.jar">
 &lt;include name="**/*.java"/>
&lt;/javac></pre>
</td></table><br><A NAME="beaex"></A><h3>sun-appserv-update</h3>
<A NAME="indexterm-146"></A><p>Enables deployed applications (EAR files) and modules (EJB JAR, RAR,
and WAR files) to be updated and reloaded for fast iterative development.
This task copies modified class files, XML files, and other contents of the
archive files to the appropriate subdirectory of the <i>domain-dir</i><tt>/applications</tt> directory, then touches the <tt>.reload</tt> file
to cause dynamic reloading to occur.</p>
<p>This is a local task and must be executed on the same machine as the
application server.</p>
<A NAME="fvyhc"></A><h4>Subelements</h4>
<p>none</p>
<A NAME="fvymd"></A><h4>Attributes</h4>
<p>The following table describes attributes for the <tt>sun-appserv-update</tt> task.</p>
<A NAME="fvyeq"></A><p><b>Table 3-9 </b><tt>sun-appserv-update</tt> Attributes</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Attribute                         </p></th><th scope="col"><p>Default                         </p></th><th scope="col"><p>Description                         </p></th></tr>
<tr><td><p><A NAME="indexterm-147"></A><tt>file</tt></p></td><td><p>none</p></td><td><p>The component to update, which must be a valid archive.</p></td></tr>
<tr><td><p><A NAME="indexterm-148"></A><tt>domain</tt></p></td><td><p><tt>domain1</tt></p></td><td><p>(optional) The domain in which the application has been previously deployed.</p></td></tr>
</table><A NAME="fvycx"></A><h4>Example</h4>
<p>The following example updates the Java EE application <tt>foo.ear</tt>, which is deployed to the default domain, <tt>domain1</tt>.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;sun-appserv-update file="foo.ear"/></pre>
</td></table><br><A NAME="beaey"></A><h2>Reusable Subelements</h2>
<p>Reusable subelements of the Ant tasks for the Application Server are as follows.
These are objects upon which the Ant tasks act.</p>
<ul><li><p><A HREF="beaep.html#beafa">component</A></p>
</li>
<li><p><A HREF="beaep.html#beafb">fileset</A></p>
</li>
</ul>
<A NAME="beafa"></A><h3>component</h3>
<A NAME="indexterm-149"></A><p>Specifies a Java EE component. Allows a single task to act on multiple
components. The <tt>component</tt> attributes override corresponding
attributes in the parent task; therefore, the parent task attributes function
as default values.</p>
<A NAME="fvyej"></A><h4>Subelements</h4>
<p>none</p>
<A NAME="fvydo"></A><h4>Attributes</h4>
<p>The following table describes attributes for the <tt>component</tt> element.</p>
<A NAME="fvyjw"></A><p><b>Table 3-10 </b><tt>component</tt> Attributes</p>

<table cellspacing="5" border="1">
<tr><th scope="col"><p>Attribute                         </p></th><th scope="col"><p>Default                         </p></th><th scope="col"><p>Description                         </p></th></tr>
<tr><td><p><A NAME="indexterm-150"></A><tt>file</tt></p></td><td><p>none</p></td><td><p>(optional if the parent task is <A HREF="beaep.html#beaes">sun-appserv-undeploy</A> or <A HREF="beaep.html#beaeu">sun-appserv-component</A>) The target
component. If this attribute refers to a file, it must be a valid archive.
If this attribute refers to a directory, it must contain a valid archive in
which all components have been exploded. If <tt>upload</tt> is set
to <tt>false</tt>, this must be an absolute path on the server machine.</p></td></tr>
<tr><td><p><tt>name</tt></p></td><td><p>file name without extension</p></td><td><p>(optional) The display name for the component.</p></td></tr>
<tr><td><p><A NAME="indexterm-151"></A><tt>type</tt></p></td><td><p>determined by extension</p></td><td><p>(optional) Deprecated.</p></td></tr>
<tr><td><p><A NAME="indexterm-152"></A><tt>force</tt></p></td><td><p><tt>true</tt></p></td><td><p>(applies to <A HREF="beaep.html#beaer">sun-appserv-deploy</A> only,
optional) If <tt>true</tt>, the component is overwritten if it already
exists on the server. If <tt>false</tt>, the containing element's
operation fails if the component exists.</p></td></tr>
<tr><td><p><A NAME="indexterm-153"></A><tt>precompilejsp</tt></p></td><td><p><tt>false</tt></p></td><td><p>(applies to <A HREF="beaep.html#beaer">sun-appserv-deploy</A> only,
optional) If <tt>true</tt>, all JSP files found in an enterprise
application (<tt>.ear</tt>) or web application (<tt>.war</tt>)
are precompiled. This attribute is ignored for other component types.</p></td></tr>
<tr><td><p><A NAME="indexterm-154"></A><tt>retrievestubs</tt></p></td><td><p>client stubs not saved</p></td><td><p>(applies to <A HREF="beaep.html#beaer">sun-appserv-deploy</A> only,
optional) The directory where client <A NAME="indexterm-155"></A>stubs are saved.</p></td></tr>
<tr><td><p><A NAME="indexterm-156"></A><tt>contextroot</tt></p></td><td><p>file name without extension</p></td><td><p>(applies to <A HREF="beaep.html#beaer">sun-appserv-deploy</A> only,
optional) The context root for a web module (WAR file). This attribute is
ignored if the component is not a WAR file.</p></td></tr>
<tr><td><p><A NAME="indexterm-157"></A><tt>verify</tt></p></td><td><p><tt>false</tt></p></td><td><p>(applies to <A HREF="beaep.html#beaer">sun-appserv-deploy</A> only,
optional) If <tt>true</tt>, syntax and semantics for all deployment
descriptors is automatically verified for correctness.</p></td></tr>
</table><A NAME="fvych"></A><h4>Examples</h4>
<p>You can deploy multiple components using a single task. This example
deploys each component to the same Application Server running
on a remote server.</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;sun-appserv-deploy passwordfile="${passwordfile}" host="greg.sun.com"
	 asinstalldir="/opt/s1as8" >
&lt;component file="${assemble}/simpleapp.ear"/>
&lt;component file="${assemble}/simpleservlet.war"
	 contextroot="test"/>
&lt;component file="${assemble}/simplebean.jar"/>
&lt;/sun-appserv-deploy></pre>
</td></table><br><p>You can also undeploy multiple components using a single task. This
example demonstrates using the archive files (EAR and WAR, in this case) and
the component name (for the EJB component).</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;sun-appserv-undeploy passwordfile="${passwordfile}">
&lt;component file="${assemble}/simpleapp.ear"/
&lt;component file="${assemble}/simpleservlet.war"/>
&lt;component name="simplebean" />
&lt;/sun-appserv-undeploy></pre>
</td></table><br><p>You can enable or disable multiple components. This example demonstrates
disabling multiple components using the archive files (EAR and WAR, in this
case) and the component name (for the EJB component).</p>
<table cellpadding="4" border="1" cols="1" width="100%"><td><pre>&lt;sun-appserv-component action="disable" passwordfile="${passwordfile}">
&lt;component file="${assemble}/simpleapp.ear"/>
&lt;component file="${assemble}/simpleservlet.war"/>
&lt;component name="simplebean" />
&lt;/sun-appserv-component></pre>
</td></table><br><A NAME="beafb"></A><h3>fileset</h3>
<A NAME="indexterm-158"></A><p>Selects component files that match specified parameters. When <tt>fileset</tt> is included as a subelement, the <tt>name</tt> and <tt>contextroot</tt> attributes of the containing element must use their
default values for each file in the <tt>fileset</tt>. For more information,
see: </p>
<p><A HREF="http://antinstaller.sourceforge.net/manual/manual/CoreTypes/fileset.html">http://antinstaller.sourceforge.net/manual/manual/CoreTypes/fileset.html</A></p>

            <!--stopindex-->
<br>
<A HREF="beade.html">Previous</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="toc.html">Contents</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="idx.html">Index</A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="beafc.html">Next</A>
</body>
</html>
